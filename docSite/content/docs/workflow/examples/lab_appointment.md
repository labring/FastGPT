---
title: 'å®éªŒå®¤é¢„çº¦'
description: 'å±•ç¤ºé«˜çº§ç¼–æ’æ“ä½œæ•°æ®åº“çš„èƒ½åŠ›'
icon: 'database'
draft: false
toc: true
weight: 403
---

|                       |                       |
| --------------------- | --------------------- |
| ![](/imgs/demo-appointment1.jpg) | ![](/imgs/demo-appointment2.jpg) |
| ![](/imgs/demo-appointment3.jpg) | ![](/imgs/demo-appointment4.jpg) |



æœ¬ç¤ºä¾‹æ¼”ç¤ºäº†åˆ©ç”¨é—®é¢˜åˆ†ç±»ã€å†…å®¹æå–å’Œ HTTP æ¨¡å—å®ç°æ•°æ®åº“çš„ CRUD æ“ä½œã€‚ä»¥ä¸€ä¸ªå®éªŒå®¤é¢„çº¦ä¸ºä¾‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å¯¹è¯ç³»ç»Ÿé¢„çº¦ã€å–æ¶ˆã€ä¿®æ”¹é¢„çº¦å’ŒæŸ¥è¯¢é¢„çº¦è®°å½•ã€‚

# ç¼–æ’æµç¨‹è§£æ

ç¼–æ’ Tipsï¼š**ä»å·¦å¾€å³ç¼–è¾‘æµç¨‹ï¼›å°½é‡ä¸è¦ä½¿çº¿äº¤å‰**ã€‚

## 1. å…¨å±€å˜é‡ä½¿ç”¨

é€šè¿‡è®¾è®¡ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè®©ç”¨æˆ·è¾“å…¥å§“åï¼Œæ¨¡æ‹Ÿç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æ˜¯ç›´æ¥é€šè¿‡åµŒå…¥ Token æ¥æ ‡è®°ç”¨æˆ·èº«ä»½ã€‚

## 2. é—®é¢˜åˆ†ç±»

![](/imgs/demo-appointment5.jpg)

å¦‚ä¸Šå›¾ï¼Œç”¨æˆ·é—®é¢˜ä½œä¸ºå¯¹è¯çš„èµ·ç‚¹ï¼Œæµå…¥ã€é—®é¢˜åˆ†ç±»æ¨¡å—ã€‘ï¼Œæ ¹æ®ç”¨æˆ·é—®é¢˜çš„å†…å®¹ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯è¯¢é—®å®éªŒå®¤ç›¸å…³é—®é¢˜ã€é¢„çº¦å®éªŒå®¤æˆ–å…¶ä»–é—®é¢˜ã€‚å¦‚æœç”¨æˆ·è¯¢é—®çš„æ˜¯éå®éªŒé—®é¢˜ï¼Œä¼šç›´æ¥æ‹’ç»å›å¤å†…å®¹ã€‚å†æ ¹æ®é—®é¢˜æ˜¯å±äºè¯¢é—®å®éªŒå®¤ç›¸å…³/é¢„çº¦ç±»é—®é¢˜ï¼Œæ‰§è¡Œä¸åŒçš„æµç¨‹ã€‚

{{% alert icon="ğŸ¤—" context="warning" %}}
**Tips:** è¿™é‡Œéœ€è¦å¢åŠ é€‚å½“çš„ä¸Šä¸‹æ–‡ï¼Œæ–¹ä¾¿æ¨¡å‹æ›´å¥½çš„åˆ¤æ–­å±äºå“ªä¸ªç±»åˆ«~
{{% /alert %}}

## 3. å®éªŒå®¤ä»‹ç»çš„çŸ¥è¯†åº“æœç´¢

è¿™é‡Œä¸å¤šä»‹ç»ï¼Œæ ‡å‡†çš„èµ°äº†ä¸€å¥—çŸ¥è¯†åº“æœç´¢æµç¨‹ã€‚

## 4. å†…å®¹æå–

|                       |                       | |
| --------------------- | --------------------- |--------------------- |
| ![](/imgs/demo-appointment6.jpg) | ![](/imgs/demo-appointment7.jpg) | ![](/imgs/demo-appointment8.jpg) |

å†…å®¹æå–æ˜¯ LLM å¸¦æ¥çš„ååˆ†é‡è¦çš„èƒ½åŠ›ï¼Œå¯ä»¥ä»è‡ªç„¶è¯­è¨€ä¸­æå–å‡ºç»“æ„åŒ–çš„æ•°æ®ï¼Œä»è€Œæ–¹ä¾¿è¿›è¡Œé€»è¾‘å¤„ç†ã€‚

è¿™é‡Œç”¨äº† 2 ä¸ªæå–æ¨¡å—ï¼Œä¸€ä¸ªç”¨äºæå–é¢„çº¦æ—¶é—´å’Œå®éªŒå®¤åç§°ï¼›ä¸€ä¸ªç”¨äºæå–é¢„çº¦è¡Œä¸ºã€‚

æå–æ—¶é—´å’Œå®éªŒå®¤åç§°æ—¶å€™ï¼Œéœ€è¦æ³¨æ„æŠŠå¿…å¡«å…³æ‰ï¼Œå¦åˆ™æ¨¡å‹å¯èƒ½ä¼šä¼ªé€ ä¸€äº›å†…å®¹ï¼ŒåŒæ—¶å†å¯¹æ•°æ®å¤„ç†æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œåˆ¤ç©ºå¤„ç†ã€‚

æœ€åå°†ä¸¤ä¸ªæå–çš„ç»“æœï¼Œé€šè¿‡ HTTP æ¨¡å—å‘é€åˆ°åç«¯è¿›è¡Œæ•°æ®åº“çš„æ“ä½œã€‚

## 5. HTTPæ¨¡å—æ‰§è¡Œé¢„çº¦æ“ä½œ

HTTP æ¨¡å—å…è®¸ä½ è°ƒç”¨ä»»æ„ GET/POST ç±»å‹çš„ HTTP æ¥å£ï¼Œä»è€Œå®ç°ä¸€äº›å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚è¿™é‡Œæˆ‘ä»¬è°ƒç”¨äº†ä¸€ä¸ªé¢„çº¦å®éªŒå®¤çš„æ¥å£ï¼Œä¼ å…¥çš„æ˜¯ä¿¡æ¯æå–æ¨¡å—çš„ç»“æœå’Œé¢„çº¦è¡Œä¸ºã€‚

![](/imgs/demo-appointment9.jpg)

å…·ä½“çš„å…¥å‚ç»“æ„å¯ä»¥å‚è€ƒ[HTTPæ¨¡å—](/docs/workflow/modules/http/)ï¼Œå®åœ¨ä¸è¡Œåœ¨æ¥å£é‡Œå¤šæ‰“å° Debugã€‚

å“åº”å€¼ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦è¿”å›ä¸€ä¸ª **JSON å¯¹è±¡** å³å¯ã€‚æ³¨æ„ï¼æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚

# æ€»ç»“

1. é—®é¢˜åˆ†ç±»å¯ä»¥åœ¨ç®€å•çš„åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œåˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜ç±»å‹ï¼Œä»è€Œå®ç°ä¸åŒçš„è·¯çº¿ã€‚
2. å¯ä»¥é€šè¿‡å†…å®¹æå–æ¨¡å—ï¼Œå®ç°è‡ªç„¶è¯­è¨€è½¬ç»“æ„åŒ–æ•°æ®ï¼Œä»è€Œå®ç°å¤æ‚çš„é€»è¾‘æ“ä½œã€‚
3. å†…å®¹æå– + HTTP æ¨¡å—å…è®¸ä½ æ— é™æ‰©å±•ã€‚

**å›°éš¾ç‚¹**

1. æ¨¡å‹å¯¹è¿ç»­å¯¹è¯æ—¶ï¼Œåˆ†ç±»å’Œæå–èƒ½åŠ›ä¸è¶³ã€‚


# é™„ä»¶

## ç¼–æ’é…ç½®

å¯ç›´æ¥å¤åˆ¶ï¼Œå¯¼å…¥åˆ° FastGPT ä¸­ã€‚

{{% details title="ç¼–æ’é…ç½®" closed="true" %}}

```json
[
  {
    "moduleId": "userChatInput",
    "name": "ç”¨æˆ·é—®é¢˜(å¯¹è¯å…¥å£)",
    "flowType": "questionInput",
    "position": {
      "x": 309.7143912167367,
      "y": 1501.2761754220846
    },
    "inputs": [
      {
        "key": "userChatInput",
        "type": "systemInput",
        "valueType": "string",
        "label": "core.module.input.label.user question",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "userChatInput",
        "label": "core.module.input.label.user question",
        "type": "source",
        "valueType": "string",
        "targets": [
          {
            "moduleId": "hlw67t",
            "key": "userChatInput"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "98xq69",
    "name": "æ–‡æœ¬å†…å®¹æå–",
    "flowType": "contentExtract",
    "showStatus": true,
    "position": {
      "x": 2026.044690845613,
      "y": 1056.7496395595658
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "model",
        "type": "selectExtractModel",
        "valueType": "string",
        "label": "core.module.input.label.LLM",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "gpt-3.5-turbo",
        "connected": false
      },
      {
        "key": "description",
        "type": "textarea",
        "valueType": "string",
        "label": "æå–è¦æ±‚æè¿°",
        "description": "ç»™AIä¸€äº›å¯¹åº”çš„èƒŒæ™¯çŸ¥è¯†æˆ–è¦æ±‚æè¿°ï¼Œå¼•å¯¼AIæ›´å¥½çš„å®Œæˆä»»åŠ¡ã€‚\nè¯¥è¾“å…¥æ¡†å¯ä½¿ç”¨å…¨å±€å˜é‡ã€‚",
        "required": true,
        "placeholder": "ä¾‹å¦‚: \n1. å½“å‰æ—¶é—´ä¸º: {{cTime}}ã€‚ä½ æ˜¯ä¸€ä¸ªå®éªŒå®¤é¢„çº¦åŠ©æ‰‹ï¼Œä½ çš„ä»»åŠ¡æ˜¯å¸®åŠ©ç”¨æˆ·é¢„çº¦å®éªŒå®¤ï¼Œä»æ–‡æœ¬ä¸­è·å–å¯¹åº”çš„é¢„çº¦ä¿¡æ¯ã€‚\n2. ä½ æ˜¯è°·æ­Œæœç´¢åŠ©æ‰‹ï¼Œéœ€è¦ä»æ–‡æœ¬ä¸­æå–å‡ºåˆé€‚çš„æœç´¢è¯ã€‚",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "ä½ æ˜¯å®éªŒå®¤é¢„çº¦åŠ©æ‰‹ï¼Œç”¨æˆ·æ­£åœ¨é¢„çº¦å®éªŒå®¤ï¼Œè¯·ä¸ºä»–è·å–ç›¸å…³é¢„çº¦çš„ä¿¡æ¯ã€‚\nå½“å‰æ—¶é—´ {{cTime}}ã€‚",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "core.module.input.label.chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 12,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "content",
        "type": "target",
        "label": "éœ€è¦æå–çš„æ–‡æœ¬",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "extractKeys",
        "type": "custom",
        "label": "ç›®æ ‡å­—æ®µ",
        "valueType": "any",
        "description": "ç”± 'æè¿°' å’Œ 'key' ç»„æˆä¸€ä¸ªç›®æ ‡å­—æ®µï¼Œå¯æå–å¤šä¸ªç›®æ ‡å­—æ®µ",
        "value": [
          {
            "desc": "å§“å",
            "key": "name",
            "required": false
          },
          {
            "desc": "æ—¶é—´(YYYY/MM/DD HH:mmæ ¼å¼)",
            "key": "time",
            "required": false
          },
          {
            "desc": "å®éªŒå®¤å",
            "key": "labname",
            "required": false
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "success",
        "label": "å­—æ®µå®Œå…¨æå–",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "failed",
        "label": "æå–å­—æ®µç¼ºå¤±",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "fields",
        "label": "å®Œæ•´æå–ç»“æœ",
        "description": "ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š{\"name:\":\"YY\",\"Time\":\"2023/7/2 18:00\"}",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "wgwpx2",
            "key": "info"
          }
        ]
      },
      {
        "key": "name",
        "label": "æå–ç»“æœ-å§“å",
        "description": "æ— æ³•æå–æ—¶ä¸ä¼šè¿”å›",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "time",
        "label": "æå–ç»“æœ-æ—¶é—´(YYYY/MM/DD HH:mmæ ¼å¼)",
        "description": "æ— æ³•æå–æ—¶ä¸ä¼šè¿”å›",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "labname",
        "label": "æå–ç»“æœ-å®éªŒå®¤å",
        "description": "æ— æ³•æå–æ—¶ä¸ä¼šè¿”å›",
        "valueType": "string",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "eg5upi",
    "name": "æŒ‡å®šå›å¤",
    "flowType": "answerNode",
    "position": {
      "x": 3644.154318570156,
      "y": 2087.496890856384
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "text",
        "type": "textarea",
        "valueType": "any",
        "label": "core.module.input.label.Response content",
        "description": "core.module.input.description.Response content",
        "placeholder": "core.module.input.description.Response content",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "",
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "core.module.output.label.running done",
        "description": "core.module.output.description.running done",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "kge59i",
    "name": "ç”¨æˆ·å¼•å¯¼",
    "flowType": "userGuide",
    "position": {
      "x": 271.18826350548954,
      "y": 777.38470952276
    },
    "inputs": [
      {
        "key": "welcomeText",
        "type": "hidden",
        "valueType": "string",
        "label": "core.app.Welcome Text",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ä½ å¥½ï¼Œæˆ‘æ˜¯å®éªŒå®¤åŠ©æ‰‹ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„ä¹ˆï¼Ÿå¦‚éœ€é¢„çº¦æˆ–ä¿®æ”¹é¢„çº¦å®éªŒå®¤ï¼Œè¯·æä¾›å§“åã€æ—¶é—´å’Œå®éªŒå®¤åç§°ã€‚\n[å®éªŒå®¤ä»‹ç»]\n[å¼€æ”¾æ—¶é—´]\n[é¢„çº¦]",
        "connected": false
      },
      {
        "key": "variables",
        "type": "hidden",
        "valueType": "any",
        "label": "core.module.Variable",
        "value": [
          {
            "id": "gt9b23",
            "key": "name",
            "label": "name",
            "type": "input",
            "required": true,
            "maxLen": 50,
            "enums": [
              {
                "value": ""
              }
            ]
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "questionGuide",
        "valueType": "boolean",
        "type": "switch",
        "label": "",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": false,
        "connected": false
      },
      {
        "key": "tts",
        "type": "hidden",
        "valueType": "any",
        "label": "",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": {
          "type": "model",
          "model": "tts-1",
          "voice": "alloy"
        },
        "connected": false
      }
    ],
    "outputs": []
  },
  {
    "moduleId": "hlw67t",
    "name": "é—®é¢˜åˆ†ç±»",
    "flowType": "classifyQuestion",
    "showStatus": true,
    "position": {
      "x": 763.6974006305715,
      "y": 1164.1601096928105
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectCQModel",
        "valueType": "string",
        "label": "core.module.input.label.Classify model",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "gpt-3.5-turbo",
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "valueType": "string",
        "label": "core.module.input.label.Background",
        "description": "core.module.input.description.Background",
        "placeholder": "core.module.input.placeholder.Classify background",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "xxxå®éªŒå®¤æ˜¯ç”±xxxå¤§å­¦ä¸»å¯¼çš„äººå·¥æ™ºèƒ½å®éªŒå®¤ï¼Œè¯·åˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜æ˜¯å±äºè¯¢é—®å®éªŒå®¤ä»‹ç»ï¼Œæˆ–æ˜¯é¢„çº¦å®éªŒå®¤ã€‚",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "core.module.input.label.chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 12,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "custom",
        "label": "",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "agents",
        "type": "custom",
        "valueType": "any",
        "label": "",
        "value": [
          {
            "value": "å®éªŒå®¤é—®é¢˜",
            "key": "fasw"
          },
          {
            "value": "æ–°å¢ã€å–æ¶ˆã€æŸ¥è¯¢ã€ä¿®æ”¹é¢„çº¦å®éªŒå®¤",
            "key": "fqsw"
          },
          {
            "value": "ä¸€èˆ¬èŠå¤©",
            "key": "sq32"
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "fasw",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "l11c2w",
            "key": "switch"
          }
        ]
      },
      {
        "key": "fqsw",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "98xq69",
            "key": "switch"
          },
          {
            "moduleId": "mhw4md",
            "key": "switch"
          }
        ]
      },
      {
        "key": "sq32",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "l5xe4u",
            "key": "switch"
          }
        ]
      },
      {
        "key": "fesw",
        "label": "",
        "type": "hidden",
        "targets": []
      },
      {
        "key": "wqre",
        "label": "",
        "type": "hidden",
        "targets": []
      },
      {
        "key": "sdfa",
        "label": "",
        "type": "hidden",
        "targets": []
      },
      {
        "key": "agex",
        "label": "",
        "type": "hidden",
        "targets": []
      },
      {
        "key": "userChatInput",
        "label": "core.module.input.label.user question",
        "type": "hidden",
        "valueType": "string",
        "targets": [
          {
            "moduleId": "98xq69",
            "key": "content"
          },
          {
            "moduleId": "mhw4md",
            "key": "content"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "l5xe4u",
    "name": "æŒ‡å®šå›å¤",
    "flowType": "answerNode",
    "position": {
      "x": 1108.6507148112876,
      "y": 2292.8493299728207
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "text",
        "type": "textarea",
        "valueType": "any",
        "label": "core.module.input.label.Response content",
        "description": "core.module.input.description.Response content",
        "placeholder": "core.module.input.description.Response content",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "å¯¹ä¸èµ·ï¼Œæˆ‘ä¸å¤ªç†è§£ä½ çš„é—®é¢˜ï¼Œè¯·æ›´è¯¦ç»†æè¿°å…³äºå®éªŒå®¤é—®é¢˜ã€‚",
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "core.module.output.label.running done",
        "description": "core.module.output.description.running done",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "bjfklc",
    "name": "AI å¯¹è¯",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": 2365.8777933722004,
      "y": -8.20949749350251
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "core.module.input.label.aiModel",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "gpt-3.5-turbo",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "",
        "value": 0,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "",
        "value": 550,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "",
        "value": true,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "",
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "",
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "core.ai.Prompt",
        "max": 300,
        "valueType": "string",
        "description": "core.app.tip.chatNodeSystemPromptTip",
        "placeholder": "core.app.tip.chatNodeSystemPromptTip",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "core.module.input.label.chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 2,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "custom",
        "label": "",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "çŸ¥è¯†åº“å¼•ç”¨",
        "description": "core.module.Dataset quote.Input description",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "limitPrompt",
        "type": "textarea",
        "valueType": "string",
        "label": "é™å®šè¯",
        "description": "é™å®šæ¨¡å‹å¯¹è¯èŒƒå›´ï¼Œä¼šè¢«æ”¾ç½®åœ¨æœ¬æ¬¡æé—®å‰ï¼Œæ‹¥æœ‰å¼ºå¼•å¯¼å’Œé™å®šæ€§ã€‚å¯ä½¿ç”¨å˜é‡ï¼Œä¾‹å¦‚ {{language}}ã€‚å¼•å¯¼ä¾‹å­:\n1. çŸ¥è¯†åº“æ˜¯å…³äº Laf çš„ä»‹ç»ï¼Œå‚è€ƒçŸ¥è¯†åº“å›ç­”é—®é¢˜ï¼Œä¸ \"Laf\" æ— å…³å†…å®¹ï¼Œç›´æ¥å›å¤: \"æˆ‘ä¸çŸ¥é“\"ã€‚\n2. ä½ ä»…å›ç­”å…³äº \"xxx\" çš„é—®é¢˜ï¼Œå…¶ä»–é—®é¢˜å›å¤: \"xxxx\"",
        "placeholder": "é™å®šæ¨¡å‹å¯¹è¯èŒƒå›´ï¼Œä¼šè¢«æ”¾ç½®åœ¨æœ¬æ¬¡æé—®å‰ï¼Œæ‹¥æœ‰å¼ºå¼•å¯¼å’Œé™å®šæ€§ã€‚å¯ä½¿ç”¨å˜é‡ï¼Œä¾‹å¦‚ {{language}}ã€‚å¼•å¯¼ä¾‹å­:\n1. çŸ¥è¯†åº“æ˜¯å…³äº Laf çš„ä»‹ç»ï¼Œå‚è€ƒçŸ¥è¯†åº“å›ç­”é—®é¢˜ï¼Œä¸ \"Laf\" æ— å…³å†…å®¹ï¼Œç›´æ¥å›å¤: \"æˆ‘ä¸çŸ¥é“\"ã€‚\n2. ä½ ä»…å›ç­”å…³äº \"xxx\" çš„é—®é¢˜ï¼Œå…¶ä»–é—®é¢˜å›å¤: \"xxxx\"",
        "value": "",
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "answerText",
        "label": "core.module.output.label.Ai response content",
        "description": "core.module.output.description.Ai response content",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "history",
        "label": "core.module.output.label.New context",
        "description": "core.module.output.description.New context",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      },
      {
        "key": "finish",
        "label": "core.module.output.label.running done",
        "description": "core.module.output.description.running done",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "userChatInput",
        "label": "core.module.input.label.user question",
        "type": "hidden",
        "valueType": "string",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "ee1fo3",
    "name": "ç”¨æˆ·é—®é¢˜(å¯¹è¯å…¥å£)",
    "flowType": "questionInput",
    "position": {
      "x": 1133.7087158919899,
      "y": 638.1461154935015
    },
    "inputs": [
      {
        "key": "userChatInput",
        "type": "systemInput",
        "valueType": "string",
        "label": "core.module.input.label.user question",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "userChatInput",
        "label": "core.module.input.label.user question",
        "type": "source",
        "valueType": "string",
        "targets": [
          {
            "moduleId": "l11c2w",
            "key": "userChatInput"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "mhw4md",
    "name": "æ–‡æœ¬å†…å®¹æå–",
    "flowType": "contentExtract",
    "showStatus": true,
    "position": {
      "x": 1998.6877686115522,
      "y": 2284.0093794426766
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "model",
        "type": "selectExtractModel",
        "valueType": "string",
        "label": "core.module.input.label.LLM",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "gpt-3.5-turbo",
        "connected": false
      },
      {
        "key": "description",
        "type": "textarea",
        "valueType": "string",
        "label": "æå–è¦æ±‚æè¿°",
        "description": "ç»™AIä¸€äº›å¯¹åº”çš„èƒŒæ™¯çŸ¥è¯†æˆ–è¦æ±‚æè¿°ï¼Œå¼•å¯¼AIæ›´å¥½çš„å®Œæˆä»»åŠ¡ã€‚\nè¯¥è¾“å…¥æ¡†å¯ä½¿ç”¨å…¨å±€å˜é‡ã€‚",
        "required": true,
        "placeholder": "ä¾‹å¦‚: \n1. å½“å‰æ—¶é—´ä¸º: {{cTime}}ã€‚ä½ æ˜¯ä¸€ä¸ªå®éªŒå®¤é¢„çº¦åŠ©æ‰‹ï¼Œä½ çš„ä»»åŠ¡æ˜¯å¸®åŠ©ç”¨æˆ·é¢„çº¦å®éªŒå®¤ï¼Œä»æ–‡æœ¬ä¸­è·å–å¯¹åº”çš„é¢„çº¦ä¿¡æ¯ã€‚\n2. ä½ æ˜¯è°·æ­Œæœç´¢åŠ©æ‰‹ï¼Œéœ€è¦ä»æ–‡æœ¬ä¸­æå–å‡ºåˆé€‚çš„æœç´¢è¯ã€‚",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "åˆ¤æ–­æˆ‘çš„è¡Œä¸ºï¼šæŸ¥è¯¢é¢„çº¦ï¼Œæ–°å¢é¢„çº¦ã€å–æ¶ˆé¢„çº¦æˆ–è€…ä¿®æ”¹é¢„çº¦å®éªŒå®¤ã€‚",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "core.module.input.label.chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 12,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "content",
        "type": "target",
        "label": "éœ€è¦æå–çš„æ–‡æœ¬",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "extractKeys",
        "type": "custom",
        "label": "ç›®æ ‡å­—æ®µ",
        "valueType": "any",
        "description": "ç”± 'æè¿°' å’Œ 'key' ç»„æˆä¸€ä¸ªç›®æ ‡å­—æ®µï¼Œå¯æå–å¤šä¸ªç›®æ ‡å­—æ®µ",
        "value": [
          {
            "desc": "é¢„çº¦è¡Œä¸º(post: é¢„çº¦; delete: å–æ¶ˆé¢„çº¦; put: ä¿®æ”¹é¢„çº¦; get: æŸ¥çœ‹é¢„çº¦)",
            "key": "action",
            "required": true,
            "enum": "post\ndelete\nput\nget"
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "success",
        "label": "å­—æ®µå®Œå…¨æå–",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "failed",
        "label": "æå–å­—æ®µç¼ºå¤±",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "fields",
        "label": "å®Œæ•´æå–ç»“æœ",
        "description": "ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š{\"name:\":\"YY\",\"Time\":\"2023/7/2 18:00\"}",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "action",
        "label": "æå–ç»“æœ-é¢„çº¦è¡Œä¸º(post: é¢„çº¦; delete: å–æ¶ˆé¢„çº¦; put: ä¿®æ”¹é¢„çº¦; get: æŸ¥çœ‹é¢„çº¦)",
        "description": "æ— æ³•æå–æ—¶ä¸ä¼šè¿”å›",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "wgwpx2",
            "key": "action"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "wgwpx2",
    "name": "core.module.template.Http request",
    "flowType": "httpRequest468",
    "showStatus": true,
    "position": {
      "x": 2864.4878467558747,
      "y": 1851.1959050194705
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "POST",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "https://d8dns0.laf.dev/labtest",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "{\r\n  \"name\": \"{{name}}\",\r\n  \"info\": \"{{info}}\",\r\n  \"action\": \"{{action}}\"\r\n}",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "key": "info",
        "valueType": "string",
        "label": "info",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "key": "action",
        "valueType": "string",
        "label": "action",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "core.module.output.label.running done",
        "description": "core.module.output.description.running done",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "string",
        "key": "result",
        "label": "result",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "eg5upi",
            "key": "text"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "l11c2w",
    "name": "core.module.template.Dataset search",
    "flowType": "datasetSearchNode",
    "showStatus": true,
    "position": {
      "x": 1694.7658061553766,
      "y": 319.67984613673053
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "core.module.input.label.switch",
        "description": "core.module.input.description.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "datasets",
        "type": "selectDataset",
        "label": "core.module.input.label.Select dataset",
        "value": [],
        "valueType": "selectDataset",
        "list": [],
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "similarity",
        "type": "selectDatasetParamsModal",
        "label": "",
        "value": 0.4,
        "valueType": "number",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "limit",
        "type": "hidden",
        "label": "",
        "value": 1500,
        "valueType": "number",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "searchMode",
        "type": "hidden",
        "label": "",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "embedding",
        "connected": false
      },
      {
        "key": "usingReRank",
        "type": "hidden",
        "label": "",
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": false,
        "connected": false
      },
      {
        "key": "datasetSearchUsingExtensionQuery",
        "type": "hidden",
        "label": "",
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": true,
        "connected": false
      },
      {
        "key": "datasetSearchExtensionModel",
        "type": "hidden",
        "label": "",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "datasetSearchExtensionBg",
        "type": "hidden",
        "label": "",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "",
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "custom",
        "label": "",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "userChatInput",
        "label": "core.module.input.label.user question",
        "type": "hidden",
        "valueType": "string",
        "targets": [
          {
            "moduleId": "bjfklc",
            "key": "userChatInput"
          }
        ]
      },
      {
        "key": "isEmpty",
        "label": "core.module.output.label.Search result empty",
        "type": "source",
        "valueType": "boolean",
        "targets": []
      },
      {
        "key": "unEmpty",
        "label": "core.module.output.label.Search result not empty",
        "type": "source",
        "valueType": "boolean",
        "targets": []
      },
      {
        "key": "quoteQA",
        "label": "core.module.Dataset quote.label",
        "type": "source",
        "valueType": "datasetQuote",
        "targets": [
          {
            "moduleId": "bjfklc",
            "key": "quoteQA"
          }
        ]
      },
      {
        "key": "finish",
        "label": "core.module.output.label.running done",
        "description": "core.module.output.description.running done",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  }
]
```

{{% /details %}}

## Laf äº‘å‡½æ•°ä»£ç 

å¯ä»¥åœ¨ [Laf](https://laf.dev/) ä¸­å¿«é€Ÿæ„å»º HTTP æ¥å£ã€‚

{{% details title="å‡½æ•°ä»£ç " closed="true" %}}

```ts
import cloud from '@lafjs/cloud'
const db = cloud.database()

type RequestType = {
    name: string;
    info: string;
    action: 'post' | 'delete' | 'put' | 'get'
}
type recordType = {
  name?: string;
  time?: string;
  labname?: string;
}

export default async function (ctx: FunctionContext) {
  try {
    console.log(ctx.body, '==2222=')

    const { name,info, action } = ctx.body as RequestType


    const parseBody = { name, ...JSON.parse(info) } as recordType
    console.log(parseBody, '===')

    if (action === 'get') {
      return await getRecord(parseBody)
    }
    if (action === 'post') {
      return await createRecord(parseBody)
    }
    if (action === 'put') {
      return await putRecord(parseBody)
    }
    if (action === 'delete') {
      return await removeRecord(parseBody)
    }


    return {
      result: "å¼‚å¸¸"
    }
  } catch (err) {
    console.log(err)
    return {
      result: "å¼‚å¸¸"
    }
  }
}

async function putRecord({ name, time, labname }: recordType) {
  const missData = []
  if (!name) missData.push("ä½ çš„å§“å")

  if (missData.length > 0) {
    return {
      result: `è¯·æä¾›: ${missData.join("ã€")}`
    }
  }

  const { data: record } = await db.collection("LabAppointment").where({
    name, status: "unStart"
  }).getOne()

  if (!record) {
    return {
      result: `${name} è¿˜æ²¡æœ‰é¢„çº¦è®°å½•`
    }
  }

  const updateWhere = {
    name,
    time: time || record.time,
    labname: labname || record.labname
  }

  await db.collection("LabAppointment").where({
    name, status: "unStart"
  }).update(updateWhere)

  return {
    result: `ä¿®æ”¹é¢„çº¦æˆåŠŸã€‚
  å§“åï¼š${name}Â·
  æ—¶é—´: ${updateWhere.time}
  å®éªŒå®¤å: ${updateWhere.labname}
  ` }
}


async function getRecord({ name }: recordType) {
  if (!name) {
    return {
      result: "è¯·æä¾›ä½ çš„å§“å"
    }
  }
  const { data } = await db.collection('LabAppointment').where({ name, status: "unStart" }).getOne()

  if (!data) {
    return {
      result: `${name} æ²¡æœ‰é¢„çº¦ä¸­çš„è®°å½•`
    }
  }
  return {
    result: `${name} æœ‰ä¸€æ¡é¢„çº¦è®°å½•ï¼š
å§“åï¼š${data.name}
æ—¶é—´: ${data.time}
å®éªŒå®¤å: ${data.labname}
    `
  }
}

async function removeRecord({ name }: recordType) {
  if (!name) {
    return {
      result: "è¯·æä¾›ä½ çš„å§“å"
    }
  }
  const { deleted } = await db.collection('LabAppointment').where({ name, status: "unStart" }).remove()

  if (deleted > 0) {
    return {
      result: `å–æ¶ˆé¢„çº¦è®°å½•æˆåŠŸ: ${name}`
    }
  }
  return {
    result: ` ${name} æ²¡æœ‰é¢„çº¦ä¸­çš„è®°å½•`
  }
}

async function createRecord({ name, time, labname }: recordType) {
  const missData = []
  if (!name) missData.push("ä½ çš„å§“å")
  if (!time) missData.push("éœ€è¦é¢„çº¦çš„æ—¶é—´")
  if (!labname) missData.push("å®éªŒå®¤ååç§°")

  if (missData.length > 0) {
    return {
      result: `è¯·æä¾›: ${missData.join("ã€")}`
    }
  }

  const { data: record } = await db.collection("LabAppointment").where({
    name, status: "unStart"
  }).getOne()

  if (record) {
    return {
      result: `æ‚¨å·²ç»æœ‰ä¸€ä¸ªé¢„çº¦è®°å½•äº†:
å§“åï¼š${record.name}
æ—¶é—´: ${record.time}
å®éªŒå®¤å: ${record.labname}

æ¯äººä»…èƒ½åŒæ—¶é¢„çº¦ä¸€ä¸ªå®éªŒå®¤åã€‚
      `
    }
  }

  await db.collection("LabAppointment").add({
    name, time, labname, status: "unStart"
  })

  return {
    result: `é¢„çº¦æˆåŠŸã€‚
  å§“åï¼š${name}
  æ—¶é—´: ${time}
  å®éªŒå®¤å: ${labname}
  ` }
}
```

{{% /details %}}
