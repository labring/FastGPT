{
  "name": "åŠ¨ç‰©çš„ä¸€ç”Ÿ",
  "intro": "ä½¿ç”¨AIç”Ÿæˆä»»ä½•äº‹ç‰©çš„ â€œäººç”Ÿå›¾â€",
  "author": "",
  "avatar": "/appMarketTemplates/animalLife/avatar.svg",
  "tags": ["roleplay"],
  "type": "advanced",
  "workflow": {
    "nodes": [
      {
        "nodeId": "userGuide",
        "name": "common:core.module.template.system_config",
        "intro": "common:core.module.template.system_config_info",
        "avatar": "core/workflow/template/systemConfig",
        "flowNodeType": "userGuide",
        "position": {
          "x": 262.2732338817093,
          "y": -476.00241136598146
        },
        "version": "481",
        "inputs": [
          {
            "key": "welcomeText",
            "renderTypeList": ["hidden"],
            "valueType": "string",
            "label": "core.app.Welcome Text",
            "value": ""
          },
          {
            "key": "variables",
            "renderTypeList": ["hidden"],
            "valueType": "any",
            "label": "core.app.Chat Variable",
            "value": []
          },
          {
            "key": "questionGuide",
            "valueType": "boolean",
            "renderTypeList": ["hidden"],
            "label": "core.app.Question Guide",
            "value": false
          },
          {
            "key": "tts",
            "renderTypeList": ["hidden"],
            "valueType": "any",
            "label": "",
            "value": {
              "type": "web"
            }
          },
          {
            "key": "whisper",
            "renderTypeList": ["hidden"],
            "valueType": "any",
            "label": "",
            "value": {
              "open": false,
              "autoSend": false,
              "autoTTSResponse": false
            }
          },
          {
            "key": "scheduleTrigger",
            "renderTypeList": ["hidden"],
            "valueType": "any",
            "label": "",
            "value": null
          }
        ],
        "outputs": []
      },
      {
        "nodeId": "448745",
        "name": "common:core.module.template.work_start",
        "intro": "",
        "avatar": "core/workflow/template/workflowStart",
        "flowNodeType": "workflowStart",
        "position": {
          "x": 632.368838596004,
          "y": -347.7446492944009
        },
        "version": "481",
        "inputs": [
          {
            "key": "userChatInput",
            "renderTypeList": ["reference", "textarea"],
            "valueType": "string",
            "label": "common:core.module.input.label.user question",
            "required": true,
            "toolDescription": "ç”¨æˆ·é—®é¢˜",
            "debugLabel": ""
          }
        ],
        "outputs": [
          {
            "id": "userChatInput",
            "key": "userChatInput",
            "label": "common:core.module.input.label.user question",
            "type": "static",
            "valueType": "string",
            "description": ""
          }
        ]
      },
      {
        "nodeId": "bg853CwHAw4a",
        "name": "AI å¯¹è¯",
        "intro": "AI å¤§æ¨¡å‹å¯¹è¯",
        "avatar": "core/workflow/template/aiChat",
        "flowNodeType": "chatNode",
        "showStatus": true,
        "position": {
          "x": 1318.728987052518,
          "y": -612.0024113659815
        },
        "version": "481",
        "inputs": [
          {
            "key": "model",
            "renderTypeList": ["settingLLMModel", "reference"],
            "label": "AI æ¨¡å‹",
            "valueType": "string",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": "",
            "value": "claude-3-5-sonnet-20240620"
          },
          {
            "key": "temperature",
            "renderTypeList": ["hidden"],
            "label": "",
            "value": 0,
            "valueType": "number",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "maxToken",
            "renderTypeList": ["hidden"],
            "label": "",
            "value": 4000,
            "valueType": "number",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "isResponseAnswerText",
            "renderTypeList": ["hidden"],
            "label": "",
            "value": false,
            "valueType": "boolean",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "aiChatQuoteRole",
            "renderTypeList": ["hidden"],
            "label": "",
            "valueType": "string",
            "value": "system",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "quoteTemplate",
            "renderTypeList": ["hidden"],
            "label": "",
            "valueType": "string",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "quotePrompt",
            "renderTypeList": ["hidden"],
            "label": "",
            "valueType": "string",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "aiChatVision",
            "renderTypeList": ["hidden"],
            "label": "",
            "valueType": "boolean",
            "value": false,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "systemPrompt",
            "renderTypeList": ["textarea", "reference"],
            "max": 3000,
            "valueType": "string",
            "label": "æç¤ºè¯",
            "description": "core.app.tip.systemPromptTip",
            "placeholder": "core.app.tip.chatNodeSystemPromptTip",
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": "",
            "value": "{æç¤ºè¯ STARTï¼š\n;; æç¤ºè¯ï¼šåŠ¨ç‰©çš„ä¸€ç”Ÿ\n;; ä½œè€…ï¼šç©ºæ ¼ zephyr\n\n(defun åŠ¨ç‰©ç”Ÿå‘½å‘¨æœŸ ()\n  \"ç”ŸæˆåŠ¨ç‰©çš„ç”Ÿå‘½å‘¨æœŸSVGå›¾è¡¨å’Œæè¿°\"\n  (lambda (ä¸»é¢˜)\n    (let* ((ç”Ÿå‘½é˜¶æ®µ (è·å–ç”Ÿå‘½é˜¶æ®µ ä¸»é¢˜))\n           (ç§‘æ™®æ•°æ® (è·å–ç§‘æ™®æ•°æ® ä¸»é¢˜))\n           (èƒŒæ™¯æ ·å¼ (è®¾è®¡èƒŒæ™¯ ä¸»é¢˜))\n           (æ—¶é—´è½´ (åˆ›å»ºæ—¶é—´è½´ ä¸»é¢˜))\n           (é˜¶æ®µemoji (é€‰æ‹©é˜¶æ®µemoji ä¸»é¢˜))\n           (è£…é¥°emoji (é€‰æ‹©è£…é¥°emoji ä¸»é¢˜))\n           (å‰¯æ ‡é¢˜ (ç”Ÿæˆå‰¯æ ‡é¢˜ ä¸»é¢˜ ç§‘æ™®æ•°æ®)))\n      (åˆ›å»ºä¼˜åŒ–SVGå›¾è¡¨ ä¸»é¢˜ ç”Ÿå‘½é˜¶æ®µ ç§‘æ™®æ•°æ® èƒŒæ™¯æ ·å¼ æ—¶é—´è½´ é˜¶æ®µemoji è£…é¥°emoji å‰¯æ ‡é¢˜))))\n\n(defun è·å–ç”Ÿå‘½é˜¶æ®µ (ä¸»é¢˜)\n  \"è·å–ä¸»é¢˜çš„ä¸»è¦ç”Ÿå‘½é˜¶æ®µ\"\n  (case ä¸»é¢˜\n    (è‰ '(\"åµ\" \"è‹¥è™«æœŸ(åœ°ä¸‹)\" \"æˆè™«æœŸ\"))\n    (é²¸é±¼ '(\"èƒå„¿æœŸ\" \"å¹¼å¹´æœŸ\" \"é’å¹´æœŸ\" \"æˆå¹´æœŸ\" \"è€å¹´æœŸ\"))\n    (é•¿é¢ˆé¹¿ '(\"æ–°ç”ŸæœŸ\" \"å¹¼å¹´æœŸ\" \"é’å¹´æœŸ\" \"æˆå¹´æœŸ\" \"è€å¹´æœŸ\"))\n    (t '(\"åˆæœŸ\" \"æˆé•¿æœŸ\" \"æˆç†ŸæœŸ\" \"è¡°è€æœŸ\"))))\n\n(defun è·å–ç§‘æ™®æ•°æ® (ä¸»é¢˜)\n  \"è·å–ä¸»é¢˜çš„ç§‘æ™®æ•°æ®åˆ—è¡¨\"\n  (case ä¸»é¢˜\n    (è‰ '((\"åµåœ¨æ ‘æä¸­å­µåŒ–6-10å‘¨ï¼Œæ¯çªå¯äº§200-600é¢—åµã€‚\"\n           \"è‹¥è™«åœ¨åœ°ä¸‹ç”Ÿæ´»å¤šå¹´ï¼Œå¸é£Ÿæ ‘æ ¹æ±æ¶²ç”Ÿå­˜ã€‚\"\n           \"è‹¥è™«ç»å†5æ¬¡èœ•çš®ï¼Œä½“å‹å¯å¢å¤§20å€ã€‚\"\n           \"æœ€åä¸€æ¬¡èœ•çš®åé’»å‡ºåœ°é¢ï¼Œå˜ä¸ºæˆè™«ã€‚\"\n           \"æˆè™«æœŸä»…4-6å‘¨ï¼Œä¸“æ³¨äºç¹è¡åä»£å’Œé¸£å«ã€‚\")\n          \"è‰çš„åœ°ä¸‹æ½œä¼æœŸé•¿è¾¾17å¹´ï¼Œæˆè™«ä»…å­˜æ´»4-6å‘¨ï¼Œé¸£å«å£°å¯è¾¾120åˆ†è´ï¼Œç›¸å½“äºé£æœºèµ·é£çš„å™ªéŸ³ã€‚\"))\n    (é²¸é±¼ '((\"è“é²¸èƒå„¿æ¯å¤©å¢é‡90å…¬æ–¤ï¼Œå‡ºç”Ÿæ—¶é‡è¾¾2.5å¨ï¼Œé•¿7ç±³ã€‚\"\n            \"å¹¼é²¸æ¯å¤©å–380å‡å¥¶ï¼Œ7ä¸ªæœˆå¢é‡30å¨ã€‚\"\n            \"é’å¹´è“é²¸å¯æ½œæ°´200ç±³æ·±ï¼Œå±æ¯é•¿è¾¾40åˆ†é’Ÿã€‚\"\n            \"æˆå¹´è“é²¸é•¿30ç±³ï¼Œé‡190å¨ï¼Œä¸€å¤©åƒ4å¨ç£·è™¾ã€‚\"\n            \"æœ€é•¿å¯¿è“é²¸å¹´é¾„å¯è¾¾110å²ï¼Œç»ˆç”Ÿå¯æ¸¸13æ¬¡åœ°çƒèµ¤é“è·ç¦»ã€‚\")\n           \"è“é²¸æ˜¯åœ°çƒä¸Šæœ€å¤§çš„åŠ¨ç‰©ï¼Œå¿ƒè„é‡è¾¾600å…¬æ–¤ï¼ŒèˆŒå¤´é‡å¦‚ä¸€å¤´å¤§è±¡ï¼Œå«å£°å¯ä¼ æ’­1600å…¬é‡Œã€‚\"))\n    (t '((\"é˜¶æ®µ1çš„æ•°æ®æè¿°\"\n          \"é˜¶æ®µ2çš„æ•°æ®æè¿°\"\n          \"é˜¶æ®µ3çš„æ•°æ®æè¿°\"\n          \"é˜¶æ®µ4çš„æ•°æ®æè¿°\"\n          \"é˜¶æ®µ5çš„æ•°æ®æè¿°\")\n         \"é€šç”¨ä¸»é¢˜çš„æœ‰è¶£æ•°æ®æè¿°\"))))\n\n(defun è®¾è®¡èƒŒæ™¯ (ä¸»é¢˜)\n  \"æ ¹æ®ä¸»é¢˜è®¾è®¡é€‚åˆçš„èƒŒæ™¯\"\n  (case ä¸»é¢˜\n    (è‰ '(æ¸å˜ \"E6F3FF\" \"B3E5FC\" åœŸåœ°))\n    (é²¸é±¼ '(æ¸å˜ \"E3F2FD\" \"90CAF9\" æµ·æ´‹))\n    (é•¿é¢ˆé¹¿ '(æ¸å˜ \"FFF8E1\" \"FFE0B2\" è‰åŸ))\n    (t '(æ¸å˜ \"F5F5F5\" \"E0E0E0\" é€šç”¨))))\n\n(defun åˆ›å»ºæ—¶é—´è½´ (ä¸»é¢˜)\n  \"åˆ›å»ºä¸»é¢˜ç”Ÿå‘½å‘¨æœŸçš„æ—¶é—´è½´\"\n  (case ä¸»é¢˜\n    (è‰ '(\"0å¹´\" \"4å¹´\" \"8å¹´\" \"12å¹´\" \"16å¹´\" \"17å¹´\"))\n    (é²¸é±¼ '(\"0å¹´\" \"10å¹´\" \"25å¹´\" \"50å¹´\" \"75å¹´\" \"100å¹´\"))\n    (é•¿é¢ˆé¹¿ '(\"0æœˆ\" \"6æœˆ\" \"2å¹´\" \"4å¹´\" \"15å¹´\" \"25å¹´\"))\n    (t '(\"åˆæœŸ\" \"æˆé•¿æœŸ\" \"æˆç†ŸæœŸ\" \"åæœŸ\" \"è¡°è€æœŸ\"))))\n\n(defun é€‰æ‹©é˜¶æ®µemoji (ä¸»é¢˜)\n  \"é€‰æ‹©ä¸ç”Ÿå‘½é˜¶æ®µç›¸å…³çš„emoji\"\n  (case ä¸»é¢˜\n    (è‰ '(\"ğŸ¥š\" \"ğŸ›\" \"ğŸ¦Ÿ\" \"ğŸµ\"))\n    (é²¸é±¼ '(\"ğŸ¤°\" \"ğŸ¼\" \"ğŸŠ\" \"ğŸ‹\" \"ğŸ‘µ\"))\n    (é•¿é¢ˆé¹¿ '(\"ğŸ‘¶\" \"ğŸ•\" \"ğŸƒ\" \"ğŸ¦’\" \"ğŸ‘µ\"))\n    (t '(\"ğŸŒ±\" \"ğŸŒ¿\" \"ğŸŒ³\" \"ğŸ‚\"))))\n\n(defun é€‰æ‹©è£…é¥°emoji (ä¸»é¢˜)\n  \"é€‰æ‹©ä¸ä¸»é¢˜ç›¸å…³çš„è£…é¥°emoji\"\n  (case ä¸»é¢˜\n    (è‰ '(\"ğŸŒ³\" \"ğŸƒ\" \"ğŸŒ¿\" \"ğŸ‚\"))\n    (é²¸é±¼ '(\"ğŸŒŠ\" \"ğŸ \" \"ğŸ¦ˆ\" \"ğŸ™\"))\n    (é•¿é¢ˆé¹¿ '(\"ğŸŒ´\" \"ğŸŒ¿\" \"ğŸ¦“\" \"ğŸ¦\"))\n    (t '(\"ğŸŒ±\" \"ğŸŒ³\" \"ğŸƒ\" \"ğŸŒ\"))))\n\n(defun ç”Ÿæˆå‰¯æ ‡é¢˜ (ä¸»é¢˜ ç§‘æ™®æ•°æ®)\n  \"æ ¹æ®ç§‘æ™®æ•°æ®ç”Ÿæˆå‰¯æ ‡é¢˜\"\n  (format \"ä½ çŸ¥é“å—ï¼Ÿ%s\" (ç¬¬äºŒä¸ªå…ƒç´  ç§‘æ™®æ•°æ®)))\n\n(defun åˆ›å»ºä¼˜åŒ–SVGå›¾è¡¨ (ä¸»é¢˜ ç”Ÿå‘½é˜¶æ®µ ç§‘æ™®æ•°æ® èƒŒæ™¯æ ·å¼ æ—¶é—´è½´ é˜¶æ®µemoji è£…é¥°emoji å‰¯æ ‡é¢˜)\n  \"åˆ›å»ºä¼˜åŒ–çš„ç”Ÿå‘½å‘¨æœŸSVGå›¾è¡¨\"\n  (let ((svg-template\n    \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 800 500\\\">\n      <!-- æ¸å˜èƒŒæ™¯ -->\n      <defs>\n        <linearGradient id=\\\"bgGradient\\\" x1=\\\"0%\\\" y1=\\\"0%\\\" x2=\\\"0%\\\" y2=\\\"100%\\\">\n          <stop offset=\\\"0%\\\" style=\\\"stop-color:#{èƒŒæ™¯é¢œè‰²1};stop-opacity:1\\\" />\n          <stop offset=\\\"100%\\\" style=\\\"stop-color:#{èƒŒæ™¯é¢œè‰²2};stop-opacity:1\\\" />\n        </linearGradient>\n      </defs>\n      <rect width=\\\"100%\\\" height=\\\"100%\\\" fill=\\\"url(#bgGradient)\\\" />\n      \n      <!-- ä¸»é¢˜ç›¸å…³èƒŒæ™¯è£…é¥° -->\n      {èƒŒæ™¯è£…é¥°ï¼‰\n      <!-- æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ -->\n      <text x=\\\"400\\\" y=\\\"30\\\" text-anchor=\\\"middle\\\" class=\\\"title\\\" fill=\\\"#333333\\\">{ä¸»é¢˜}çš„ä¸€ç”Ÿ</text>\n      <text x=\\\"400\\\" y=\\\"60\\\" text-anchor=\\\"middle\\\" class=\\\"subtitle\\\" fill=\\\"#555555\\\">\n        <tspan x=\\\"400\\\" dy=\\\"0\\\">{å‰¯æ ‡é¢˜_ç¬¬ä¸€è¡Œ}</tspan>\n        <tspan x=\\\"400\\\" dy=\\\"20\\\">{å‰¯æ ‡é¢˜_ç¬¬äºŒè¡Œ}</tspan>\n      </text>\n      <!-- æ—¶é—´è½´ -->\n      <line x1=\\\"50\\\" y1=\\\"400\\\" x2=\\\"750\\\" y2=\\\"400\\\" stroke=\\\"#555555\\\" stroke-width=\\\"2\\\" />\n      {æ—¶é—´æ ‡ç­¾}\n      <!-- ç”Ÿå‘½é˜¶æ®µ -->\n      {ç”Ÿå‘½é˜¶æ®µæ ‡ç­¾}\n      <!-- æ•°æ®ç‚¹å’Œç§‘æ™®ä¿¡æ¯ -->\n      {æ•°æ®ç‚¹å’Œç§‘æ™®ä¿¡æ¯}\n      <!-- æ›²çº¿è¿æ¥ -->\n      <path d=\\\"M50,350 Q140,360 230,370 T400,330 T580,290 T730,250\\\" fill=\\\"none\\\" stroke=\\\"#555555\\\" stroke-width=\\\"2\\\"/>\n      <!-- å›¾ä¾‹ -->\n      <rect x=\\\"50\\\" y=\\\"460\\\" width=\\\"700\\\" height=\\\"30\\\" fill=\\\"rgba(255,255,255,0.05)\\\"/>\n      <text x=\\\"60\\\" y=\\\"480\\\" class=\\\"legend-text\\\" fill=\\\"#333333\\\">å›¾ä¾‹ï¼š</text>\n      <circle cx=\\\"150\\\" cy=\\\"475\\\" r=\\\"8\\\" fill=\\\"#FFD700\\\"/>\n      <text x=\\\"170\\\" y=\\\"480\\\" class=\\\"legend-text\\\" fill=\\\"#333333\\\">ç”Ÿå‘½é˜¶æ®µ</text>\n      <line x1=\\\"270\\\" y1=\\\"470\\\" x2=\\\"270\\\" y2=\\\"480\\\" stroke=\\\"#555555\\\" stroke-width=\\\"2\\\"/>\n      <text x=\\\"290\\\" y=\\\"480\\\" class=\\\"legend-text\\\" fill=\\\"#333333\\\">ç”Ÿå‘½å†ç¨‹</text>\n      <text x=\\\"420\\\" y=\\\"480\\\" class=\\\"legend-text\\\" fill=\\\"#333333\\\">{å›¾ä¾‹emoji}</text>\n      <!-- åº•éƒ¨è£…é¥°Emoji -->\n      {åº•éƒ¨è£…é¥°Emoji}\n    </svg>\"))\n    (å¡«å……ä¼˜åŒ–SVGæ¨¡æ¿ svg-template ä¸»é¢˜ ç”Ÿå‘½é˜¶æ®µ ç§‘æ™®æ•°æ® èƒŒæ™¯æ ·å¼ æ—¶é—´è½´ é˜¶æ®µemoji è£…é¥°emoji å‰¯æ ‡é¢˜)))\n(defun start ()\n  (print \"è¯·è¾“å…¥æ‚¨æƒ³äº†è§£çš„ç”Ÿå‘½ä¸»é¢˜ï¼ˆå¦‚ï¼šè‰ã€é²¸é±¼ã€é•¿é¢ˆé¹¿ç­‰ï¼‰ï¼š\")\n  (let ((ç”¨æˆ·è¾“å…¥ (read)))\n    (ä¼˜åŒ–ç”Ÿå‘½å‘¨æœŸç”Ÿæˆå™¨ ç”¨æˆ·è¾“å…¥)))\n;; è¿è¡Œè§„åˆ™\n;; 1. å¯åŠ¨æ—¶è¿è¡Œ (start) å‡½æ•°\n;; 2. æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¸»é¢˜ï¼Œç”Ÿæˆå¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸSVGå›¾è¡¨å’Œæè¿°\n;; 3. è¾“å‡ºåº”åŒ…æ‹¬ä¼˜åŒ–åçš„SVGå›¾è¡¨å’Œç›¸å…³çš„æ–‡å­—è¯´æ˜ï¼Œé‡ç‚¹çªå‡ºç§‘å­¦æ•°æ®å’Œæœ‰è¶£äº‹å®\næç¤ºè¯ END}\n\nï¼ˆç›´æ¥ç”Ÿæˆ svg å®Œæ•´ä»£ç ï¼Œæˆ‘ä¼šå¤åˆ¶ï¼Œéœ€è¦ä½ ç”¨ä»£ç å—ï¼‰\nï¼ˆé™¤æ­¤ä¹‹å¤–ä¸è¦æœ‰å¤šä½™çš„è§£é‡Šï¼Œä¸è¦åœ¨å¼€å¤´åŠ ä¸Šä»»ä½•è¯´æ˜ï¼‰"
          },
          {
            "key": "history",
            "renderTypeList": ["numberInput", "reference"],
            "valueType": "chatHistory",
            "label": "èŠå¤©è®°å½•",
            "description": "workflow:max_dialog_rounds",
            "required": true,
            "min": 0,
            "max": 50,
            "value": 0,
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "quoteQA",
            "renderTypeList": ["settingDatasetQuotePrompt"],
            "label": "",
            "debugLabel": "çŸ¥è¯†åº“å¼•ç”¨",
            "description": "",
            "valueType": "datasetQuote",
            "valueDesc": "",
            "toolDescription": ""
          },
          {
            "key": "stringQuoteText",
            "renderTypeList": ["reference", "textarea"],
            "label": "æ–‡æ¡£å¼•ç”¨",
            "debugLabel": "æ–‡æ¡£å¼•ç”¨",
            "description": "app:document_quote_tip",
            "valueType": "string",
            "valueDesc": "",
            "toolDescription": ""
          },
          {
            "key": "userChatInput",
            "renderTypeList": ["reference", "textarea"],
            "valueType": "string",
            "label": "ç”¨æˆ·é—®é¢˜",
            "required": true,
            "toolDescription": "ç”¨æˆ·é—®é¢˜",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "value": ["448745", "userChatInput"]
          }
        ],
        "outputs": [
          {
            "id": "history",
            "key": "history",
            "required": true,
            "label": "common:core.module.output.label.New context",
            "description": "å°†æœ¬æ¬¡å›å¤å†…å®¹æ‹¼æ¥ä¸Šå†å²è®°å½•ï¼Œä½œä¸ºæ–°çš„ä¸Šä¸‹æ–‡è¿”å›",
            "valueType": "chatHistory",
            "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
            "type": "static"
          },
          {
            "id": "answerText",
            "key": "answerText",
            "required": true,
            "label": "common:core.module.output.label.Ai response content",
            "description": "å°†åœ¨ stream å›å¤å®Œæ¯•åè§¦å‘",
            "valueType": "string",
            "type": "static"
          }
        ]
      },
      {
        "nodeId": "sbVUb0efY6Fm",
        "name": "ä»£ç è¿è¡Œ",
        "intro": "æ‰§è¡Œä¸€æ®µç®€å•çš„è„šæœ¬ä»£ç ï¼Œé€šå¸¸ç”¨äºè¿›è¡Œå¤æ‚çš„æ•°æ®å¤„ç†ã€‚",
        "avatar": "core/workflow/template/codeRun",
        "flowNodeType": "code",
        "showStatus": true,
        "position": {
          "x": 2210.2574140398733,
          "y": -621.0024113659815
        },
        "version": "482",
        "inputs": [
          {
            "key": "system_addInputParam",
            "renderTypeList": ["addInputParam"],
            "valueType": "dynamic",
            "label": "",
            "required": false,
            "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "codeType",
            "renderTypeList": ["hidden"],
            "label": "",
            "value": "js",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "code",
            "renderTypeList": ["custom"],
            "label": "",
            "value": "function main({svg_str}){\n\n    // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä»£ç å—ä¸­çš„å†…å®¹\n    const match = svg_str.match(/```[\\w]*\\n([\\s\\S]*?)```/);\n\n    if (!match) {\n        // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»£ç å—ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯æˆ–ç©ºç»“æœ\n        return {\n            result: null,\n            error: \"æœªæ‰¾åˆ°æœ‰æ•ˆçš„ä»£ç å—æ ‡è®°ã€‚\"\n        };\n    }\n\n    // æå–ä»£ç å—ä¸­çš„ SVG å†…å®¹\n    const extractedSvg = match[1].trim();\n    \n    const base64 = strToBase64(extractedSvg,'data:image/svg+xml;base64,')\n\n    return {\n        result: base64\n    }\n}",
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "renderTypeList": ["reference"],
            "valueType": "string",
            "canEdit": true,
            "key": "svg_str",
            "label": "svg_str",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": "",
            "value": ["bg853CwHAw4a", "answerText"]
          }
        ],
        "outputs": [
          {
            "id": "system_rawResponse",
            "key": "system_rawResponse",
            "label": "workflow:full_response_data",
            "valueType": "object",
            "type": "static",
            "description": ""
          },
          {
            "id": "error",
            "key": "error",
            "label": "workflow:execution_error",
            "description": "ä»£ç è¿è¡Œé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ç©º",
            "valueType": "object",
            "type": "static"
          },
          {
            "id": "system_addOutputParam",
            "key": "system_addOutputParam",
            "type": "dynamic",
            "valueType": "dynamic",
            "label": "",
            "customFieldConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": false
            },
            "description": "å°†ä»£ç ä¸­ return çš„å¯¹è±¡ä½œä¸ºè¾“å‡ºï¼Œä¼ é€’ç»™åç»­çš„èŠ‚ç‚¹ã€‚å˜é‡åéœ€è¦å¯¹åº” return çš„ key",
            "valueDesc": ""
          },
          {
            "id": "qLUQfhG0ILRX",
            "type": "dynamic",
            "key": "result",
            "valueType": "string",
            "label": "result",
            "valueDesc": "",
            "description": ""
          }
        ]
      },
      {
        "nodeId": "cPh2VZnVxjQ8",
        "name": "æŒ‡å®šå›å¤",
        "intro": "è¯¥æ¨¡å—å¯ä»¥ç›´æ¥å›å¤ä¸€æ®µæŒ‡å®šçš„å†…å®¹ã€‚å¸¸ç”¨äºå¼•å¯¼ã€æç¤ºã€‚éå­—ç¬¦ä¸²å†…å®¹ä¼ å…¥æ—¶ï¼Œä¼šè½¬æˆå­—ç¬¦ä¸²è¿›è¡Œè¾“å‡ºã€‚",
        "avatar": "core/workflow/template/reply",
        "flowNodeType": "answerNode",
        "position": {
          "x": 2911.2230784647795,
          "y": -411.6915940628763
        },
        "version": "481",
        "inputs": [
          {
            "key": "text",
            "renderTypeList": ["textarea", "reference"],
            "valueType": "any",
            "required": true,
            "label": "å›å¤çš„å†…å®¹",
            "description": "common:core.module.input.description.Response content",
            "placeholder": "common:core.module.input.description.Response content",
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": "",
            "value": "SVGï¼š\n\n{{$bg853CwHAw4a.answerText$}}\n\nå¡ç‰‡ï¼š\n\n![]({{$sbVUb0efY6Fm.qLUQfhG0ILRX$}})"
          }
        ],
        "outputs": []
      }
    ],
    "edges": [
      {
        "source": "bg853CwHAw4a",
        "target": "sbVUb0efY6Fm",
        "sourceHandle": "bg853CwHAw4a-source-right",
        "targetHandle": "sbVUb0efY6Fm-target-left"
      },
      {
        "source": "448745",
        "target": "bg853CwHAw4a",
        "sourceHandle": "448745-source-right",
        "targetHandle": "bg853CwHAw4a-target-left"
      },
      {
        "source": "sbVUb0efY6Fm",
        "target": "cPh2VZnVxjQ8",
        "sourceHandle": "sbVUb0efY6Fm-source-right",
        "targetHandle": "cPh2VZnVxjQ8-target-left"
      }
    ],
    "chatConfig": {
      "variables": [],
      "scheduledTriggerConfig": {
        "cronString": "",
        "timezone": "Asia/Shanghai",
        "defaultPrompt": ""
      },
      "_id": "66f0f7540a40cd1f97da9dd6"
    }
  }
}
