import{createRequire as fm}from"node:module";var ev=Object.create;var{getPrototypeOf:pm,defineProperty:tp,getOwnPropertyNames:im}=Object;var xm=Object.prototype.hasOwnProperty;var vm=(p,i,x)=>{x=p!=null?ev(pm(p)):{};let v=i||!p||!p.__esModule?tp(x,"default",{value:p,enumerable:!0}):x;for(let m of im(p))if(!xm.call(v,m))tp(v,m,{get:()=>p[m],enumerable:!0});return v};var A=(p,i)=>()=>(i||p((i={exports:{}}).exports,i),i.exports);var mm=(p,i)=>{for(var x in i)tp(p,x,{get:i[x],enumerable:!0,configurable:!0,set:(v)=>i[x]=()=>v})};var Y=fm(import.meta.url);var hi=A((Fz,Zi)=>{var Pi=Y("url");class oi{constructor(p){this.options=p||{},this.cookies=[]}set(p,i){let x=Pi.parse(i||""),v=this.parse(p),m;if(v.domain){if(m=v.domain.replace(/^\./,""),x.hostname.length<m.length||("."+x.hostname).substr(-m.length+1)!=="."+m)v.domain=x.hostname}else v.domain=x.hostname;if(!v.path)v.path=this.getPath(x.pathname);if(!v.expires)v.expires=new Date(Date.now()+(Number(this.options.sessionTimeout||1800)||1800)*1000);return this.add(v)}get(p){return this.list(p).map((i)=>i.name+"="+i.value).join("; ")}list(p){let i=[],x,v;for(x=this.cookies.length-1;x>=0;x--){if(v=this.cookies[x],this.isExpired(v)){this.cookies.splice(x,x);continue}if(this.match(v,p))i.unshift(v)}return i}parse(p){let i={};return(p||"").toString().split(";").forEach((x)=>{let v=x.split("="),m=v.shift().trim().toLowerCase(),f=v.join("=").trim(),w;if(!m)return;switch(m){case"expires":if(f=new Date(f),f.toString()!=="Invalid Date")i.expires=f;break;case"path":i.path=f;break;case"domain":if(w=f.toLowerCase(),w.length&&w.charAt(0)!==".")w="."+w;i.domain=w;break;case"max-age":i.expires=new Date(Date.now()+(Number(f)||0)*1000);break;case"secure":i.secure=!0;break;case"httponly":i.httponly=!0;break;default:if(!i.name)i.name=m,i.value=f}}),i}match(p,i){let x=Pi.parse(i||"");if(x.hostname!==p.domain&&(p.domain.charAt(0)!=="."||("."+x.hostname).substr(-p.domain.length)!==p.domain))return!1;if(this.getPath(x.pathname).substr(0,p.path.length)!==p.path)return!1;if(p.secure&&x.protocol!=="https:")return!1;return!0}add(p){let i,x;if(!p||!p.name)return!1;for(i=0,x=this.cookies.length;i<x;i++)if(this.compare(this.cookies[i],p)){if(this.isExpired(p))return this.cookies.splice(i,1),!1;return this.cookies[i]=p,!0}if(!this.isExpired(p))this.cookies.push(p);return!0}compare(p,i){return p.name===i.name&&p.path===i.path&&p.domain===i.domain&&p.secure===i.secure&&p.httponly===p.httponly}isExpired(p){return p.expires&&p.expires<new Date||!p.value}getPath(p){let i=(p||"/").split("/");if(i.pop(),i=i.join("/").trim(),i.charAt(0)!=="/")i="/"+i;if(i.substr(-1)!=="/")i+="/";return i}}Zi.exports=oi});var I=A((Dz,af)=>{af.exports={name:"nodemailer",version:"7.0.3",description:"Easy as cake e-mail sending from your Node.js applications",main:"lib/nodemailer.js",scripts:{test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",lint:"eslint .",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},repository:{type:"git",url:"https://github.com/nodemailer/nodemailer.git"},keywords:["Nodemailer"],author:"Andris Reinman",license:"MIT-0",bugs:{url:"https://github.com/nodemailer/nodemailer/issues"},homepage:"https://nodemailer.com/",devDependencies:{"@aws-sdk/client-sesv2":"3.804.0",bunyan:"1.8.15",c8:"10.1.3",eslint:"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0",libbase64:"1.3.0",libmime:"5.3.6",libqp:"2.1.1","nodemailer-ntlm-auth":"1.0.4",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},engines:{node:">=6.0.0"}}});var Dp=A((Lz,ii)=>{var Mf=Y("http"),Vf=Y("https"),ni=Y("url"),Uf=Y("zlib"),Af=Y("stream").PassThrough,di=hi(),cf=I(),Rf=Y("net");ii.exports=function(p,i){return yi(p,i)};ii.exports.Cookies=di;function yi(p,i){if(i=i||{},i.fetchRes=i.fetchRes||new Af,i.cookies=i.cookies||new di,i.redirects=i.redirects||0,i.maxRedirects=isNaN(i.maxRedirects)?5:i.maxRedirects,i.cookie)[].concat(i.cookie||[]).forEach((g)=>{i.cookies.set(g,p)}),i.cookie=!1;let x=i.fetchRes,v=ni.parse(p),m=(i.method||"").toString().trim().toUpperCase()||"GET",f=!1,w,l,z=v.protocol==="https:"?Vf:Mf,j={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+cf.version};if(Object.keys(i.headers||{}).forEach((g)=>{j[g.toLowerCase().trim()]=i.headers[g]}),i.userAgent)j["user-agent"]=i.userAgent;if(v.auth)j.Authorization="Basic "+Buffer.from(v.auth).toString("base64");if(w=i.cookies.get(p))j.cookie=w;if(i.body){if(i.contentType!==!1)j["Content-Type"]=i.contentType||"application/x-www-form-urlencoded";if(typeof i.body.pipe==="function")j["Transfer-Encoding"]="chunked",l=i.body,l.on("error",(g)=>{if(f)return;f=!0,g.type="FETCH",g.sourceUrl=p,x.emit("error",g)});else{if(i.body instanceof Buffer)l=i.body;else if(typeof i.body==="object")try{l=Buffer.from(Object.keys(i.body).map((g)=>{let X=i.body[g].toString().trim();return encodeURIComponent(g)+"="+encodeURIComponent(X)}).join("&"))}catch(g){if(f)return;f=!0,g.type="FETCH",g.sourceUrl=p,x.emit("error",g);return}else l=Buffer.from(i.body.toString().trim());j["Content-Type"]=i.contentType||"application/x-www-form-urlencoded",j["Content-Length"]=l.length}m=(i.method||"").toString().trim().toUpperCase()||"POST"}let q,$={method:m,host:v.hostname,path:v.path,port:v.port?v.port:v.protocol==="https:"?443:80,headers:j,rejectUnauthorized:!1,agent:!1};if(i.tls)Object.keys(i.tls).forEach((g)=>{$[g]=i.tls[g]});if(v.protocol==="https:"&&v.hostname&&v.hostname!==$.host&&!Rf.isIP(v.hostname)&&!$.servername)$.servername=v.hostname;try{q=z.request($)}catch(g){return f=!0,setImmediate(()=>{g.type="FETCH",g.sourceUrl=p,x.emit("error",g)}),x}if(i.timeout)q.setTimeout(i.timeout,()=>{if(f)return;f=!0,q.abort();let g=new Error("Request Timeout");g.type="FETCH",g.sourceUrl=p,x.emit("error",g)});return q.on("error",(g)=>{if(f)return;f=!0,g.type="FETCH",g.sourceUrl=p,x.emit("error",g)}),q.on("response",(g)=>{let X;if(f)return;switch(g.headers["content-encoding"]){case"gzip":case"deflate":X=Uf.createUnzip();break}if(g.headers["set-cookie"])[].concat(g.headers["set-cookie"]||[]).forEach((a)=>{i.cookies.set(a,p)});if([301,302,303,307,308].includes(g.statusCode)&&g.headers.location){if(i.redirects++,i.redirects>i.maxRedirects){f=!0;let a=new Error("Maximum redirect count exceeded");a.type="FETCH",a.sourceUrl=p,x.emit("error",a),q.abort();return}return i.method="GET",i.body=!1,yi(ni.resolve(p,g.headers.location),i)}if(x.statusCode=g.statusCode,x.headers=g.headers,g.statusCode>=300&&!i.allowErrorResponse){f=!0;let a=new Error("Invalid status code "+g.statusCode);a.type="FETCH",a.sourceUrl=p,x.emit("error",a),q.abort();return}if(g.on("error",(a)=>{if(f)return;f=!0,a.type="FETCH",a.sourceUrl=p,x.emit("error",a),q.abort()}),X)g.pipe(X).pipe(x),X.on("error",(a)=>{if(f)return;f=!0,a.type="FETCH",a.sourceUrl=p,x.emit("error",a),q.abort()});else g.pipe(x)}),setImmediate(()=>{if(l)try{if(typeof l.pipe==="function")return l.pipe(q);else q.write(l)}catch(g){f=!0,g.type="FETCH",g.sourceUrl=p,x.emit("error",g);return}q.end()}),x}});var D=A((Cf,F)=>{var bf=Y("url"),Sf=Y("util"),Ff=Y("fs"),Df=Dp(),n=Y("dns"),Lf=Y("net"),Of=Y("os"),ui;try{ui=Of.networkInterfaces()}catch(p){}Cf.networkInterfaces=ui;var ti=(p,i)=>{let x=Cf.networkInterfaces;if(!x)return!0;return Object.keys(x).map((m)=>x[m]).reduce((m,f)=>m.concat(f),[]).filter((m)=>!m.internal||i).filter((m)=>m.family==="IPv"+p||m.family===p).length>0},ki=(p,i,x,v)=>{if(x=x||{},!ti(p,x.allowInternalNetworkInterfaces))return v(null,[]);(n.Resolver?new n.Resolver(x):n)["resolve"+p](i,(w,l)=>{if(w){switch(w.code){case n.NODATA:case n.NOTFOUND:case n.NOTIMP:case n.SERVFAIL:case n.CONNREFUSED:case n.REFUSED:case"EAI_AGAIN":return v(null,[])}return v(w)}return v(null,Array.isArray(l)?l:[].concat(l||[]))})},Lp=Cf.dnsCache=new Map,h=(p,i)=>{if(!p)return Object.assign({},i||{});return Object.assign({servername:p.servername,host:!p.addresses||!p.addresses.length?null:p.addresses.length===1?p.addresses[0]:p.addresses[Math.floor(Math.random()*p.addresses.length)]},i||{})};Cf.resolveHostname=(p,i)=>{if(p=p||{},!p.host&&p.servername)p.host=p.servername;if(!p.host||Lf.isIP(p.host)){let v={addresses:[p.host],servername:p.servername||!1};return i(null,h(v,{cached:!1}))}let x;if(Lp.has(p.host)){if(x=Lp.get(p.host),!x.expires||x.expires>=Date.now())return i(null,h(x.value,{cached:!0}))}ki(4,p.host,p,(v,m)=>{if(v){if(x)return i(null,h(x.value,{cached:!0,error:v}));return i(v)}if(m&&m.length){let f={addresses:m,servername:p.servername||p.host};return Lp.set(p.host,{value:f,expires:Date.now()+(p.dnsTtl||300000)}),i(null,h(f,{cached:!1}))}ki(6,p.host,p,(f,w)=>{if(f){if(x)return i(null,h(x.value,{cached:!0,error:f}));return i(f)}if(w&&w.length){let l={addresses:w,servername:p.servername||p.host};return Lp.set(p.host,{value:l,expires:Date.now()+(p.dnsTtl||300000)}),i(null,h(l,{cached:!1}))}try{n.lookup(p.host,{all:!0},(l,z)=>{if(l){if(x)return i(null,h(x.value,{cached:!0,error:l}));return i(l)}let j=z?z.filter(($)=>ti($.family)).map(($)=>$.address).shift():!1;if(z&&z.length&&!j)console.warn(`Failed to resolve IPv${z[0].family} addresses with current network`);if(!j&&x)return i(null,h(x.value,{cached:!0}));let q={addresses:j?[j]:[p.host],servername:p.servername||p.host};return Lp.set(p.host,{value:q,expires:Date.now()+(p.dnsTtl||300000)}),i(null,h(q,{cached:!1}))})}catch(l){if(x)return i(null,h(x.value,{cached:!0,error:l}));return i(l)}})})};Cf.parseConnectionUrl=(p)=>{p=p||"";let i={};return[bf.parse(p,!0)].forEach((x)=>{let v;switch(x.protocol){case"smtp:":i.secure=!1;break;case"smtps:":i.secure=!0;break;case"direct:":i.direct=!0;break}if(!isNaN(x.port)&&Number(x.port))i.port=Number(x.port);if(x.hostname)i.host=x.hostname;if(x.auth){if(v=x.auth.split(":"),!i.auth)i.auth={};i.auth.user=v.shift(),i.auth.pass=v.join(":")}Object.keys(x.query||{}).forEach((m)=>{let f=i,w=m,l=x.query[m];if(!isNaN(l))l=Number(l);switch(l){case"true":l=!0;break;case"false":l=!1;break}if(m.indexOf("tls.")===0){if(w=m.substr(4),!i.tls)i.tls={};f=i.tls}else if(m.indexOf(".")>=0)return;if(!(w in f))f[w]=l})}),i};Cf._logFunc=(p,i,x,v,m,...f)=>{let w={};Object.keys(x||{}).forEach((l)=>{if(l!=="level")w[l]=x[l]}),Object.keys(v||{}).forEach((l)=>{if(l!=="level")w[l]=v[l]}),p[i](w,m,...f)};Cf.getLogger=(p,i)=>{p=p||{};let x={},v=["trace","debug","info","warn","error","fatal"];if(!p.logger)return v.forEach((f)=>{x[f]=()=>!1}),x;let m=p.logger;if(p.logger===!0)m=Kf(v);return v.forEach((f)=>{x[f]=(w,l,...z)=>{Cf._logFunc(m,f,i,w,l,...z)}}),x};Cf.callbackPromise=(p,i)=>function(){let x=Array.from(arguments),v=x.shift();if(v)i(v);else p(...x)};Cf.parseDataURI=(p)=>{let i=p,x=i.indexOf(",");if(!x)return p;let v=i.substring(x+1),m=i.substring(5,x),f,w=m.split(";"),l=w.length>1?w[w.length-1]:!1;if(l&&l.indexOf("=")<0)f=l.toLowerCase(),w.pop();let z=w.shift()||"application/octet-stream",j={};for(let q of w){let $=q.indexOf("=");if($>=0){let g=q.substring(0,$),X=q.substring($+1);j[g]=X}}switch(f){case"base64":v=Buffer.from(v,"base64");break;case"utf8":v=Buffer.from(v);break;default:try{v=Buffer.from(decodeURIComponent(v))}catch(q){v=Buffer.from(v)}v=Buffer.from(v)}return{data:v,encoding:f,contentType:z,params:j}};Cf.resolveContent=(p,i,x)=>{let v;if(!x)v=new Promise((l,z)=>{x=Cf.callbackPromise(l,z)});let m=p&&p[i]&&p[i].content||p[i],f,w=(typeof p[i]==="object"&&p[i].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!m)return x(null,m);if(typeof m==="object"){if(typeof m.pipe==="function")return xi(m,(l,z)=>{if(l)return x(l);if(p[i].content)p[i].content=z;else p[i]=z;x(null,z)});else if(/^https?:\/\//i.test(m.path||m.href))return f=Df(m.path||m.href),xi(f,x);else if(/^data:/i.test(m.path||m.href)){let l=Cf.parseDataURI(m.path||m.href);if(!l||!l.data)return x(null,Buffer.from(0));return x(null,l.data)}else if(m.path)return xi(Ff.createReadStream(m.path),x)}if(typeof p[i].content==="string"&&!["utf8","usascii","ascii"].includes(w))m=Buffer.from(p[i].content,w);return setImmediate(()=>x(null,m)),v};Cf.assign=function(){let p=Array.from(arguments),i=p.shift()||{};return p.forEach((x)=>{Object.keys(x||{}).forEach((v)=>{if(["tls","auth"].includes(v)&&x[v]&&typeof x[v]==="object"){if(!i[v])i[v]={};Object.keys(x[v]).forEach((m)=>{i[v][m]=x[v][m]})}else i[v]=x[v]})}),i};Cf.encodeXText=(p)=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(p))return p;let i=Buffer.from(p),x="";for(let v=0,m=i.length;v<m;v++){let f=i[v];if(f<33||f>126||f===43||f===61)x+="+"+(f<16?"0":"")+f.toString(16).toUpperCase();else x+=String.fromCharCode(f)}return x};function xi(p,i){let x=!1,v=[],m=0;p.on("error",(f)=>{if(x)return;x=!0,i(f)}),p.on("readable",()=>{let f;while((f=p.read())!==null)v.push(f),m+=f.length}),p.on("end",()=>{if(x)return;x=!0;let f;try{f=Buffer.concat(v,m)}catch(w){return i(w)}i(null,f)})}function Kf(p){let i=0,x=new Map;p.forEach((f)=>{if(f.length>i)i=f.length}),p.forEach((f)=>{let w=f.toUpperCase();if(w.length<i)w+=" ".repeat(i-w.length);x.set(f,w)});let v=(f,w,l,...z)=>{let j="";if(w){if(w.tnx==="server")j="S: ";else if(w.tnx==="client")j="C: ";if(w.sid)j="["+w.sid+"] "+j;if(w.cid)j="[#"+w.cid+"] "+j}l=Sf.format(l,...z),l.split(/\r?\n/).forEach((q)=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),x.get(f),j+q)})},m={};return p.forEach((f)=>{m[f]=v.bind(null,f)}),m}});var vi=A((Kz,vx)=>{var Zf=Y("path"),ix=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),xx=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);vx.exports={detectMimeType(p){if(!p)return"application/octet-stream";let i=Zf.parse(p),x=(i.ext.substr(1)||i.name||"").split("?").shift().trim().toLowerCase(),v="application/octet-stream";if(xx.has(x))v=xx.get(x);if(Array.isArray(v))return v[0];return v},detectExtension(p){if(!p)return"bin";let i=(p||"").toLowerCase().trim().split("/"),x=i.shift().trim(),v=i.join("/").trim();if(ix.has(x+"/"+v)){let m=ix.get(x+"/"+v);if(Array.isArray(m))return m[0];return m}switch(x){case"text":return"txt";default:return"bin"}}}});var fi=A((Cz,qx)=>{var hf=/^xn--/,nf=/[^\0-\x7F]/,df=/[\x2E\u3002\uFF0E\uFF61]/g,yf={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,mi=String.fromCharCode;function xp(p){throw new RangeError(yf[p])}function kf(p,i){let x=[],v=p.length;while(v--)x[v]=i(p[v]);return x}function fx(p,i){let x=p.split("@"),v="";if(x.length>1)v=x[0]+"@",p=x[1];p=p.replace(df,".");let m=p.split("."),f=kf(m,i).join(".");return v+f}function wx(p){let i=[],x=0,v=p.length;while(x<v){let m=p.charCodeAt(x++);if(m>=55296&&m<=56319&&x<v){let f=p.charCodeAt(x++);if((f&64512)==56320)i.push(((m&1023)<<10)+(f&1023)+65536);else i.push(m),x--}else i.push(m)}return i}var uf=(p)=>String.fromCodePoint(...p),tf=function(p){if(p>=48&&p<58)return 26+(p-48);if(p>=65&&p<91)return p-65;if(p>=97&&p<123)return p-97;return 36},mx=function(p,i){return p+22+75*(p<26)-((i!=0)<<5)},lx=function(p,i,x){let v=0;p=x?d(p/700):p>>1,p+=d(p/i);for(;p>455;v+=36)p=d(p/35);return d(v+36*p/(p+38))},zx=function(p){let i=[],x=p.length,v=0,m=128,f=72,w=p.lastIndexOf("-");if(w<0)w=0;for(let l=0;l<w;++l){if(p.charCodeAt(l)>=128)xp("not-basic");i.push(p.charCodeAt(l))}for(let l=w>0?w+1:0;l<x;){let z=v;for(let q=1,$=36;;$+=36){if(l>=x)xp("invalid-input");let g=tf(p.charCodeAt(l++));if(g>=36)xp("invalid-input");if(g>d((2147483647-v)/q))xp("overflow");v+=g*q;let X=$<=f?1:$>=f+26?26:$-f;if(g<X)break;let a=36-X;if(q>d(2147483647/a))xp("overflow");q*=a}let j=i.length+1;if(f=lx(v-z,j,z==0),d(v/j)>2147483647-m)xp("overflow");m+=d(v/j),v%=j,i.splice(v++,0,m)}return String.fromCodePoint(...i)},jx=function(p){let i=[];p=wx(p);let x=p.length,v=128,m=0,f=72;for(let z of p)if(z<128)i.push(mi(z));let w=i.length,l=w;if(w)i.push("-");while(l<x){let z=2147483647;for(let q of p)if(q>=v&&q<z)z=q;let j=l+1;if(z-v>d((2147483647-m)/j))xp("overflow");m+=(z-v)*j,v=z;for(let q of p){if(q<v&&++m>2147483647)xp("overflow");if(q===v){let $=m;for(let g=36;;g+=36){let X=g<=f?1:g>=f+26?26:g-f;if($<X)break;let a=$-X,c=36-X;i.push(mi(mx(X+a%c,0))),$=d(a/c)}i.push(mi(mx($,0))),f=lx(m,j,l===w),m=0,++l}}++m,++v}return i.join("")},sf=function(p){return fx(p,function(i){return hf.test(i)?zx(i.slice(4).toLowerCase()):i})},rf=function(p){return fx(p,function(i){return nf.test(i)?"xn--"+jx(i):i})},ef={version:"2.3.1",ucs2:{decode:wx,encode:uf},decode:zx,encode:jx,toASCII:rf,toUnicode:sf};qx.exports=ef});var zi=A((Nz,$x)=>{var pw=Y("stream").Transform;function wi(p){if(typeof p==="string")p=Buffer.from(p,"utf-8");return p.toString("base64")}function li(p,i){if(p=(p||"").toString(),i=i||76,p.length<=i)return p;let x=[],v=0,m=i*1024;while(v<p.length){let f=p.substr(v,m).replace(new RegExp(".{"+i+"}","g"),`$&\r
`).trim();x.push(f),v+=m}return x.join(`\r
`).trim()}class gx extends pw{constructor(p){super();if(this.options=p||{},this.options.lineLength!==!1)this.options.lineLength=this.options.lineLength||76;this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(p,i,x){if(i!=="buffer")p=Buffer.from(p,i);if(!p||!p.length)return setImmediate(x);if(this.inputBytes+=p.length,this._remainingBytes&&this._remainingBytes.length)p=Buffer.concat([this._remainingBytes,p],this._remainingBytes.length+p.length),this._remainingBytes=!1;if(p.length%3)this._remainingBytes=p.slice(p.length-p.length%3),p=p.slice(0,p.length-p.length%3);else this._remainingBytes=!1;let v=this._curLine+wi(p);if(this.options.lineLength){v=li(v,this.options.lineLength);let m=v.lastIndexOf(`
`);if(m<0)this._curLine=v,v="";else if(m===v.length-1)this._curLine="";else this._curLine=v.substr(m+1),v=v.substr(0,m+1)}if(v)this.outputBytes+=v.length,this.push(Buffer.from(v,"ascii"));setImmediate(x)}_flush(p){if(this._remainingBytes&&this._remainingBytes.length)this._curLine+=wi(this._remainingBytes);if(this._curLine)this._curLine=li(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine="";p()}}$x.exports={encode:wi,wrap:li,Encoder:gx}});var qi=A((Ez,Qx)=>{var iw=Y("stream").Transform;function ji(p){if(typeof p==="string")p=Buffer.from(p,"utf-8");let i=[[9],[10],[13],[32,60],[62,126]],x="",v;for(let m=0,f=p.length;m<f;m++){if(v=p[m],xw(v,i)&&!((v===32||v===9)&&(m===f-1||p[m+1]===10||p[m+1]===13))){x+=String.fromCharCode(v);continue}x+="="+(v<16?"0":"")+v.toString(16).toUpperCase()}return x}function _x(p,i){if(p=(p||"").toString(),i=i||76,p.length<=i)return p;let x=0,v=p.length,m,f,w,l=Math.floor(i/3),z="";while(x<v){if(w=p.substr(x,i),m=w.match(/\r\n/)){w=w.substr(0,m.index+m[0].length),z+=w,x+=w.length;continue}if(w.substr(-1)===`
`){z+=w,x+=w.length;continue}else if(m=w.substr(-l).match(/\n.*?$/)){w=w.substr(0,w.length-(m[0].length-1)),z+=w,x+=w.length;continue}else if(w.length>i-l&&(m=w.substr(-l).match(/[ \t.,!?][^ \t.,!?]*$/)))w=w.substr(0,w.length-(m[0].length-1));else if(w.match(/[=][\da-f]{0,2}$/i)){if(m=w.match(/[=][\da-f]{0,1}$/i))w=w.substr(0,w.length-m[0].length);while(w.length>3&&w.length<v-x&&!w.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(m=w.match(/[=][\da-f]{2}$/gi))){if(f=parseInt(m[0].substr(1,2),16),f<128)break;if(w=w.substr(0,w.length-3),f>=192)break}}if(x+w.length<v&&w.substr(-1)!==`
`){if(w.length===i&&w.match(/[=][\da-f]{2}$/i))w=w.substr(0,w.length-3);else if(w.length===i)w=w.substr(0,w.length-1);x+=w.length,w+=`=\r
`}else x+=w.length;z+=w}return z}function xw(p,i){for(let x=i.length-1;x>=0;x--){if(!i[x].length)continue;if(i[x].length===1&&p===i[x][0])return!0;if(i[x].length===2&&p>=i[x][0]&&p<=i[x][1])return!0}return!1}class Gx extends iw{constructor(p){super();if(this.options=p||{},this.options.lineLength!==!1)this.options.lineLength=this.options.lineLength||76;this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(p,i,x){let v;if(i!=="buffer")p=Buffer.from(p,i);if(!p||!p.length)return x();if(this.inputBytes+=p.length,this.options.lineLength){if(v=this._curLine+ji(p),v=_x(v,this.options.lineLength),v=v.replace(/(^|\n)([^\n]*)$/,(m,f,w)=>{return this._curLine=w,f}),v)this.outputBytes+=v.length,this.push(v)}else v=ji(p),this.outputBytes+=v.length,this.push(v,"ascii");x()}_flush(p){if(this._curLine)this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii");p()}}Qx.exports={encode:ji,wrap:_x,Encoder:Gx}});var Kp=A((Iz,Xx)=>{var Op=zi(),vw=qi(),Jx=vi();Xx.exports={isPlainText(p,i){if(typeof p!=="string"||(i?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(p))return!1;else return!0},hasLongerLines(p,i){if(p.length>131072)return!0;return new RegExp("^.{"+(i+1)+",}","m").test(p)},encodeWord(p,i,x){i=(i||"Q").toString().toUpperCase().trim().charAt(0),x=x||0;let v,m="UTF-8";if(x&&x>7+m.length)x-=7+m.length;if(i==="Q")v=vw.encode(p).replace(/[^a-z0-9!*+\-/=]/gi,(f)=>{let w=f.charCodeAt(0).toString(16).toUpperCase();if(f===" ")return"_";else return"="+(w.length===1?"0"+w:w)});else if(i==="B")v=typeof p==="string"?p:Op.encode(p),x=x?Math.max(3,(x-x%4)/4*3):0;if(x&&(i!=="B"?v:Op.encode(p)).length>x)if(i==="Q")v=this.splitMimeEncodedString(v,x).join("?= =?"+m+"?"+i+"?");else{let f=[],w="";for(let l=0,z=v.length;l<z;l++){let j=v.charAt(l);if(/[\ud83c\ud83d\ud83e]/.test(j)&&l<z-1)j+=v.charAt(++l);if(Buffer.byteLength(w+j)<=x||l===0)w+=j;else f.push(Op.encode(w)),w=j}if(w)f.push(Op.encode(w));if(f.length>1)v=f.join("?= =?"+m+"?"+i+"?");else v=f.join("")}else if(i==="B")v=Op.encode(p);return"=?"+m+"?"+i+"?"+v+(v.substr(-2)==="?="?"":"?=")},encodeWords(p,i,x,v){x=x||0;let m,f=p.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!f)return p;if(v)return this.encodeWord(p,i,x);let w=p.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!w)return p;let l=f.index+(f[0].match(/[^\s]/)||{index:0}).index,z=w.index+(w[1]||"").length;return m=(l?p.substr(0,l):"")+this.encodeWord(p.substring(l,z),i||"Q",x)+(z<p.length?p.substr(z):""),m},buildHeaderValue(p){let i=[];return Object.keys(p.params||{}).forEach((x)=>{let v=p.params[x];if(!this.isPlainText(v,!0)||v.length>=75)this.buildHeaderParam(x,v,50).forEach((m)=>{if(!/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(m.value)||m.key.substr(-1)==="*")i.push(m.key+"="+m.value);else i.push(m.key+"="+JSON.stringify(m.value))});else if(/[\s'"\\;:/=(),<>@[\]?]|^-/.test(v))i.push(x+"="+JSON.stringify(v));else i.push(x+"="+v)}),p.value+(i.length?"; "+i.join("; "):"")},buildHeaderParam(p,i,x){let v=[],m=typeof i==="string"?i:(i||"").toString(),f,w,l,z,j=0,q,$;if(x=x||50,this.isPlainText(i,!0)){if(m.length<=x)return[{key:p,value:m}];if(m=m.replace(new RegExp(".{"+x+"}","g"),(g)=>{return v.push({line:g}),""}),m)v.push({line:m})}else{if(/[\uD800-\uDBFF]/.test(m)){f=[];for(q=0,$=m.length;q<$;q++)if(w=m.charAt(q),l=w.charCodeAt(0),l>=55296&&l<=56319&&q<$-1)w+=m.charAt(q+1),f.push(w),q++;else f.push(w);m=f}z="utf-8''";let g=!0;j=0;for(q=0,$=m.length;q<$;q++){if(w=m[q],g)w=this.safeEncodeURIComponent(w);else if(w=w===" "?w:this.safeEncodeURIComponent(w),w!==m[q])if((this.safeEncodeURIComponent(z)+w).length>=x)v.push({line:z,encoded:g}),z="",j=q-1;else{g=!0,q=j,z="";continue}if((z+w).length>=x)if(v.push({line:z,encoded:g}),z=w=m[q]===" "?" ":this.safeEncodeURIComponent(m[q]),w===m[q])g=!1,j=q-1;else g=!0;else z+=w}if(z)v.push({line:z,encoded:g})}return v.map((g,X)=>({key:p+"*"+X+(g.encoded?"*":""),value:g.line}))},parseHeaderValue(p){let i={value:!1,params:{}},x=!1,v="",m="value",f=!1,w=!1,l;for(let z=0,j=p.length;z<j;z++)if(l=p.charAt(z),m==="key"){if(l==="="){x=v.trim().toLowerCase(),m="value",v="";continue}v+=l}else{if(w)v+=l;else if(l==="\\"){w=!0;continue}else if(f&&l===f)f=!1;else if(!f&&l==='"')f=l;else if(!f&&l===";"){if(x===!1)i.value=v.trim();else i.params[x]=v.trim();m="key",v=""}else v+=l;w=!1}if(m==="value")if(x===!1)i.value=v.trim();else i.params[x]=v.trim();else if(v.trim())i.params[v.trim().toLowerCase()]="";return Object.keys(i.params).forEach((z)=>{let j,q,$,g;if($=z.match(/(\*(\d+)|\*(\d+)\*|\*)$/)){if(j=z.substr(0,$.index),q=Number($[2]||$[3])||0,!i.params[j]||typeof i.params[j]!=="object")i.params[j]={charset:!1,values:[]};if(g=i.params[z],q===0&&$[0].substr(-1)==="*"&&($=g.match(/^([^']*)'[^']*'(.*)$/)))i.params[j].charset=$[1]||"iso-8859-1",g=$[2];i.params[j].values[q]=g,delete i.params[z]}}),Object.keys(i.params).forEach((z)=>{let j;if(i.params[z]&&Array.isArray(i.params[z].values))if(j=i.params[z].values.map((q)=>q||"").join(""),i.params[z].charset)i.params[z]="=?"+i.params[z].charset+"?Q?"+j.replace(/[=?_\s]/g,(q)=>{let $=q.charCodeAt(0).toString(16);if(q===" ")return"_";else return"%"+($.length<2?"0":"")+$}).replace(/%/g,"=")+"?=";else i.params[z]=j}),i},detectExtension:(p)=>Jx.detectExtension(p),detectMimeType:(p)=>Jx.detectMimeType(p),foldLines(p,i,x){p=(p||"").toString(),i=i||76;let v=0,m=p.length,f="",w,l;while(v<m){if(w=p.substr(v,i),w.length<i){f+=w;break}if(l=w.match(/^[^\n\r]*(\r?\n|\r)/)){w=l[0],f+=w,v+=w.length;continue}else if((l=w.match(/(\s+)[^\s]*$/))&&l[0].length-(x?(l[1]||"").length:0)<w.length)w=w.substr(0,w.length-(l[0].length-(x?(l[1]||"").length:0)));else if(l=p.substr(v+w.length).match(/^[^\s]+(\s*)/))w=w+l[0].substr(0,l[0].length-(!x?(l[1]||"").length:0));if(f+=w,v+=w.length,v<m)f+=`\r
`}return f},splitMimeEncodedString:(p,i)=>{let x,v,m,f,w=[];i=Math.max(i||0,12);while(p.length){if(x=p.substr(0,i),v=x.match(/[=][0-9A-F]?$/i))x=x.substr(0,v.index);f=!1;while(!f)if(f=!0,v=p.substr(x.length).match(/^[=]([0-9A-F]{2})/i)){if(m=parseInt(v[1],16),m<194&&m>127)x=x.substr(0,x.length-3),f=!1}if(x.length)w.push(x);p=p.substr(x.length)}return w},encodeURICharComponent:(p)=>{let i="",x=p.charCodeAt(0).toString(16).toUpperCase();if(x.length%2)x="0"+x;if(x.length>2)for(let v=0,m=x.length/2;v<m;v++)i+="%"+x.substr(v,2);else i+="%"+x;return i},safeEncodeURIComponent(p){p=(p||"").toString();try{p=encodeURIComponent(p)}catch(i){return p.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return p.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,(i)=>this.encodeURICharComponent(i))}}});var Hx=A((Tz,Wx)=>{function mw(p){let i=!1,x="text",v,m=[],f={address:[],comment:[],group:[],text:[]},w,l;for(w=0,l=p.length;w<l;w++){let z=p[w],j=w?p[w-1]:null;if(z.type==="operator")switch(z.value){case"<":x="address";break;case"(":x="comment";break;case":":x="group",i=!0;break;default:x="text";break}else if(z.value){if(x==="address")z.value=z.value.replace(/^[^<]*<\s*/,"");if(j&&j.noBreak&&f[x].length)f[x][f[x].length-1]+=z.value;else f[x].push(z.value)}}if(!f.text.length&&f.comment.length)f.text=f.comment,f.comment=[];if(i)f.text=f.text.join(" "),m.push({name:f.text||v&&v.name,group:f.group.length?Bx(f.group.join(",")):[]});else{if(!f.address.length&&f.text.length){for(w=f.text.length-1;w>=0;w--)if(f.text[w].match(/^[^@\s]+@[^@\s]+$/)){f.address=f.text.splice(w,1);break}let z=function(j){if(!f.address.length)return f.address=[j.trim()]," ";else return j};if(!f.address.length){for(w=f.text.length-1;w>=0;w--)if(f.text[w]=f.text[w].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,z).trim(),f.address.length)break}}if(!f.text.length&&f.comment.length)f.text=f.comment,f.comment=[];if(f.address.length>1)f.text=f.text.concat(f.address.splice(1));if(f.text=f.text.join(" "),f.address=f.address.join(" "),!f.address&&i)return[];else{if(v={address:f.address||f.text||"",name:f.text||f.address||""},v.address===v.name)if((v.address||"").match(/@/))v.name="";else v.address="";m.push(v)}}return m}class Yx{constructor(p){this.str=(p||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let p=[];for(let i=0,x=this.str.length;i<x;i++){let v=this.str.charAt(i),m=i<x-1?this.str.charAt(i+1):null;this.checkChar(v,m)}return this.list.forEach((i)=>{if(i.value=(i.value||"").toString().trim(),i.value)p.push(i)}),p}checkChar(p,i){if(this.escaped);else if(p===this.operatorExpecting){if(this.node={type:"operator",value:p},i&&![" ","\t","\r",`
`,",",";"].includes(i))this.node.noBreak=!0;this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&p in this.operators){this.node={type:"operator",value:p},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[p],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&p==="\\"){this.escaped=!0;return}if(!this.node)this.node={type:"text",value:""},this.list.push(this.node);if(p===`
`)p=" ";if(p.charCodeAt(0)>=33||[" ","\t"].includes(p))this.node.value+=p;this.escaped=!1}}function Bx(p,i){i=i||{};let v=new Yx(p).tokenize(),m=[],f=[],w=[];if(v.forEach((l)=>{if(l.type==="operator"&&(l.value===","||l.value===";")){if(f.length)m.push(f);f=[]}else f.push(l)}),f.length)m.push(f);if(m.forEach((l)=>{if(l=mw(l),l.length)w=w.concat(l)}),i.flatten){let l=[],z=(j)=>{j.forEach((q)=>{if(q.group)return z(q.group);else l.push(q)})};return z(w),l}return w}Wx.exports=Bx});var Vx=A((Pz,Mx)=>{var fw=Y("stream").Transform;class ax extends fw{constructor(){super();this.lastByte=!1}_transform(p,i,x){if(p.length)this.lastByte=p[p.length-1];this.push(p),x()}_flush(p){if(this.lastByte===10)return p();if(this.lastByte===13)return this.push(Buffer.from(`
`)),p();return this.push(Buffer.from(`\r
`)),p()}}Mx.exports=ax});var gi=A((oz,Ax)=>{var ww=Y("stream"),lw=ww.Transform;class Ux extends lw{constructor(p){super(p);this.options=p||{},this.lastByte=!1}_transform(p,i,x){let v,m=0;for(let f=0,w=p.length;f<w;f++)if(p[f]===10){if(f&&p[f-1]!==13||!f&&this.lastByte!==13){if(f>m)v=p.slice(m,f),this.push(v);this.push(Buffer.from(`\r
`)),m=f+1}}if(m&&m<p.length)v=p.slice(m),this.push(v);else if(!m)this.push(p);this.lastByte=p[p.length-1],x()}}Ax.exports=Ux});var bx=A((Zz,Rx)=>{var zw=Y("stream"),jw=zw.Transform;class cx extends jw{constructor(p){super(p);this.options=p||{}}_transform(p,i,x){let v,m=0;for(let f=0,w=p.length;f<w;f++)if(p[f]===13)v=p.slice(m,f),m=f+1,this.push(v);if(m&&m<p.length)v=p.slice(m),this.push(v);else if(!m)this.push(p);x()}}Rx.exports=cx});var hp=A((hz,Sx)=>{var $i=Y("crypto"),qw=Y("fs"),gw=fi(),Cp=Y("stream").PassThrough,$w=D(),T=Kp(),_w=qi(),Gw=zi(),Qw=Hx(),Jw=Dp(),Xw=Vx(),Yw=gi(),Bw=bx();class _i{constructor(p,i){if(this.nodeCounter=0,i=i||{},this.baseBoundary=i.baseBoundary||$i.randomBytes(8).toString("hex"),this.boundaryPrefix=i.boundaryPrefix||"--_NmP",this.disableFileAccess=!!i.disableFileAccess,this.disableUrlAccess=!!i.disableUrlAccess,this.normalizeHeaderKey=i.normalizeHeaderKey,this.date=new Date,this.rootNode=i.rootNode||this,this.keepBcc=!!i.keepBcc,i.filename){if(this.filename=i.filename,!p)p=T.detectMimeType(this.filename.split(".").pop())}if(this.textEncoding=(i.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=i.parentNode,this.hostname=i.hostname,this.newline=i.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],p)this.setHeader("Content-Type",p)}createChild(p,i){if(!i&&typeof p==="object")i=p,p=void 0;let x=new _i(p,i);return this.appendChild(x),x}appendChild(p){if(p.rootNode!==this.rootNode)p.rootNode=this.rootNode,p._nodeId=++this.rootNode.nodeCounter;return p.parentNode=this,this.childNodes.push(p),p}replace(p){if(p===this)return this;return this.parentNode.childNodes.forEach((i,x)=>{if(i===this)p.rootNode=this.rootNode,p.parentNode=this.parentNode,p._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,p.parentNode.childNodes[x]=p}),p}remove(){if(!this.parentNode)return this;for(let p=this.parentNode.childNodes.length-1;p>=0;p--)if(this.parentNode.childNodes[p]===this)return this.parentNode.childNodes.splice(p,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(p,i){let x=!1,v;if(!i&&p&&typeof p==="object"){if(p.key&&"value"in p)this.setHeader(p.key,p.value);else if(Array.isArray(p))p.forEach((m)=>{this.setHeader(m.key,m.value)});else Object.keys(p).forEach((m)=>{this.setHeader(m,p[m])});return this}p=this._normalizeHeaderKey(p),v={key:p,value:i};for(let m=0,f=this._headers.length;m<f;m++)if(this._headers[m].key===p)if(!x)this._headers[m]=v,x=!0;else this._headers.splice(m,1),m--,f--;if(!x)this._headers.push(v);return this}addHeader(p,i){if(!i&&p&&typeof p==="object"){if(p.key&&p.value)this.addHeader(p.key,p.value);else if(Array.isArray(p))p.forEach((x)=>{this.addHeader(x.key,x.value)});else Object.keys(p).forEach((x)=>{this.addHeader(x,p[x])});return this}else if(Array.isArray(i))return i.forEach((x)=>{this.addHeader(p,x)}),this;return this._headers.push({key:this._normalizeHeaderKey(p),value:i}),this}getHeader(p){p=this._normalizeHeaderKey(p);for(let i=0,x=this._headers.length;i<x;i++)if(this._headers[i].key===p)return this._headers[i].value}setContent(p){if(this.content=p,typeof this.content.pipe==="function")this._contentErrorHandler=(i)=>{this.content.removeListener("error",this._contentErrorHandler),this.content=i},this.content.once("error",this._contentErrorHandler);else if(typeof this.content==="string"){if(this._isPlainText=T.isPlainText(this.content),this._isPlainText&&T.hasLongerLines(this.content,76))this._hasLongLines=!0}return this}build(p){let i;if(!p)i=new Promise((w,l)=>{p=$w.callbackPromise(w,l)});let x=this.createReadStream(),v=[],m=0,f=!1;return x.on("readable",()=>{let w;while((w=x.read())!==null)v.push(w),m+=w.length}),x.once("error",(w)=>{if(f)return;return f=!0,p(w)}),x.once("end",(w)=>{if(f)return;if(f=!0,w&&w.length)v.push(w),m+=w.length;return p(null,Buffer.concat(v,m))}),i}getTransferEncoding(){let p=!1,i=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();if(this.content){if(p=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),!p||!["base64","quoted-printable"].includes(p)){if(/^text\//i.test(i))if(this._isPlainText&&!this._hasLongLines)p="7bit";else if(typeof this.content==="string"||this.content instanceof Buffer)p=this._getTextEncoding(this.content)==="Q"?"quoted-printable":"base64";else p=this.textEncoding==="B"?"base64":"quoted-printable";else if(!/^(multipart|message)\//i.test(i))p=p||"base64"}}return p}buildHeaders(){let p=this.getTransferEncoding(),i=[];if(p)this.setHeader("Content-Transfer-Encoding",p);if(this.filename&&!this.getHeader("Content-Disposition"))this.setHeader("Content-Disposition","attachment");if(this.rootNode===this){if(!this.getHeader("Date"))this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000"));if(this.messageId(),!this.getHeader("MIME-Version"))this.setHeader("MIME-Version","1.0");for(let x=this._headers.length-2;x>=0;x--){let v=this._headers[x];if(v.key==="Content-Type")this._headers.splice(x,1),this._headers.push(v)}}return this._headers.forEach((x)=>{let{key:v,value:m}=x,f,w,l={};if(m&&typeof m==="object"&&!["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(v)){if(Object.keys(m).forEach((j)=>{if(j!=="value")l[j]=m[j]}),m=(m.value||"").toString(),!m.trim())return}if(l.prepared){if(l.foldLines)i.push(T.foldLines(v+": "+m));else i.push(v+": "+m);return}switch(x.key){case"Content-Disposition":if(f=T.parseHeaderValue(m),this.filename)f.params.filename=this.filename;m=T.buildHeaderValue(f);break;case"Content-Type":if(f=T.parseHeaderValue(m),this._handleContentType(f),f.value.match(/^text\/plain\b/)&&typeof this.content==="string"&&/[\u0080-\uFFFF]/.test(this.content))f.params.charset="utf-8";if(m=T.buildHeaderValue(f),this.filename){if(w=this._encodeWords(this.filename),w!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(w))w='"'+w+'"';m+="; name="+w}break;case"Bcc":if(!this.keepBcc)return;break}if(m=this._encodeHeaderValue(v,m),!(m||"").toString().trim())return;if(typeof this.normalizeHeaderKey==="function"){let j=this.normalizeHeaderKey(v,m);if(j&&typeof j==="string"&&j.length)v=j}i.push(T.foldLines(v+": "+m,76))}),i.join(`\r
`)}createReadStream(p){p=p||{};let i=new Cp(p),x=i,v;this.stream(i,p,(m)=>{if(m){x.emit("error",m);return}i.end()});for(let m=0,f=this._transforms.length;m<f;m++)v=typeof this._transforms[m]==="function"?this._transforms[m]():this._transforms[m],x.once("error",(w)=>{v.emit("error",w)}),x=x.pipe(v);v=new Xw,x.once("error",(m)=>{v.emit("error",m)}),x=x.pipe(v);for(let m=0,f=this._processFuncs.length;m<f;m++)v=this._processFuncs[m],x=v(x);if(this.newline){let f=["win","windows","dos",`\r
`].includes(this.newline.toString().toLowerCase())?new Yw:new Bw,w=x.pipe(f);return x.on("error",(l)=>w.emit("error",l)),w}return x}transform(p){this._transforms.push(p)}processFunc(p){this._processFuncs.push(p)}stream(p,i,x){let v=this.getTransferEncoding(),m,f,w=!1,l=(q)=>{if(w)return;w=!0,x(q)},z=()=>{let q=0,$=()=>{if(q>=this.childNodes.length)return p.write(`\r
--`+this.boundary+`--\r
`),l();let g=this.childNodes[q++];p.write((q>1?`\r
`:"")+"--"+this.boundary+`\r
`),g.stream(p,i,(X)=>{if(X)return l(X);setImmediate($)})};if(this.multipart)setImmediate($);else return l()},j=()=>{if(this.content){if(Object.prototype.toString.call(this.content)==="[object Error]")return l(this.content);if(typeof this.content.pipe==="function")this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=($)=>l($),this.content.once("error",this._contentErrorHandler);let q=()=>{if(["quoted-printable","base64"].includes(v))m=new(v==="base64"?Gw:_w).Encoder(i),m.pipe(p,{end:!1}),m.once("end",z),m.once("error",($)=>l($)),f=this._getStream(this.content),f.pipe(m);else f=this._getStream(this.content),f.pipe(p,{end:!1}),f.once("end",z);f.once("error",($)=>l($))};if(this.content._resolve){let $=[],g=0,X=!1,a=this._getStream(this.content);a.on("error",(c)=>{if(X)return;X=!0,l(c)}),a.on("readable",()=>{let c;while((c=a.read())!==null)$.push(c),g+=c.length}),a.on("end",()=>{if(X)return;X=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat($,g),setImmediate(q)})}else setImmediate(q);return}else return setImmediate(z)};if(this._raw)setImmediate(()=>{if(Object.prototype.toString.call(this._raw)==="[object Error]")return l(this._raw);if(typeof this._raw.pipe==="function")this._raw.removeListener("error",this._contentErrorHandler);let q=this._getStream(this._raw);q.pipe(p,{end:!1}),q.on("error",($)=>p.emit("error",$)),q.on("end",z)});else p.write(this.buildHeaders()+`\r
\r
`),setImmediate(j)}setEnvelope(p){let i;if(this._envelope={from:!1,to:[]},p.from){if(i=[],this._convertAddresses(this._parseAddresses(p.from),i),i=i.filter((v)=>v&&v.address),i.length&&i[0])this._envelope.from=i[0].address}["to","cc","bcc"].forEach((v)=>{if(p[v])this._convertAddresses(this._parseAddresses(p[v]),this._envelope.to)}),this._envelope.to=this._envelope.to.map((v)=>v.address).filter((v)=>v);let x=["to","cc","bcc","from"];return Object.keys(p).forEach((v)=>{if(!x.includes(v))this._envelope[v]=p[v]}),this}getAddresses(){let p={};return this._headers.forEach((i)=>{let x=i.key.toLowerCase();if(["from","sender","reply-to","to","cc","bcc"].includes(x)){if(!Array.isArray(p[x]))p[x]=[];this._convertAddresses(this._parseAddresses(i.value),p[x])}}),p}getEnvelope(){if(this._envelope)return this._envelope;let p={from:!1,to:[]};return this._headers.forEach((i)=>{let x=[];if(i.key==="From"||!p.from&&["Reply-To","Sender"].includes(i.key)){if(this._convertAddresses(this._parseAddresses(i.value),x),x.length&&x[0])p.from=x[0].address}else if(["To","Cc","Bcc"].includes(i.key))this._convertAddresses(this._parseAddresses(i.value),p.to)}),p.to=p.to.map((i)=>i.address),p}messageId(){let p=this.getHeader("Message-ID");if(!p)p=this._generateMessageId(),this.setHeader("Message-ID",p);return p}setRaw(p){if(this._raw=p,this._raw&&typeof this._raw.pipe==="function")this._contentErrorHandler=(i)=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=i},this._raw.once("error",this._contentErrorHandler);return this}_getStream(p){let i;if(p._resolvedValue)return i=new Cp,setImmediate(()=>{try{i.end(p._resolvedValue)}catch(x){i.emit("error",x)}}),i;else if(typeof p.pipe==="function")return p;else if(p&&typeof p.path==="string"&&!p.href){if(this.disableFileAccess)return i=new Cp,setImmediate(()=>i.emit("error",new Error("File access rejected for "+p.path))),i;return qw.createReadStream(p.path)}else if(p&&typeof p.href==="string"){if(this.disableUrlAccess)return i=new Cp,setImmediate(()=>i.emit("error",new Error("Url access rejected for "+p.href))),i;return Jw(p.href,{headers:p.httpHeaders})}else return i=new Cp,setImmediate(()=>{try{i.end(p||"")}catch(x){i.emit("error",x)}}),i}_parseAddresses(p){return[].concat.apply([],[].concat(p).map((i)=>{if(i&&i.address)return i.address=this._normalizeAddress(i.address),i.name=i.name||"",[i];return Qw(i)}))}_normalizeHeaderKey(p){return p=(p||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,(i)=>i.toUpperCase()).replace(/^Content-Features$/i,"Content-features"),p}_handleContentType(p){if(this.contentType=p.value.trim().toLowerCase(),this.multipart=/^multipart\//i.test(this.contentType)?this.contentType.substr(this.contentType.indexOf("/")+1):!1,this.multipart)this.boundary=p.params.boundary=p.params.boundary||this.boundary||this._generateBoundary();else this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(p,i){switch(p=this._normalizeHeaderKey(p),p){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(i));case"Message-ID":case"In-Reply-To":case"Content-Id":if(i=(i||"").toString().replace(/\r?\n|\r/g," "),i.charAt(0)!=="<")i="<"+i;if(i.charAt(i.length-1)!==">")i=i+">";return i;case"References":return i=[].concat.apply([],[].concat(i||"").map((x)=>{return x=(x||"").toString().replace(/\r?\n|\r/g," ").trim(),x.replace(/<[^>]*>/g,(v)=>v.replace(/\s/g,"")).split(/\s+/)})).map((x)=>{if(x.charAt(0)!=="<")x="<"+x;if(x.charAt(x.length-1)!==">")x=x+">";return x}),i.join(" ").trim();case"Date":if(Object.prototype.toString.call(i)==="[object Date]")return i.toUTCString().replace(/GMT/,"+0000");return i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i);case"Content-Type":case"Content-Disposition":return(i||"").toString().replace(/\r?\n|\r/g," ");default:return i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i)}}_convertAddresses(p,i){let x=[];return i=i||[],[].concat(p||[]).forEach((v)=>{if(v.address){if(v.address=this._normalizeAddress(v.address),!v.name)x.push(v.address.indexOf(" ")>=0?`<${v.address}>`:`${v.address}`);else if(v.name)x.push(`${this._encodeAddressName(v.name)} <${v.address}>`);if(v.address){if(!i.filter((m)=>m.address===v.address).length)i.push(v)}}else if(v.group){let m=(v.group.length?this._convertAddresses(v.group,i):"").trim();x.push(`${this._encodeAddressName(v.name)}:${m};`)}}),x.join(", ")}_normalizeAddress(p){p=(p||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim();let i=p.lastIndexOf("@");if(i<0)return p;let x=p.substr(0,i),v=p.substr(i+1),m;try{m=gw.toASCII(v.toLowerCase())}catch(f){}if(x.indexOf(" ")>=0){if(x.charAt(0)!=='"')x='"'+x;if(x.substr(-1)!=='"')x=x+'"'}return`${x}@${m}`}_encodeAddressName(p){if(!/^[\w ]*$/.test(p))if(/^[\x20-\x7e]*$/.test(p))return'"'+p.replace(/([\\"])/g,"\\$1")+'"';else return T.encodeWord(p,this._getTextEncoding(p),52);return p}_encodeWords(p){return T.encodeWords(p,this._getTextEncoding(p),52,!0)}_getTextEncoding(p){p=(p||"").toString();let i=this.textEncoding,x,v;if(!i)v=(p.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,x=(p.match(/[a-z]/gi)||[]).length,i=v<x?"Q":"B";return i}_generateMessageId(){return"<"+[2,2,2,6].reduce((p,i)=>p+"-"+$i.randomBytes(i).toString("hex"),$i.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}}Sx.exports=_i});var Lx=A((nz,Dx)=>{var Np=hp(),Gi=Kp(),Ww=D().parseDataURI;class Fx{constructor(p){this.mail=p||{},this.message=!1}compile(){if(this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter((p)=>/^text\/html\b/i.test(p.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&this._attachments.attached.length===1,this.mail.raw)this.message=new Np("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw);else if(this._useMixed)this.message=this._createMixed();else if(this._useAlternative)this.message=this._createAlternative();else if(this._useRelated)this.message=this._createRelated();else this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""});if(this.mail.headers)this.message.addHeader(this.mail.headers);if(["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach((p)=>{let i=p.replace(/-(\w)/g,(x,v)=>v.toUpperCase());if(this.mail[i])this.message.setHeader(p,this.mail[i])}),this.mail.envelope)this.message.setEnvelope(this.mail.envelope);return this.message.messageId(),this.message}getAttachments(p){let i,x,v=[].concat(this.mail.attachments||[]).map((m,f)=>{let w;if(/^data:/i.test(m.path||m.href))m=this._processDataUrl(m);let l=m.contentType||Gi.detectMimeType(m.filename||m.path||m.href||"bin"),z=/^image\//i.test(l),j=/^message\//i.test(l),q=m.contentDisposition||(j||z&&m.cid?"inline":"attachment"),$;if("contentTransferEncoding"in m)$=m.contentTransferEncoding;else if(j)$="7bit";else $="base64";if(w={contentType:l,contentDisposition:q,contentTransferEncoding:$},m.filename)w.filename=m.filename;else if(!j&&m.filename!==!1){if(w.filename=(m.path||m.href||"").split("/").pop().split("?").shift()||"attachment-"+(f+1),w.filename.indexOf(".")<0)w.filename+="."+Gi.detectExtension(w.contentType)}if(/^https?:\/\//i.test(m.path))m.href=m.path,m.path=void 0;if(m.cid)w.cid=m.cid;if(m.raw)w.raw=m.raw;else if(m.path)w.content={path:m.path};else if(m.href)w.content={href:m.href,httpHeaders:m.httpHeaders};else w.content=m.content||"";if(m.encoding)w.encoding=m.encoding;if(m.headers)w.headers=m.headers;return w});if(this.mail.icalEvent){if(typeof this.mail.icalEvent==="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw))i=this.mail.icalEvent;else i={content:this.mail.icalEvent};if(x={},Object.keys(i).forEach((m)=>{x[m]=i[m]}),x.contentType="application/ics",!x.headers)x.headers={};x.filename=x.filename||"invite.ics",x.headers["Content-Disposition"]="attachment",x.headers["Content-Transfer-Encoding"]="base64"}if(!p)return{attached:v.concat(x||[]),related:[]};else return{attached:v.filter((m)=>!m.cid).concat(x||[]),related:v.filter((m)=>!!m.cid)}}getAlternatives(){let p=[],i,x,v,m,f,w;if(this.mail.text){if(typeof this.mail.text==="object"&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw))i=this.mail.text;else i={content:this.mail.text};i.contentType="text/plain; charset=utf-8"}if(this.mail.watchHtml){if(typeof this.mail.watchHtml==="object"&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw))v=this.mail.watchHtml;else v={content:this.mail.watchHtml};v.contentType="text/watch-html; charset=utf-8"}if(this.mail.amp){if(typeof this.mail.amp==="object"&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw))m=this.mail.amp;else m={content:this.mail.amp};m.contentType="text/x-amp-html; charset=utf-8"}if(this.mail.icalEvent){if(typeof this.mail.icalEvent==="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw))f=this.mail.icalEvent;else f={content:this.mail.icalEvent};if(w={},Object.keys(f).forEach((l)=>{w[l]=f[l]}),w.content&&typeof w.content==="object")w.content._resolve=!0;if(w.filename=!1,w.contentType="text/calendar; charset=utf-8; method="+(w.method||"PUBLISH").toString().trim().toUpperCase(),!w.headers)w.headers={}}if(this.mail.html){if(typeof this.mail.html==="object"&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw))x=this.mail.html;else x={content:this.mail.html};x.contentType="text/html; charset=utf-8"}return[].concat(i||[]).concat(v||[]).concat(m||[]).concat(x||[]).concat(w||[]).concat(this.mail.alternatives||[]).forEach((l)=>{let z;if(/^data:/i.test(l.path||l.href))l=this._processDataUrl(l);if(z={contentType:l.contentType||Gi.detectMimeType(l.filename||l.path||l.href||"txt"),contentTransferEncoding:l.contentTransferEncoding},l.filename)z.filename=l.filename;if(/^https?:\/\//i.test(l.path))l.href=l.path,l.path=void 0;if(l.raw)z.raw=l.raw;else if(l.path)z.content={path:l.path};else if(l.href)z.content={href:l.href};else z.content=l.content||"";if(l.encoding)z.encoding=l.encoding;if(l.headers)z.headers=l.headers;p.push(z)}),p}_createMixed(p){let i;if(!p)i=new Np("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});else i=p.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});if(this._useAlternative)this._createAlternative(i);else if(this._useRelated)this._createRelated(i);return[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach((x)=>{if(!this._useRelated||x!==this._htmlNode)this._createContentNode(i,x)}),i}_createAlternative(p){let i;if(!p)i=new Np("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});else i=p.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});return this._alternatives.forEach((x)=>{if(this._useRelated&&this._htmlNode===x)this._createRelated(i);else this._createContentNode(i,x)}),i}_createRelated(p){let i;if(!p)i=new Np('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});else i=p.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});return this._createContentNode(i,this._htmlNode),this._attachments.related.forEach((x)=>this._createContentNode(i,x)),i}_createContentNode(p,i){i=i||{},i.content=i.content||"";let x,v=(i.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!p)x=new Np(i.contentType,{filename:i.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});else x=p.createChild(i.contentType,{filename:i.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline});if(i.headers)x.addHeader(i.headers);if(i.cid)x.setHeader("Content-Id","<"+i.cid.replace(/[<>]/g,"")+">");if(i.contentTransferEncoding)x.setHeader("Content-Transfer-Encoding",i.contentTransferEncoding);else if(this.mail.encoding&&/^text\//i.test(i.contentType))x.setHeader("Content-Transfer-Encoding",this.mail.encoding);if(!/^text\//i.test(i.contentType)||i.contentDisposition)x.setHeader("Content-Disposition",i.contentDisposition||(i.cid&&/^image\//i.test(i.contentType)?"inline":"attachment"));if(typeof i.content==="string"&&!["utf8","usascii","ascii"].includes(v))i.content=Buffer.from(i.content,v);if(i.raw)x.setRaw(i.raw);else x.setContent(i.content);return x}_processDataUrl(p){let i;if((p.path||p.href).match(/^data:/))i=Ww(p.path||p.href);if(!i)return p;if(p.content=i.data,p.contentType=p.contentType||i.contentType,"path"in p)p.path=!1;if("href"in p)p.href=!1;return p}}Dx.exports=Fx});var Cx=A((dz,Kx)=>{var Hw=Y("stream").Transform;class Ox extends Hw{constructor(p){super(p);this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(p){let i=this.lastBytes.length,x=Math.min(p.length,i);for(let v=0,m=i-x;v<m;v++)this.lastBytes[v]=this.lastBytes[v+x];for(let v=1;v<=x;v++)this.lastBytes[i-v]=p[p.length-v]}checkHeaders(p){if(this.headersParsed)return!0;let i=this.lastBytes.length,x=0;this.curLinePos=0;for(let v=0,m=this.lastBytes.length+p.length;v<m;v++){let f;if(v<i)f=this.lastBytes[v];else f=p[v-i];if(f===10&&v){let w=v-1<i?this.lastBytes[v-1]:p[v-1-i],l=v>1?v-2<i?this.lastBytes[v-2]:p[v-2-i]:!1;if(w===10){this.headersParsed=!0,x=v-i+1,this.headerBytes+=x;break}else if(w===13&&l===10){this.headersParsed=!0,x=v-i+1,this.headerBytes+=x;break}}}if(this.headersParsed){if(this.headerChunks.push(p.slice(0,x)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),p.length-1>x){let v=p.slice(x);this.bodySize+=v.length,setImmediate(()=>this.push(v))}return!1}else this.headerBytes+=p.length,this.headerChunks.push(p);return this.updateLastBytes(p),!1}_transform(p,i,x){if(!p||!p.length)return x();if(typeof p==="string")p=Buffer.from(p,i);let v;try{v=this.checkHeaders(p)}catch(m){return x(m)}if(v)this.bodySize+=p.length,this.push(p);setImmediate(x)}_flush(p){if(this.headerChunks){let i=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=i.length,this.push(i),this.headerChunks=null}p()}parseHeaders(){let p=(this.rawHeaders||"").toString().split(/\r?\n/);for(let i=p.length-1;i>0;i--)if(/^\s/.test(p[i]))p[i-1]+=`
`+p[i],p.splice(i,1);return p.filter((i)=>i.trim()).map((i)=>({key:i.substr(0,i.indexOf(":")).trim().toLowerCase(),line:i}))}}Kx.exports=Ox});var Ix=A((yz,Ex)=>{var aw=Y("stream").Transform,Mw=Y("crypto");class Nx extends aw{constructor(p){super();p=p||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=Mw.createHash(p.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=p.debug,this._debugBody=p.debug?[]:!1}updateHash(p){let i,x="",v="file";for(let f=p.length-1;f>=0;f--){let w=p[f];if(v==="file"&&(w===10||w===13));else if(v==="file"&&(w===9||w===32))v="line";else if(v==="line"&&(w===9||w===32));else if(v==="file"||v==="line"){if(v="body",f===p.length-1)break}if(f===0){if(v==="file"&&(!this.remainder||/[\r\n]$/.test(this.remainder))||v==="line"&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=p.toString("binary");return}else if(v==="line"||v==="file"){x=p.toString("binary"),p=!1;break}}if(v!=="body")continue;x=p.slice(f+1).toString("binary"),p=p.slice(0,f+1);break}let m=!!this.remainder;if(p&&!m){for(let f=0,w=p.length;f<w;f++)if(f&&p[f]===10&&p[f-1]!==13){m=!0;break}else if(f&&p[f]===13&&p[f-1]===32){m=!0;break}else if(f&&p[f]===32&&p[f-1]===32){m=!0;break}else if(p[f]===9){m=!0;break}}if(m)i=this.remainder+(p?p.toString("binary"):""),this.remainder=x,i=i.replace(/\r?\n/g,`
`).replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,`\r
`),p=Buffer.from(i,"binary");else if(x)this.remainder=x;if(this.debug)this._debugBody.push(p);this.bodyHash.update(p)}_transform(p,i,x){if(!p||!p.length)return x();if(typeof p==="string")p=Buffer.from(p,i);this.updateHash(p),this.byteLength+=p.length,this.push(p),x()}_flush(p){if(/[\r\n]$/.test(this.remainder)&&this.byteLength>2)this.bodyHash.update(Buffer.from(`\r
`));if(!this.byteLength)this.push(Buffer.from(`\r
`));this.emit("hash",this.bodyHash.digest("base64"),this.debug?Buffer.concat(this._debugBody):!1),p()}}Ex.exports=Nx});var ox=A((kz,Qi)=>{var Vw=fi(),Uw=Kp(),Aw=Y("crypto");Qi.exports=(p,i,x,v)=>{v=v||{};let m="From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",f=v.headerFieldNames||m,w=Tx(p,f,v.skipFields),l=cw(v.domainName,v.keySelector,w.fieldNames,i,x),z,j;w.headers+="dkim-signature:"+Px(l),z=Aw.createSign(("rsa-"+i).toUpperCase()),z.update(w.headers);try{j=z.sign(v.privateKey,"base64")}catch(q){return!1}return l+j.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,`$&\r
 `).trim()};Qi.exports.relaxedHeaders=Tx;function cw(p,i,x,v,m){let f=["v=1","a=rsa-"+v,"c=relaxed/relaxed","d="+Vw.toASCII(p),"q=dns/txt","s="+i,"bh="+m,"h="+x].join("; ");return Uw.foldLines("DKIM-Signature: "+f,76)+`;\r
 b=`}function Tx(p,i,x){let v=new Set,m=new Set,f=new Map;(x||"").toLowerCase().split(":").forEach((z)=>{m.add(z.trim())}),(i||"").toLowerCase().split(":").filter((z)=>!m.has(z.trim())).forEach((z)=>{v.add(z.trim())});for(let z=p.length-1;z>=0;z--){let j=p[z];if(v.has(j.key)&&!f.has(j.key))f.set(j.key,Px(j.line))}let w=[],l=[];return v.forEach((z)=>{if(f.has(z))l.push(z),w.push(z+":"+f.get(z))}),{headers:w.join(`\r
`)+`\r
`,fieldNames:l.join(":")}}function Px(p){return p.substr(p.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}});var dx=A((uz,nx)=>{var Rw=Cx(),bw=Ix(),Sw=ox(),Ji=Y("stream").PassThrough,Xi=Y("fs"),Fw=Y("path"),Dw=Y("crypto");class Zx{constructor(p,i,x,v){this.options=p||{},this.keys=i,this.cacheTreshold=Number(this.options.cacheTreshold)||2097152,this.hashAlgo=this.options.hashAlgo||"sha256",this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=this.cacheDir?Fw.join(this.cacheDir,"message."+Date.now()+"-"+Dw.randomBytes(14).toString("hex")):!1,this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=x,this.output=v,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",(m)=>{this.hasErrored=!0,this.cleanup(),v.emit("error",m)})}cleanup(){if(!this.cache||!this.cachePath)return;Xi.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=Xi.createReadStream(this.cachePath),this.cache.once("error",(p)=>{this.cleanup(),this.output.emit("error",p)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length){if(!this.cache)return this.output.end();return this.createReadCache()}let p=this.chunks[this.readPos++];if(this.output.write(p)===!1)return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let p=0,i=()=>{if(p>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let x=this.keys[p++],v=Sw(this.headers,this.hashAlgo,this.bodyHash,{domainName:x.domainName,keySelector:x.keySelector,privateKey:x.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});if(v)this.output.write(Buffer.from(v+`\r
`));return setImmediate(i)};if(this.bodyHash&&this.headers)return i();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=Xi.createWriteStream(this.cachePath),this.cache.once("error",(p)=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{while(this.relaxedBody.read()!==null);}),this.hasErrored=!0,this.output.emit("error",p)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new Rw,this.relaxedBody=new bw({hashAlgo:this.hashAlgo}),this.parser.on("headers",(p)=>{this.headers=p}),this.relaxedBody.on("hash",(p)=>{this.bodyHash=p}),this.relaxedBody.on("readable",()=>{let p;if(this.cache)return;while((p=this.relaxedBody.read())!==null)if(this.chunks.push(p),this.chunklen+=p.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}),this.relaxedBody.on("end",()=>{if(this.cache)return;this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}}class hx{constructor(p){this.options=p||{},this.keys=[].concat(this.options.keys||{domainName:p.domainName,keySelector:p.keySelector,privateKey:p.privateKey})}sign(p,i){let x=new Ji,v=p,m=!1;if(Buffer.isBuffer(p))m=p,v=new Ji;else if(typeof p==="string")m=Buffer.from(p),v=new Ji;let f=this.options;if(i&&Object.keys(i).length)f={},Object.keys(this.options||{}).forEach((l)=>{f[l]=this.options[l]}),Object.keys(i||{}).forEach((l)=>{if(!(l in f))f[l]=i[l]});let w=new Zx(f,this.keys,v,x);return setImmediate(()=>{if(w.signStream(),m)setImmediate(()=>{v.end(m)})}),x}}nx.exports=hx});var sx=A((tz,tx)=>{var yx=Y("net"),kx=Y("tls"),Lw=Y("url");function ux(p,i,x,v){let m=Lw.parse(p),f,w,l;if(f={host:m.hostname,port:Number(m.port)?Number(m.port):m.protocol==="https:"?443:80},m.protocol==="https:")f.rejectUnauthorized=!1,w=kx.connect.bind(kx);else w=yx.connect.bind(yx);let z=!1,j=($)=>{if(z)return;z=!0;try{l.destroy()}catch(g){}v($)},q=()=>{let $=new Error("Proxy socket timed out");$.code="ETIMEDOUT",j($)};l=w(f,()=>{if(z)return;let $={Host:x+":"+i,Connection:"close"};if(m.auth)$["Proxy-Authorization"]="Basic "+Buffer.from(m.auth).toString("base64");l.write("CONNECT "+x+":"+i+` HTTP/1.1\r
`+Object.keys($).map((a)=>a+": "+$[a]).join(`\r
`)+`\r
\r
`);let g="",X=(a)=>{let c,up;if(z)return;if(g+=a.toString("binary"),c=g.match(/\r\n\r\n/)){if(l.removeListener("data",X),up=g.substr(c.index+c[0].length),g=g.substr(0,c.index),up)l.unshift(Buffer.from(up,"binary"));if(z=!0,c=g.match(/^HTTP\/\d+\.\d+ (\d+)/i),!c||(c[1]||"").charAt(0)!=="2"){try{l.destroy()}catch(Pl){}return v(new Error("Invalid response from proxy"+(c&&": "+c[1]||"")))}return l.removeListener("error",j),l.removeListener("timeout",q),l.setTimeout(0),v(null,l)}};l.on("data",X)}),l.setTimeout(ux.timeout||30000),l.on("timeout",q),l.once("error",j)}tx.exports=ux});var iv=A((sz,pv)=>{var rx=D(),Ow=hp(),Mp=Kp();class ex{constructor(p,i){this.mailer=p,this.data={},this.message=null,i=i||{};let x=p.options||{},v=p._defaults||{};Object.keys(i).forEach((m)=>{this.data[m]=i[m]}),this.data.headers=this.data.headers||{},Object.keys(v).forEach((m)=>{if(!(m in this.data))this.data[m]=v[m];else if(m==="headers")Object.keys(v.headers).forEach((f)=>{if(!(f in this.data.headers))this.data.headers[f]=v.headers[f]})}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach((m)=>{if(m in x)this.data[m]=x[m]})}resolveContent(...p){return rx.resolveContent(...p)}resolveAll(p){let i=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];if(this.data.alternatives&&this.data.alternatives.length)this.data.alternatives.forEach((l,z)=>{i.push([this.data.alternatives,z])});if(this.data.attachments&&this.data.attachments.length)this.data.attachments.forEach((l,z)=>{if(!l.filename){if(l.filename=(l.path||l.href||"").split("/").pop().split("?").shift()||"attachment-"+(z+1),l.filename.indexOf(".")<0)l.filename+="."+Mp.detectExtension(l.contentType)}if(!l.contentType)l.contentType=Mp.detectMimeType(l.filename||l.path||l.href||"bin");i.push([this.data.attachments,z])});let x=new Ow;["from","to","cc","bcc","sender","replyTo"].forEach((l)=>{let z;if(this.message)z=[].concat(x._parseAddresses(this.message.getHeader(l==="replyTo"?"reply-to":l))||[]);else if(this.data[l])z=[].concat(x._parseAddresses(this.data[l])||[]);if(z&&z.length)this.data[l]=z;else if(l in this.data)this.data[l]=null}),["from","sender"].forEach((l)=>{if(this.data[l])this.data[l]=this.data[l].shift()});let f=0,w=()=>{if(f>=i.length)return p(null,this.data);let l=i[f++];if(!l[0]||!l[0][l[1]])return w();rx.resolveContent(...l,(z,j)=>{if(z)return p(z);let q={content:j};if(l[0][l[1]]&&typeof l[0][l[1]]==="object"&&!Buffer.isBuffer(l[0][l[1]]))Object.keys(l[0][l[1]]).forEach(($)=>{if(!($ in q)&&!["content","path","href","raw"].includes($))q[$]=l[0][l[1]][$]});l[0][l[1]]=q,w()})};setImmediate(()=>w())}normalize(p){let i=this.data.envelope||this.message.getEnvelope(),x=this.message.messageId();this.resolveAll((v,m)=>{if(v)return p(v);if(m.envelope=i,m.messageId=x,["html","text","watchHtml","amp"].forEach((f)=>{if(m[f]&&m[f].content){if(typeof m[f].content==="string")m[f]=m[f].content;else if(Buffer.isBuffer(m[f].content))m[f]=m[f].content.toString()}}),m.icalEvent&&Buffer.isBuffer(m.icalEvent.content))m.icalEvent.content=m.icalEvent.content.toString("base64"),m.icalEvent.encoding="base64";if(m.alternatives&&m.alternatives.length)m.alternatives.forEach((f)=>{if(f&&f.content&&Buffer.isBuffer(f.content))f.content=f.content.toString("base64"),f.encoding="base64"});if(m.attachments&&m.attachments.length)m.attachments.forEach((f)=>{if(f&&f.content&&Buffer.isBuffer(f.content))f.content=f.content.toString("base64"),f.encoding="base64"});if(m.normalizedHeaders={},Object.keys(m.headers||{}).forEach((f)=>{let w=[].concat(m.headers[f]||[]).shift();if(w=w&&w.value||w,w){if(["references","in-reply-to","message-id","content-id"].includes(f))w=this.message._encodeHeaderValue(f,w);m.normalizedHeaders[f]=w}}),m.list&&typeof m.list==="object")this._getListHeaders(m.list).forEach((w)=>{m.normalizedHeaders[w.key]=w.value.map((l)=>l&&l.value||l).join(", ")});if(m.references)m.normalizedHeaders.references=this.message._encodeHeaderValue("references",m.references);if(m.inReplyTo)m.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",m.inReplyTo);return p(null,m)})}setMailerHeader(){if(!this.message||!this.data.xMailer)return;this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(!this.message||!this.data.priority)return;switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low");break;default:}}setListHeaders(){if(!this.message||!this.data.list||typeof this.data.list!=="object")return;if(this.data.list&&typeof this.data.list==="object")this._getListHeaders(this.data.list).forEach((p)=>{p.value.forEach((i)=>{this.message.addHeader(p.key,i)})})}_getListHeaders(p){return Object.keys(p).map((i)=>({key:"list-"+i.toLowerCase().trim(),value:[].concat(p[i]||[]).map((x)=>({prepared:!0,foldLines:!0,value:[].concat(x||[]).map((v)=>{if(typeof v==="string")v={url:v};if(v&&v.url){if(i.toLowerCase().trim()==="id"){let f=v.comment||"";if(Mp.isPlainText(f))f='"'+f+'"';else f=Mp.encodeWord(f);return(v.comment?f+" ":"")+this._formatListUrl(v.url).replace(/^<[^:]+\/{,2}/,"")}let m=v.comment||"";if(!Mp.isPlainText(m))m=Mp.encodeWord(m);return this._formatListUrl(v.url)+(v.comment?" ("+m+")":"")}return""}).filter((v)=>v).join(", ")}))}))}_formatListUrl(p){if(p=p.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(p))return"<"+p+">";if(/^[^@]+@[^@]+$/.test(p))return"<mailto:"+p+">";return"<http://"+p+">"}}pv.exports=ex});var wv=A((rz,fv)=>{var Kw=Y("events"),xv=D(),Cw=vi(),Nw=Lx(),vv=dx(),Ew=sx(),Iw=Y("util"),Tw=Y("url"),Yi=I(),Pw=iv(),ow=Y("net"),Zw=Y("dns"),hw=Y("crypto");class mv extends Kw{constructor(p,i,x){super();if(this.options=i||{},this._defaults=x||{},this._defaultPlugins={compile:[(...v)=>this._convertDataImages(...v)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=this.options.dkim?new vv(this.options.dkim):!1,this.transporter=p,this.transporter.mailer=this,this.logger=xv.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),typeof this.transporter.on==="function")this.transporter.on("log",(v)=>{this.logger.debug({tnx:"transport"},"%s: %s",v.type,v.message)}),this.transporter.on("error",(v)=>{this.logger.error({err:v,tnx:"transport"},"Transport Error: %s",v.message),this.emit("error",v)}),this.transporter.on("idle",(...v)=>{this.emit("idle",...v)});if(["close","isIdle","verify"].forEach((v)=>{this[v]=(...m)=>{if(typeof this.transporter[v]==="function"){if(v==="verify"&&typeof this.getSocket==="function")this.transporter.getSocket=this.getSocket,this.getSocket=!1;return this.transporter[v](...m)}else return this.logger.warn({tnx:"transport",methodName:v},"Non existing method %s called for transport",v),!1}}),this.options.proxy&&typeof this.options.proxy==="string")this.setupProxy(this.options.proxy)}use(p,i){if(p=(p||"").toString(),!this._userPlugins.hasOwnProperty(p))this._userPlugins[p]=[i];else this._userPlugins[p].push(i);return this}sendMail(p,i=null){let x;if(!i)x=new Promise((m,f)=>{i=xv.callbackPromise(m,f)});if(typeof this.getSocket==="function")this.transporter.getSocket=this.getSocket,this.getSocket=!1;let v=new Pw(this,p);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",v,(m)=>{if(m)return this.logger.error({err:m,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",m.message),i(m);v.message=new Nw(v.data).compile(),v.setMailerHeader(),v.setPriorityHeaders(),v.setListHeaders(),this._processPlugins("stream",v,(f)=>{if(f)return this.logger.error({err:f,tnx:"plugin",action:"stream"},"PluginStream Error: %s",f.message),i(f);if(v.data.dkim||this.dkim)v.message.processFunc((w)=>{let l=v.data.dkim?new vv(v.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:v.message.messageId(),dkimDomains:l.keys.map((z)=>z.keySelector+"."+z.domainName).join(", ")},"Signing outgoing message with %s keys",l.keys.length),l.sign(w,v.data._dkim)});this.transporter.send(v,(...w)=>{if(w[0])this.logger.error({err:w[0],tnx:"transport",action:"send"},"Send Error: %s",w[0].message);i(...w)})})}),x}getVersionString(){return Iw.format("%s (%s; +%s; %s/%s)",Yi.name,Yi.version,Yi.homepage,this.transporter.name,this.transporter.version)}_processPlugins(p,i,x){if(p=(p||"").toString(),!this._userPlugins.hasOwnProperty(p))return x();let v=this._userPlugins[p]||[],m=this._defaultPlugins[p]||[];if(v.length)this.logger.debug({tnx:"transaction",pluginCount:v.length,step:p},"Using %s plugins for %s",v.length,p);if(v.length+m.length===0)return x();let f=0,w="default",l=()=>{let z=w==="default"?m:v;if(f>=z.length)if(w==="default"&&v.length)w="user",f=0,z=v;else return x();let j=z[f++];j(i,(q)=>{if(q)return x(q);l()})};l()}setupProxy(p){let i=Tw.parse(p);this.getSocket=(x,v)=>{let m=i.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+m))return this.meta.get("proxy_handler_"+m)(i,x,v);switch(m){case"http":case"https":Ew(i.href,x.port,x.host,(f,w)=>{if(f)return v(f);return v(null,{connection:w})});return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return v(new Error("Socks module not loaded"));let f=(w)=>{let l=!!this.meta.get("proxy_socks_module").SocksClient,z=l?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),j=Number(i.protocol.replace(/\D/g,""))||5,q={proxy:{ipaddress:w,port:Number(i.port),type:j},[l?"destination":"target"]:{host:x.host,port:x.port},command:"connect"};if(i.auth){let $=decodeURIComponent(i.auth.split(":").shift()),g=decodeURIComponent(i.auth.split(":").pop());if(l)q.proxy.userId=$,q.proxy.password=g;else if(j===4)q.userid=$;else q.authentication={username:$,password:g}}z.createConnection(q,($,g)=>{if($)return v($);return v(null,{connection:g.socket||g})})};if(ow.isIP(i.hostname))return f(i.hostname);return Zw.resolve(i.hostname,(w,l)=>{if(w)return v(w);f(Array.isArray(l)?l[0]:l)})}}v(new Error("Unknown proxy configuration"))}}_convertDataImages(p,i){if(!this.options.attachDataUrls&&!p.data.attachDataUrls||!p.data.html)return i();p.resolveContent(p.data,"html",(x,v)=>{if(x)return i(x);let m=0;v=(v||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(f,w,l,z)=>{let j=hw.randomBytes(10).toString("hex")+"@localhost";if(!p.data.attachments)p.data.attachments=[];if(!Array.isArray(p.data.attachments))p.data.attachments=[].concat(p.data.attachments||[]);return p.data.attachments.push({path:l,cid:j,filename:"image-"+ ++m+"."+Cw.detectExtension(z)}),w+"cid:"+j}),p.data.html=v,i()})}set(p,i){return this.meta.set(p,i)}get(p){return this.meta.get(p)}}fv.exports=mv});var jv=A((ez,zv)=>{var nw=Y("stream"),dw=nw.Transform;class lv extends dw{constructor(p){super(p);this.options=p||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(p,i,x){let v=[],m=0,f,w,l=0,z;if(!p||!p.length)return x();if(typeof p==="string")p=Buffer.from(p);this.inByteCount+=p.length;for(f=0,w=p.length;f<w;f++)if(p[f]===46){if(f&&p[f-1]===10||!f&&(!this.lastByte||this.lastByte===10))z=p.slice(l,f+1),v.push(z),v.push(Buffer.from(".")),m+=z.length+1,l=f+1}else if(p[f]===10){if(f&&p[f-1]!==13||!f&&this.lastByte!==13){if(f>l)z=p.slice(l,f),v.push(z),m+=z.length+2;else m+=2;v.push(Buffer.from(`\r
`)),l=f+1}}if(m){if(l<p.length)z=p.slice(l),v.push(z),m+=z.length;this.outByteCount+=m,this.push(Buffer.concat(v,m))}else this.outByteCount+=p.length,this.push(p);this.lastByte=p[p.length-1],x()}_flush(p){let i;if(this.lastByte===10)i=Buffer.from(`.\r
`);else if(this.lastByte===13)i=Buffer.from(`
.\r
`);else i=Buffer.from(`\r
.\r
`);this.outByteCount+=i.length,this.push(i),p()}}zv.exports=lv});var np=A((p2,Qv)=>{var yw=I(),kw=Y("events").EventEmitter,qv=Y("net"),gv=Y("tls"),uw=Y("os"),$v=Y("crypto"),tw=jv(),_v=Y("stream").PassThrough,t=D();class Gv extends kw{constructor(p){super(p);if(this.id=$v.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=p||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:!qv.isIP(this.host)?this.host:!1,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,typeof this.options.secure==="undefined"&&this.port===465)this.secureConnection=!0;this.name=this.options.name||this._getHostname(),this.logger=t.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach((i)=>{let x=(i||"").toString().trim().toUpperCase();if(!x)return;this.customAuth.set(x,this.options.customAuth[i])}),this.version=yw.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=(i)=>this._onData(i),this._onSocketError=(i)=>this._onError(i,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(p){if(typeof p==="function"){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),p()});let v=this._isDestroyedMessage("connect");if(v)return p(this._formatError(v,"ECONNECTION",!1,"CONN"))}let i={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||30000};if(this.options.localAddress)i.localAddress=this.options.localAddress;let x=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||120000),this._socket.on("error",this._onSocketError)};if(this.options.connection){if(this._socket=this.options.connection,x(),this.secureConnection&&!this.alreadySecured)setImmediate(()=>this._upgradeConnection((v)=>{if(v){this._onError(new Error("Error initiating TLS - "+(v.message||v)),"ETLS",!1,"CONN");return}this._onConnect()}));else setImmediate(()=>this._onConnect());return}else if(this.options.socket)return this._socket=this.options.socket,t.resolveHostname(i,(v,m)=>{if(v)return setImmediate(()=>this._onError(v,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:m.host,cached:!!m.cached},"Resolved %s as %s [cache %s]",i.host,m.host,m.cached?"hit":"miss"),Object.keys(m).forEach((f)=>{if(f.charAt(0)!=="_"&&m[f])i[f]=m[f]});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),x()}catch(f){return setImmediate(()=>this._onError(f,"ECONNECTION",!1,"CONN"))}});else if(this.secureConnection){if(this.options.tls)Object.keys(this.options.tls).forEach((v)=>{i[v]=this.options.tls[v]});if(this.servername&&!i.servername)i.servername=this.servername;return t.resolveHostname(i,(v,m)=>{if(v)return setImmediate(()=>this._onError(v,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:m.host,cached:!!m.cached},"Resolved %s as %s [cache %s]",i.host,m.host,m.cached?"hit":"miss"),Object.keys(m).forEach((f)=>{if(f.charAt(0)!=="_"&&m[f])i[f]=m[f]});try{this._socket=gv.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),x()}catch(f){return setImmediate(()=>this._onError(f,"ECONNECTION",!1,"CONN"))}})}else return t.resolveHostname(i,(v,m)=>{if(v)return setImmediate(()=>this._onError(v,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:m.host,cached:!!m.cached},"Resolved %s as %s [cache %s]",i.host,m.host,m.cached?"hit":"miss"),Object.keys(m).forEach((f)=>{if(f.charAt(0)!=="_"&&m[f])i[f]=m[f]});try{this._socket=qv.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),x()}catch(f){return setImmediate(()=>this._onError(f,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let p="end";if(this.stage==="init")p="destroy";this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',p);let i=this._socket&&this._socket.socket||this._socket;if(i&&!i.destroyed)try{i[p]()}catch(x){}this._destroy()}login(p,i){let x=this._isDestroyedMessage("login");if(x)return i(this._formatError(x,"ECONNECTION",!1,"API"));if(this._auth=p||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,!this._authMethod&&this._auth.oauth2&&!this._auth.credentials)this._authMethod="XOAUTH2";else if(!this._authMethod||this._authMethod==="XOAUTH2"&&!this._auth.oauth2)this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim();if(this._authMethod!=="XOAUTH2"&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod))this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};else return i(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));if(this.customAuth.has(this._authMethod)){let v=this.customAuth.get(this._authMethod),m,f=!1,w=()=>{if(f)return;f=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0)},l=(j)=>{if(f)return;f=!0,i(this._formatError(j,"EAUTH",m,"AUTH "+this._authMethod))},z=v({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(j,q)=>{let $;if(!q)$=new Promise((g,X)=>{q=t.callbackPromise(g,X)});return this._responseActions.push((g)=>{m=g;let X=g.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),a={command:j,response:g};if(X){if(a.status=Number(X[1])||0,X[2])a.code=X[2];a.text=g.substr(X[0].length)}else a.text=g,a.status=0;q(null,a)}),setImmediate(()=>this._sendCommand(j)),$},resolve:w,reject:l});if(z&&typeof z.catch==="function")z.then(w).catch(l);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,i);return;case"LOGIN":this._responseActions.push((v)=>{this._actionAUTH_LOGIN_USER(v,i)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push((v)=>{this._actionAUTHComplete(v,i)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\x00"+this._auth.credentials.user+"\x00"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\x00"+this._auth.credentials.user+"\x00/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push((v)=>{this._actionAUTH_CRAM_MD5(v,i)}),this._sendCommand("AUTH CRAM-MD5");return}return i(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(p,i,x){if(!i)return x(this._formatError("Empty message","EMESSAGE",!1,"API"));let v=this._isDestroyedMessage("send message");if(v)return x(this._formatError(v,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&p.size>this._maxAllowedSize)return setImmediate(()=>{x(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let m=!1,f=function(){if(m)return;m=!0,x(...arguments)};if(typeof i.on==="function")i.on("error",(l)=>f(this._formatError(l,"ESTREAM",!1,"API")));let w=Date.now();this._setEnvelope(p,(l,z)=>{if(l){let $=new _v;if(typeof i.pipe==="function")i.pipe($);else $.write(i),$.end();return f(l)}let j=Date.now(),q=this._createSendStream(($,g)=>{if($)return f($);return z.envelopeTime=j-w,z.messageTime=Date.now()-j,z.messageSize=q.outByteCount,z.response=g,f(null,z)});if(typeof i.pipe==="function")i.pipe(q);else q.write(i),q.end()})}reset(p){this._sendCommand("RSET"),this._responseActions.push((i)=>{if(i.charAt(0)!=="2")return p(this._formatError("Could not reset session state. response="+i,"EPROTOCOL",i,"RSET"));return this._envelope=!1,p(null,!0)})}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||600000),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{if(this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting)this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||30000),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(p){if(this._destroyed||!p||!p.length)return;let i=(p||"").toString("binary"),x=(this._remainder+i).split(/\r?\n/),v;this._remainder=x.pop();for(let m=0,f=x.length;m<f;m++){if(this._responseQueue.length){if(v=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(v.split(`
`).pop())){this._responseQueue[this._responseQueue.length-1]+=`
`+x[m];continue}}this._responseQueue.push(x[m])}if(this._responseQueue.length){if(v=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(v.split(`
`).pop()))return}this._processResponse()}_onError(p,i,x,v){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._destroyed)return;p=this._formatError(p,i,x,v),this.logger.error(x,p.message),this.emit("error",p),this.close()}_formatError(p,i,x,v){let m;if(/Error\]$/i.test(Object.prototype.toString.call(p)))m=p;else m=new Error(p);if(i&&i!=="Error")m.code=i;if(x)m.response=x,m.message+=": "+x;let f=typeof x==="string"&&Number((x.match(/^\d+/)||[])[0])||!1;if(f)m.responseCode=f;if(v)m.command=v;return m}_onClose(){let p=!1;if(this._remainder&&this._remainder.trim()){if(this.options.debug||this.options.transactionLog)this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,""));this.lastServerResponse=p=this._remainder.trim()}if(this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ETLS",p,"CONN");else if(![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",p,"CONN");else if(/^[45]\d{2}\b/.test(p))return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",p,"CONN");this._destroy()}_onEnd(){if(this._socket&&!this._socket.destroyed)this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){if(this._destroyed)return;this._destroyed=!0,this.emit("end")}_upgradeConnection(p){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let i=this._socket,x={socket:this._socket,host:this.host};if(Object.keys(this.options.tls||{}).forEach((v)=>{x[v]=this.options.tls[v]}),this.servername&&!x.servername)x.servername=this.servername;this.upgrading=!0;try{this._socket=gv.connect(x,()=>{return this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),i.removeListener("close",this._onSocketClose),i.removeListener("end",this._onSocketEnd),p(null,!0)})}catch(v){return p(v)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||600000),this._socket.on("timeout",this._onSocketTimeout),i.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let p=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(p.split(`
`).pop()))return;if(this.options.debug||this.options.transactionLog)this.logger.debug({tnx:"server"},p.replace(/\r?\n$/,""));if(!p.trim())setImmediate(()=>this._processResponse());let i=this._responseActions.shift();if(typeof i==="function")i.call(this,p),setImmediate(()=>this._processResponse());else return this._onError(new Error("Unexpected Response"),"EPROTOCOL",p,"CONN")}_sendCommand(p,i){if(this._destroyed)return;if(this._socket.destroyed)return this.close();if(this.options.debug||this.options.transactionLog)this.logger.debug({tnx:"client"},(i||p||"").toString().replace(/\r?\n$/,""));this._socket.write(Buffer.from(p+`\r
`,"utf-8"))}_setEnvelope(p,i){let x=[],v=!1;if(this._envelope=p||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map((m)=>(m&&m.address||m||"").toString().trim()),!this._envelope.to.length)return i(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return i(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));if(/[\x80-\uFFFF]/.test(this._envelope.from))v=!0;for(let m=0,f=this._envelope.to.length;m<f;m++){if(!this._envelope.to[m]||/[\r\n<>]/.test(this._envelope.to[m]))return i(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[m]),"EENVELOPE",!1,"API"));if(/[\x80-\uFFFF]/.test(this._envelope.to[m]))v=!0}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(m){return i(this._formatError("Invalid DSN "+m.message,"EENVELOPE",!1,"API"))}if(this._responseActions.push((m)=>{this._actionMAIL(m,i)}),v&&this._supportedExtensions.includes("SMTPUTF8"))x.push("SMTPUTF8"),this._usingSmtpUtf8=!0;if(this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME"))x.push("BODY=8BITMIME"),this._using8BitMime=!0;if(this._envelope.size&&this._supportedExtensions.includes("SIZE"))x.push("SIZE="+this._envelope.size);if(this._envelope.dsn&&this._supportedExtensions.includes("DSN")){if(this._envelope.dsn.ret)x.push("RET="+t.encodeXText(this._envelope.dsn.ret));if(this._envelope.dsn.envid)x.push("ENVID="+t.encodeXText(this._envelope.dsn.envid))}this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(x.length?" "+x.join(" "):""))}_setDsnEnvelope(p){let i=(p.ret||p.return||"").toString().toUpperCase()||null;if(i)switch(i){case"HDRS":case"HEADERS":i="HDRS";break;case"FULL":case"BODY":i="FULL";break}if(i&&!["FULL","HDRS"].includes(i))throw new Error("ret: "+JSON.stringify(i));let x=(p.envid||p.id||"").toString()||null,v=p.notify||null;if(v){if(typeof v==="string")v=v.split(",");v=v.map((l)=>l.trim().toUpperCase());let f=["NEVER","SUCCESS","FAILURE","DELAY"];if(v.filter((l)=>!f.includes(l)).length||v.length>1&&v.includes("NEVER"))throw new Error("notify: "+JSON.stringify(v.join(",")));v=v.join(",")}let m=(p.recipient||p.orcpt||"").toString()||null;if(m&&m.indexOf(";")<0)m="rfc822;"+m;return{ret:i,envid:x,notify:v,orcpt:m}}_getDsnRcptToArgs(){let p=[];if(this._envelope.dsn&&this._supportedExtensions.includes("DSN")){if(this._envelope.dsn.notify)p.push("NOTIFY="+t.encodeXText(this._envelope.dsn.notify));if(this._envelope.dsn.orcpt)p.push("ORCPT="+t.encodeXText(this._envelope.dsn.orcpt))}return p.length?" "+p.join(" "):""}_createSendStream(p){let i=new tw,x;if(this.options.lmtp)this._envelope.accepted.forEach((v,m)=>{let f=m===this._envelope.accepted.length-1;this._responseActions.push((w)=>{this._actionLMTPStream(v,f,w,p)})});else this._responseActions.push((v)=>{this._actionSMTPStream(v,p)});if(i.pipe(this._socket,{end:!1}),this.options.debug)x=new _v,x.on("readable",()=>{let v;while(v=x.read())this.logger.debug({tnx:"message"},v.toString("binary").replace(/\r?\n$/,""))}),i.pipe(x);return i.once("end",()=>{this.logger.info({tnx:"message",inByteCount:i.inByteCount,outByteCount:i.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",i.outByteCount,i.inByteCount)}),i}_actionGreeting(p){if(clearTimeout(this._greetingTimeout),p.substr(0,3)!=="220"){this._onError(new Error("Invalid greeting. response="+p),"EPROTOCOL",p,"CONN");return}if(this.options.lmtp)this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name);else this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)}_actionLHLO(p){if(p.charAt(0)!=="2"){this._onError(new Error("Invalid LHLO. response="+p),"EPROTOCOL",p,"LHLO");return}this._actionEHLO(p)}_actionEHLO(p){let i;if(p.substr(0,3)==="421"){this._onError(new Error("Server terminates connection. response="+p),"ECONNECTION",p,"EHLO");return}if(p.charAt(0)!=="2"){if(this.options.requireTLS){this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+p),"ECONNECTION",p,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=p.split(/\r?\n/).map((x)=>x.replace(/^\d+[ -]/,"").trim()).filter((x)=>x).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(p)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}if(/[ -]SMTPUTF8\b/im.test(p))this._supportedExtensions.push("SMTPUTF8");if(/[ -]DSN\b/im.test(p))this._supportedExtensions.push("DSN");if(/[ -]8BITMIME\b/im.test(p))this._supportedExtensions.push("8BITMIME");if(/[ -]PIPELINING\b/im.test(p))this._supportedExtensions.push("PIPELINING");if(/[ -]AUTH\b/i.test(p))this.allowsAuth=!0;if(/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(p))this._supportedAuth.push("PLAIN");if(/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(p))this._supportedAuth.push("LOGIN");if(/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(p))this._supportedAuth.push("CRAM-MD5");if(/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(p))this._supportedAuth.push("XOAUTH2");if(i=p.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(i[1])||0;this.emit("connect")}_actionHELO(p){if(p.charAt(0)!=="2"){this._onError(new Error("Invalid HELO. response="+p),"EPROTOCOL",p,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(p){if(p.charAt(0)!=="2"){if(this.options.opportunisticTLS)return this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect");this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",p,"STARTTLS");return}this._upgradeConnection((i,x)=>{if(i){this._onError(new Error("Error initiating TLS - "+(i.message||i)),"ETLS",!1,"STARTTLS");return}if(this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),x)if(this.options.lmtp)this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name);else this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name);else this.emit("connect")})}_actionAUTH_LOGIN_USER(p,i){if(!/^334[ -]/.test(p)){i(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",p,"AUTH LOGIN"));return}this._responseActions.push((x)=>{this._actionAUTH_LOGIN_PASS(x,i)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(p,i){let x=p.match(/^334\s+(.+)$/),v="";if(!x)return i(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",p,"AUTH CRAM-MD5"));else v=x[1];let m=Buffer.from(v,"base64").toString("ascii"),f=$v.createHmac("md5",this._auth.credentials.pass);f.update(m);let w=this._auth.credentials.user+" "+f.digest("hex");this._responseActions.push((l)=>{this._actionAUTH_CRAM_MD5_PASS(l,i)}),this._sendCommand(Buffer.from(w).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(p,i){if(!p.match(/^235\s+/))return i(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",p,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0)}_actionAUTH_LOGIN_PASS(p,i){if(!/^334[ -]/.test(p))return i(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",p,"AUTH LOGIN"));this._responseActions.push((x)=>{this._actionAUTHComplete(x,i)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(p,i,x){if(!x&&typeof i==="function")x=i,i=!1;if(p.substr(0,3)==="334"){this._responseActions.push((v)=>{if(i||this._authMethod!=="XOAUTH2")this._actionAUTHComplete(v,!0,x);else setImmediate(()=>this._handleXOauth2Token(!0,x))}),this._sendCommand("");return}if(p.charAt(0)!=="2")return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),x(this._formatError("Invalid login","EAUTH",p,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,x(null,!0)}_actionMAIL(p,i){let x,v;if(Number(p.charAt(0))!==2){if(this._usingSmtpUtf8&&/^550 /.test(p)&&/[\x80-\uFFFF]/.test(this._envelope.from))x="Internationalized mailbox name not allowed";else x="Mail command failed";return i(this._formatError(x,"EENVELOPE",p,"MAIL FROM"))}if(!this._envelope.rcptQueue.length)return i(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"));else if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))while(this._envelope.rcptQueue.length)v=this._envelope.rcptQueue.shift(),this._recipientQueue.push(v),this._responseActions.push((m)=>{this._actionRCPT(m,i)}),this._sendCommand("RCPT TO:<"+v+">"+this._getDsnRcptToArgs());else v=this._envelope.rcptQueue.shift(),this._recipientQueue.push(v),this._responseActions.push((m)=>{this._actionRCPT(m,i)}),this._sendCommand("RCPT TO:<"+v+">"+this._getDsnRcptToArgs())}_actionRCPT(p,i){let x,v,m=this._recipientQueue.shift();if(Number(p.charAt(0))!==2){if(this._usingSmtpUtf8&&/^553 /.test(p)&&/[\x80-\uFFFF]/.test(m))x="Internationalized mailbox name not allowed";else x="Recipient command failed";this._envelope.rejected.push(m),v=this._formatError(x,"EENVELOPE",p,"RCPT TO"),v.recipient=m,this._envelope.rejectedErrors.push(v)}else this._envelope.accepted.push(m);if(!this._envelope.rcptQueue.length&&!this._recipientQueue.length)if(this._envelope.rejected.length<this._envelope.to.length)this._responseActions.push((f)=>{this._actionDATA(f,i)}),this._sendCommand("DATA");else return v=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",p,"RCPT TO"),v.rejected=this._envelope.rejected,v.rejectedErrors=this._envelope.rejectedErrors,i(v);else if(this._envelope.rcptQueue.length)m=this._envelope.rcptQueue.shift(),this._recipientQueue.push(m),this._responseActions.push((f)=>{this._actionRCPT(f,i)}),this._sendCommand("RCPT TO:<"+m+">"+this._getDsnRcptToArgs())}_actionDATA(p,i){if(!/^[23]/.test(p))return i(this._formatError("Data command failed","EENVELOPE",p,"DATA"));let x={accepted:this._envelope.accepted,rejected:this._envelope.rejected};if(this._ehloLines&&this._ehloLines.length)x.ehlo=this._ehloLines;if(this._envelope.rejectedErrors.length)x.rejectedErrors=this._envelope.rejectedErrors;i(null,x)}_actionSMTPStream(p,i){if(Number(p.charAt(0))!==2)return i(this._formatError("Message failed","EMESSAGE",p,"DATA"));else return i(null,p)}_actionLMTPStream(p,i,x,v){let m;if(Number(x.charAt(0))!==2){m=this._formatError("Message failed for recipient "+p,"EMESSAGE",x,"DATA"),m.recipient=p,this._envelope.rejected.push(p),this._envelope.rejectedErrors.push(m);for(let f=0,w=this._envelope.accepted.length;f<w;f++)if(this._envelope.accepted[f]===p)this._envelope.accepted.splice(f,1)}if(i)return v(null,x)}_handleXOauth2Token(p,i){this._auth.oauth2.getToken(p,(x,v)=>{if(x)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),i(this._formatError(x,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push((m)=>{this._actionAUTHComplete(m,p,i)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(v),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(p){if(this._destroyed)return"Cannot "+p+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+p+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+p+" - smtp connection socket is already half-closed."}}_getHostname(){let p;try{p=uw.hostname()||""}catch(i){p="localhost"}if(!p||p.indexOf(".")<0)p="[127.0.0.1]";if(p.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/))p="["+p+"]";return p}}Qv.exports=Gv});var Bi=A((i2,Xv)=>{var sw=Y("stream").Stream,rw=Dp(),ew=Y("crypto"),pl=D();class Jv extends sw{constructor(p,i){super();if(this.options=p||{},p&&p.serviceClient){if(!p.privateKey||!p.user){setImmediate(()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!')));return}let x=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=x||300}if(this.logger=pl.getLogger({logger:i},{component:this.options.component||"OAuth2"}),this.provisionCallback=typeof this.options.provisionCallback==="function"?this.options.provisionCallback:!1,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let x=Math.max(Number(this.options.timeout)||0,0);this.expires=x&&Date.now()+x*1000||0}}getToken(p,i){if(!p&&this.accessToken&&(!this.expires||this.expires>Date.now()))return i(null,this.accessToken);let x=(...v)=>{if(v[0])this.logger.error({err:v[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user);else this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user);i(...v)};if(this.provisionCallback)this.provisionCallback(this.options.user,!!p,(v,m,f)=>{if(!v&&m)this.accessToken=m,this.expires=f||0;x(v,m)});else this.generateToken(x)}updateToken(p,i){this.accessToken=p,i=Math.max(Number(i)||0,0),this.expires=i&&Date.now()+i*1000||0,this.emit("token",{user:this.options.user,accessToken:p||"",expires:this.expires})}generateToken(p){let i,x;if(this.options.serviceClient){let v=Math.floor(Date.now()/1000),m={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:v,exp:v+this.options.serviceRequestTimeout},f;try{f=this.jwtSignRS256(m)}catch(w){return p(new Error("Can't generate token. Check your auth options"))}i={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:f},x={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:m}}else{if(!this.options.refreshToken)return p(new Error("Can't create new access token for user"));i={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},x={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach((v)=>{i[v]=this.options.customParams[v],x[v]=this.options.customParams[v]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(x)),this.postRequest(this.options.accessUrl,i,this.options,(v,m)=>{let f;if(v)return p(v);try{f=JSON.parse(m.toString())}catch(l){return p(l)}if(!f||typeof f!=="object")return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(m||"").toString()),p(new Error("Invalid authentication response"));let w={};if(Object.keys(f).forEach((l)=>{if(l!=="access_token")w[l]=f[l];else w[l]=(f[l]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(w)),f.error){let l=f.error;if(f.error_description)l+=": "+f.error_description;if(f.error_uri)l+=" ("+f.error_uri+")";return p(new Error(l))}if(f.access_token)return this.updateToken(f.access_token,f.expires_in),p(null,this.accessToken);return p(new Error("No access token"))})}buildXOAuth2Token(p){let i=["user="+(this.options.user||""),"auth=Bearer "+(p||this.accessToken),"",""];return Buffer.from(i.join("\x01"),"utf-8").toString("base64")}postRequest(p,i,x,v){let m=!1,f=[],w=0,l=rw(p,{method:"post",headers:x.customHeaders,body:i,allowErrorResponse:!0});l.on("readable",()=>{let z;while((z=l.read())!==null)f.push(z),w+=z.length}),l.once("error",(z)=>{if(m)return;return m=!0,v(z)}),l.once("end",()=>{if(m)return;return m=!0,v(null,Buffer.concat(f,w))})}toBase64URL(p){if(typeof p==="string")p=Buffer.from(p);return p.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(p){p=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(p)].map((x)=>this.toBase64URL(x)).join(".");let i=ew.createSign("RSA-SHA256").update(p).sign(this.options.privateKey);return p+"."+this.toBase64URL(i)}}Xv.exports=Jv});var Wv=A((x2,Bv)=>{var il=np(),xl=D().assign,vl=Bi(),ml=Y("events");class Yv extends ml{constructor(p){super();if(this.pool=p,this.options=p.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let i=new vl(this.options.auth,this.logger);i.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||i.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:i,method:"XOAUTH2"},i.on("token",(x)=>this.pool.mailer.emit("token",x)),i.on("error",(x)=>this.emit("error",x));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(p){this.pool.getSocket(this.options,(i,x)=>{if(i)return p(i);let v=!1,m=this.options;if(x&&x.connection)this.logger.info({tnx:"proxy",remoteAddress:x.connection.remoteAddress,remotePort:x.connection.remotePort,destHost:m.host||"",destPort:m.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",x.connection.remoteAddress,x.connection.remotePort,m.host||"",m.port||""),m=xl(!1,m),Object.keys(x).forEach((f)=>{m[f]=x[f]});this.connection=new il(m),this.connection.once("error",(f)=>{if(this.emit("error",f),v)return;return v=!0,p(f)}),this.connection.once("end",()=>{if(this.close(),v)return;v=!0;let f=setTimeout(()=>{if(v)return;let w=new Error("Unexpected socket close");if(this.connection&&this.connection._socket&&this.connection._socket.upgrading)w.code="ETLS";p(w)},1000);try{f.unref()}catch(w){}}),this.connection.connect(()=>{if(v)return;if(this.auth&&(this.connection.allowsAuth||m.forceAuth))this.connection.login(this.auth,(f)=>{if(v)return;if(v=!0,f)return this.connection.close(),this.emit("error",f),p(f);this._connected=!0,p(null,!0)});else return v=!0,this._connected=!0,p(null,!0)})})}send(p,i){if(!this._connected)return this.connect((f)=>{if(f)return i(f);return this.send(p,i)});let x=p.message.getEnvelope(),v=p.message.messageId(),m=[].concat(x.to||[]);if(m.length>3)m.push("...and "+m.splice(2).length+" more");if(this.logger.info({tnx:"send",messageId:v,cid:this.id},"Sending message %s using #%s to <%s>",v,this.id,m.join(", ")),p.data.dsn)x.dsn=p.data.dsn;this.connection.send(x,p.message.createReadStream(),(f,w)=>{if(this.messages++,f)return this.connection.close(),this.emit("error",f),i(f);w.envelope={from:x.from,to:x.to},w.messageId=v,setImmediate(()=>{let l;if(this.messages>=this.options.maxMessages)l=new Error("Resource exhausted"),l.code="EMAXLIMIT",this.connection.close(),this.emit("error",l);else this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),i(null,w)})}close(){if(this._connected=!1,this.auth&&this.auth.oauth2)this.auth.oauth2.removeAllListeners();if(this.connection)this.connection.close();this.emit("close")}}Bv.exports=Yv});var Hv=A((v2,fl)=>{fl.exports={"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},Aliyun:{domains:["aliyun.com"],host:"smtp.aliyun.com",port:465,secure:!0},AOL:{domains:["aol.com"],host:"smtp.aol.com",port:587},Bluewin:{host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},DebugMail:{host:"debugmail.io",port:25},DynectEmail:{aliases:["Dynect"],host:"smtp.dynect.net",port:25},Ethereal:{aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},FastMail:{domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},"Feishu Mail":{aliases:["Feishu","FeishuMail"],domains:["www.feishu.cn"],host:"smtp.feishu.cn",port:465,secure:!0},GandiMail:{aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},Gmail:{aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},Godaddy:{host:"smtpout.secureserver.net",port:25},GodaddyAsia:{host:"smtp.asia.secureserver.net",port:25},GodaddyEurope:{host:"smtp.europe.secureserver.net",port:25},"hot.ee":{host:"mail.hot.ee"},Hotmail:{aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},iCloud:{aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},Infomaniak:{host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},Loopia:{host:"mailcluster.loopia.se",port:465},"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},"Mailcatch.app":{host:"sandbox-smtp.mailcatch.app",port:2525},Maildev:{port:1025,ignoreTLS:!0},Mailgun:{host:"smtp.mailgun.org",port:465,secure:!0},Mailjet:{host:"in.mailjet.com",port:587},Mailosaur:{host:"mailosaur.io",port:25},Mailtrap:{host:"live.smtp.mailtrap.io",port:587},Mandrill:{host:"smtp.mandrillapp.com",port:587},Naver:{host:"smtp.naver.com",port:587},One:{host:"send.one.com",port:465,secure:!0},OpenMailBox:{aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Outlook365:{host:"smtp.office365.com",port:587,secure:!1},OhMySMTP:{host:"smtp.ohmysmtp.com",port:587,secure:!1},Postmark:{aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},Proton:{aliases:["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],domains:["proton.me","protonmail.com","pm.me","protonmail.ch"],host:"smtp.protonmail.ch",port:587,requireTLS:!0},"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:{domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},QQex:{aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},SendCloud:{host:"smtp.sendcloud.net",port:2525},SendGrid:{host:"smtp.sendgrid.net",port:587},SendinBlue:{aliases:["Brevo"],host:"smtp-relay.brevo.com",port:587},SendPulse:{host:"smtp-pulse.com",port:465,secure:!0},SES:{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTH-1":{host:"email-smtp.ap-south-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-1":{host:"email-smtp.ap-northeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-2":{host:"email-smtp.ap-northeast-2.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-3":{host:"email-smtp.ap-northeast-3.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-1":{host:"email-smtp.ap-southeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-2":{host:"email-smtp.ap-southeast-2.amazonaws.com",port:465,secure:!0},Seznam:{aliases:["Seznam Email"],domains:["seznam.cz","email.cz","post.cz","spoluzaci.cz"],host:"smtp.seznam.cz",port:465,secure:!0},Sparkpost:{aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Tipimail:{host:"smtp.tipimail.com",port:587},Yahoo:{domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},Yandex:{domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},Zoho:{host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"},"126":{host:"smtp.126.com",port:465,secure:!0},"163":{host:"smtp.163.com",port:465,secure:!0}}});var Hi=A((m2,Mv)=>{var av=Hv(),dp={};Object.keys(av).forEach((p)=>{let i=av[p];dp[yp(p)]=Wi(i),[].concat(i.aliases||[]).forEach((x)=>{dp[yp(x)]=Wi(i)}),[].concat(i.domains||[]).forEach((x)=>{dp[yp(x)]=Wi(i)})});function yp(p){return p.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function Wi(p){let i=["domains","aliases"],x={};return Object.keys(p).forEach((v)=>{if(i.indexOf(v)<0)x[v]=p[v]}),x}Mv.exports=function(p){return p=yp(p.split("@").pop()),dp[p]||!1}});var Rv=A((f2,cv)=>{var wl=Y("events"),Vv=Wv(),Uv=np(),ll=Hi(),Ep=D(),zl=I();class Av extends wl{constructor(p){super();if(p=p||{},typeof p==="string")p={url:p};let i,x=p.service;if(typeof p.getSocket==="function")this.getSocket=p.getSocket;if(p.url)i=Ep.parseConnectionUrl(p.url),x=x||i.service;this.options=Ep.assign(!1,p,i,x&&ll(x)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=Ep.getLogger(this.options,{component:this.options.component||"smtp-pool"});let v=new Uv(this.options);this.name="SMTP (pool)",this.version=zl.version+"[client:"+v.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1000,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{if(this.idling)this.emit("idle")})}getSocket(p,i){return setImmediate(()=>i(null,!1))}send(p,i){if(this._closed)return!1;if(this._queue.push({mail:p,requeueAttempts:0,callback:i}),this.idling&&this._queue.length>=this.options.maxConnections)this.idling=!1;return setImmediate(()=>this._processMessages()),!0}close(){let p,i=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!i&&!this._queue.length)return;for(let v=i-1;v>=0;v--)if(this._connections[v]&&this._connections[v].available)p=this._connections[v],p.close(),this.logger.info({tnx:"connection",cid:p.id,action:"removed"},"Connection #%s removed",p.id);if(i&&!this._connections.length)this.logger.debug({tnx:"connection"},"All connections removed");if(!this._queue.length)return;let x=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let v=this._queue.shift();if(v&&typeof v.callback==="function")try{v.callback(new Error("Connection pool was closed"))}catch(m){this.logger.error({err:m,tnx:"callback",cid:p.id},"Callback error for #%s: %s",p.id,m.message)}setImmediate(x)};setImmediate(x)}_processMessages(){let p,i,x;if(this._closed)return;if(!this._queue.length){if(!this.idling)this.idling=!0,this.emit("idle");return}for(i=0,x=this._connections.length;i<x;i++)if(this._connections[i].available){p=this._connections[i];break}if(!p&&this._connections.length<this.options.maxConnections)p=this._createConnection();if(!p){this.idling=!1;return}if(!this.idling&&this._queue.length<this.options.maxConnections)this.idling=!0,this.emit("idle");let v=p.queueEntry=this._queue.shift();if(v.messageId=(p.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),p.available=!1,this.logger.debug({tnx:"pool",cid:p.id,messageId:v.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",v.messageId,p.id,p.messages+1),this._rateLimit.limit){if(this._rateLimit.counter++,!this._rateLimit.checkpoint)this._rateLimit.checkpoint=Date.now()}p.send(v.mail,(m,f)=>{if(v===p.queueEntry){try{v.callback(m,f)}catch(w){this.logger.error({err:w,tnx:"callback",cid:p.id},"Callback error for #%s: %s",p.id,w.message)}p.queueEntry=!1}})}_createConnection(){let p=new Vv(this);return p.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:p.id,action:"conection"},"Created new pool resource #%s",p.id),p.on("available",()=>{if(this.logger.debug({tnx:"connection",cid:p.id,action:"available"},"Connection #%s became available",p.id),this._closed)this.close();else this._processMessages()}),p.once("error",(i)=>{if(i.code!=="EMAXLIMIT")this.logger.error({err:i,tnx:"pool",cid:p.id},"Pool Error for #%s: %s",p.id,i.message);else this.logger.debug({tnx:"pool",cid:p.id,action:"maxlimit"},"Max messages limit exchausted for #%s",p.id);if(p.queueEntry){try{p.queueEntry.callback(i)}catch(x){this.logger.error({err:x,tnx:"callback",cid:p.id},"Callback error for #%s: %s",p.id,x.message)}p.queueEntry=!1}this._removeConnection(p),this._continueProcessing()}),p.once("close",()=>{if(this.logger.info({tnx:"connection",cid:p.id,action:"closed"},"Connection #%s was closed",p.id),this._removeConnection(p),p.queueEntry)setTimeout(()=>{if(p.queueEntry)if(this._shouldRequeuOnConnectionClose(p.queueEntry))this._requeueEntryOnConnectionClose(p);else this._failDeliveryOnConnectionClose(p);this._continueProcessing()},50);else this._continueProcessing()}),this._connections.push(p),p}_shouldRequeuOnConnectionClose(p){if(this.options.maxRequeues===void 0||this.options.maxRequeues<0)return!0;return p.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(p){if(p.queueEntry&&p.queueEntry.callback){try{p.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(i){this.logger.error({err:i,tnx:"callback",messageId:p.queueEntry.messageId,cid:p.id},"Callback error for #%s: %s",p.id,i.message)}p.queueEntry=!1}}_requeueEntryOnConnectionClose(p){p.queueEntry.requeueAttempts=p.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:p.id,messageId:p.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",p.queueEntry.messageId,p.id,p.queueEntry.requeueAttempts),this._queue.unshift(p.queueEntry),p.queueEntry=!1}_continueProcessing(){if(this._closed)this.close();else setTimeout(()=>this._processMessages(),100)}_removeConnection(p){let i=this._connections.indexOf(p);if(i!==-1)this._connections.splice(i,1)}_checkRateLimit(p){if(!this._rateLimit.limit)return p();let i=Date.now();if(this._rateLimit.counter<this._rateLimit.limit)return p();if(this._rateLimit.waiting.push(p),this._rateLimit.checkpoint<=i-this._rateLimit.delta)return this._clearRateLimit();else if(!this._rateLimit.timeout)this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(i-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=i}_clearRateLimit(){clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;while(this._rateLimit.waiting.length){let p=this._rateLimit.waiting.shift();setImmediate(p)}}isIdle(){return this.idling}verify(p){let i;if(!p)i=new Promise((v,m)=>{p=Ep.callbackPromise(v,m)});let x=new Vv(this).auth;return this.getSocket(this.options,(v,m)=>{if(v)return p(v);let f=this.options;if(m&&m.connection)this.logger.info({tnx:"proxy",remoteAddress:m.connection.remoteAddress,remotePort:m.connection.remotePort,destHost:f.host||"",destPort:f.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",m.connection.remoteAddress,m.connection.remotePort,f.host||"",f.port||""),f=Ep.assign(!1,f),Object.keys(m).forEach((j)=>{f[j]=m[j]});let w=new Uv(f),l=!1;w.once("error",(j)=>{if(l)return;return l=!0,w.close(),p(j)}),w.once("end",()=>{if(l)return;return l=!0,p(new Error("Connection closed"))});let z=()=>{if(l)return;return l=!0,w.quit(),p(null,!0)};w.connect(()=>{if(l)return;if(x&&(w.allowsAuth||f.forceAuth))w.login(x,(j)=>{if(l)return;if(j)return l=!0,w.close(),p(j);z()});else if(!x&&w.allowsAuth&&f.forceAuth){let j=new Error("Authentication info was not provided");return j.code="NoAuth",l=!0,w.close(),p(j)}else z()})}),i}}cv.exports=Av});var Fv=A((w2,Sv)=>{var jl=Y("events"),ai=np(),ql=Hi(),Vp=D(),gl=Bi(),$l=I();class bv extends jl{constructor(p){super();if(p=p||{},typeof p==="string")p={url:p};let i,x=p.service;if(typeof p.getSocket==="function")this.getSocket=p.getSocket;if(p.url)i=Vp.parseConnectionUrl(p.url),x=x||i.service;this.options=Vp.assign(!1,p,i,x&&ql(x)),this.logger=Vp.getLogger(this.options,{component:this.options.component||"smtp-transport"});let v=new ai(this.options);if(this.name="SMTP",this.version=$l.version+"[client:"+v.version+"]",this.options.auth)this.auth=this.getAuth({})}getSocket(p,i){return setImmediate(()=>i(null,!1))}getAuth(p){if(!p)return this.auth;let i=!1,x={};if(this.options.auth&&typeof this.options.auth==="object")Object.keys(this.options.auth).forEach((v)=>{i=!0,x[v]=this.options.auth[v]});if(p&&typeof p==="object")Object.keys(p).forEach((v)=>{i=!0,x[v]=p[v]});if(!i)return!1;switch((x.type||"").toString().toUpperCase()){case"OAUTH2":{if(!x.service&&!x.user)return!1;let v=new gl(x,this.logger);return v.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||v.provisionCallback,v.on("token",(m)=>this.mailer.emit("token",m)),v.on("error",(m)=>this.emit("error",m)),{type:"OAUTH2",user:x.user,oauth2:v,method:"XOAUTH2"}}default:return{type:(x.type||"").toString().toUpperCase()||"LOGIN",user:x.user,credentials:{user:x.user||"",pass:x.pass,options:x.options},method:(x.method||"").trim().toUpperCase()||this.options.authMethod||!1}}}send(p,i){this.getSocket(this.options,(x,v)=>{if(x)return i(x);let m=!1,f=this.options;if(v&&v.connection)this.logger.info({tnx:"proxy",remoteAddress:v.connection.remoteAddress,remotePort:v.connection.remotePort,destHost:f.host||"",destPort:f.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",v.connection.remoteAddress,v.connection.remotePort,f.host||"",f.port||""),f=Vp.assign(!1,f),Object.keys(v).forEach((z)=>{f[z]=v[z]});let w=new ai(f);w.once("error",(z)=>{if(m)return;return m=!0,w.close(),i(z)}),w.once("end",()=>{if(m)return;let z=setTimeout(()=>{if(m)return;m=!0;let j=new Error("Unexpected socket close");if(w&&w._socket&&w._socket.upgrading)j.code="ETLS";i(j)},1000);try{z.unref()}catch(j){}});let l=()=>{let z=p.message.getEnvelope(),j=p.message.messageId(),q=[].concat(z.to||[]);if(q.length>3)q.push("...and "+q.splice(2).length+" more");if(p.data.dsn)z.dsn=p.data.dsn;this.logger.info({tnx:"send",messageId:j},"Sending message %s to <%s>",j,q.join(", ")),w.send(z,p.message.createReadStream(),($,g)=>{if(m=!0,w.close(),$)return this.logger.error({err:$,tnx:"send"},"Send error for %s: %s",j,$.message),i($);g.envelope={from:z.from,to:z.to},g.messageId=j;try{return i(null,g)}catch(X){this.logger.error({err:X,tnx:"callback"},"Callback error for %s: %s",j,X.message)}})};w.connect(()=>{if(m)return;let z=this.getAuth(p.data.auth);if(z&&(w.allowsAuth||f.forceAuth))w.login(z,(j)=>{if(z&&z!==this.auth&&z.oauth2)z.oauth2.removeAllListeners();if(m)return;if(j)return m=!0,w.close(),i(j);l()});else l()})})}verify(p){let i;if(!p)i=new Promise((x,v)=>{p=Vp.callbackPromise(x,v)});return this.getSocket(this.options,(x,v)=>{if(x)return p(x);let m=this.options;if(v&&v.connection)this.logger.info({tnx:"proxy",remoteAddress:v.connection.remoteAddress,remotePort:v.connection.remotePort,destHost:m.host||"",destPort:m.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",v.connection.remoteAddress,v.connection.remotePort,m.host||"",m.port||""),m=Vp.assign(!1,m),Object.keys(v).forEach((z)=>{m[z]=v[z]});let f=new ai(m),w=!1;f.once("error",(z)=>{if(w)return;return w=!0,f.close(),p(z)}),f.once("end",()=>{if(w)return;return w=!0,p(new Error("Connection closed"))});let l=()=>{if(w)return;return w=!0,f.quit(),p(null,!0)};f.connect(()=>{if(w)return;let z=this.getAuth({});if(z&&(f.allowsAuth||m.forceAuth))f.login(z,(j)=>{if(w)return;if(j)return w=!0,f.close(),p(j);l()});else if(!z&&f.allowsAuth&&m.forceAuth){let j=new Error("Authentication info was not provided");return j.code="NoAuth",w=!0,f.close(),p(j)}else l()})}),i}close(){if(this.auth&&this.auth.oauth2)this.auth.oauth2.removeAllListeners();this.emit("close")}}Sv.exports=bv});var Ov=A((l2,Lv)=>{var _l=Y("child_process").spawn,Gl=I(),Ql=D();class Dv{constructor(p){if(p=p||{},this._spawn=_l,this.options=p||{},this.name="Sendmail",this.version=Gl.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=Ql.getLogger(this.options,{component:this.options.component||"sendmail"}),p){if(typeof p==="string")this.path=p;else if(typeof p==="object"){if(p.path)this.path=p.path;if(Array.isArray(p.args))this.args=p.args;this.winbreak=["win","windows","dos",`\r
`].includes((p.newline||"").toString().toLowerCase())}}}send(p,i){p.message.keepBcc=!0;let x=p.data.envelope||p.message.getEnvelope(),v=p.message.messageId(),m,f,w;if([].concat(x.from||[]).concat(x.to||[]).some((j)=>/^-/.test(j)))return i(new Error("Can not send mail. Invalid envelope addresses."));if(this.args)m=["-i"].concat(this.args).concat(x.to);else m=["-i"].concat(x.from?["-f",x.from]:[]).concat(x.to);let z=(j)=>{if(w)return;if(w=!0,typeof i==="function")if(j)return i(j);else return i(null,{envelope:p.data.envelope||p.message.getEnvelope(),messageId:v,response:"Messages queued for delivery"})};try{f=this._spawn(this.path,m)}catch(j){return this.logger.error({err:j,tnx:"spawn",messageId:v},"Error occurred while spawning sendmail. %s",j.message),z(j)}if(f){f.on("error",($)=>{this.logger.error({err:$,tnx:"spawn",messageId:v},"Error occurred when sending message %s. %s",v,$.message),z($)}),f.once("exit",($)=>{if(!$)return z();let g;if($===127)g=new Error("Sendmail command not found, process exited with code "+$);else g=new Error("Sendmail exited with code "+$);this.logger.error({err:g,tnx:"stdin",messageId:v},"Error sending message %s to sendmail. %s",v,g.message),z(g)}),f.once("close",z),f.stdin.on("error",($)=>{this.logger.error({err:$,tnx:"stdin",messageId:v},"Error occurred when piping message %s to sendmail. %s",v,$.message),z($)});let j=[].concat(x.to||[]);if(j.length>3)j.push("...and "+j.splice(2).length+" more");this.logger.info({tnx:"send",messageId:v},"Sending message %s to <%s>",v,j.join(", "));let q=p.message.createReadStream();q.once("error",($)=>{this.logger.error({err:$,tnx:"stdin",messageId:v},"Error occurred when generating message %s. %s",v,$.message),f.kill("SIGINT"),z($)}),q.pipe(f.stdin)}else return z(new Error("sendmail was not found"))}}Lv.exports=Dv});var Nv=A((z2,Cv)=>{var Jl=I(),Xl=D();class Kv{constructor(p){p=p||{},this.options=p||{},this.name="StreamTransport",this.version=Jl.version,this.logger=Xl.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos",`\r
`].includes((p.newline||"").toString().toLowerCase())}send(p,i){p.message.keepBcc=!0;let x=p.data.envelope||p.message.getEnvelope(),v=p.message.messageId(),m=[].concat(x.to||[]);if(m.length>3)m.push("...and "+m.splice(2).length+" more");this.logger.info({tnx:"send",messageId:v},"Sending message %s to <%s> using %s line breaks",v,m.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let f;try{f=p.message.createReadStream()}catch(z){return this.logger.error({err:z,tnx:"send",messageId:v},"Creating send stream failed for %s. %s",v,z.message),i(z)}if(!this.options.buffer)return f.once("error",(z)=>{this.logger.error({err:z,tnx:"send",messageId:v},"Failed creating message for %s. %s",v,z.message)}),i(null,{envelope:p.data.envelope||p.message.getEnvelope(),messageId:v,message:f});let w=[],l=0;f.on("readable",()=>{let z;while((z=f.read())!==null)w.push(z),l+=z.length}),f.once("error",(z)=>{return this.logger.error({err:z,tnx:"send",messageId:v},"Failed creating message for %s. %s",v,z.message),i(z)}),f.on("end",()=>i(null,{envelope:p.data.envelope||p.message.getEnvelope(),messageId:v,message:Buffer.concat(w,l)}))})}}Cv.exports=Kv});var Tv=A((j2,Iv)=>{var Yl=I(),Bl=D();class Ev{constructor(p){p=p||{},this.options=p||{},this.name="JSONTransport",this.version=Yl.version,this.logger=Bl.getLogger(this.options,{component:this.options.component||"json-transport"})}send(p,i){p.message.keepBcc=!0;let x=p.data.envelope||p.message.getEnvelope(),v=p.message.messageId(),m=[].concat(x.to||[]);if(m.length>3)m.push("...and "+m.splice(2).length+" more");this.logger.info({tnx:"send",messageId:v},"Composing JSON structure of %s to <%s>",v,m.join(", ")),setImmediate(()=>{p.normalize((f,w)=>{if(f)return this.logger.error({err:f,tnx:"send",messageId:v},"Failed building JSON structure for %s. %s",v,f.message),i(f);return delete w.envelope,delete w.normalizedHeaders,i(null,{envelope:x,messageId:v,message:this.options.skipEncoding?w:JSON.stringify(w)})})})}}Iv.exports=Ev});var hv=A((q2,Zv)=>{var Wl=Y("events"),Hl=I(),Pv=D(),al=gi(),Ml=hp();class ov extends Wl{constructor(p){super();p=p||{},this.options=p||{},this.ses=this.options.SES,this.name="SESTransport",this.version=Hl.version,this.logger=Pv.getLogger(this.options,{component:this.options.component||"ses-transport"})}getRegion(p){if(this.ses.sesClient.config&&typeof this.ses.sesClient.config.region==="function")return this.ses.sesClient.config.region().then((i)=>p(null,i)).catch((i)=>p(i));return p(null,!1)}send(p,i){let x={ts:Date.now(),pending:!0},v=p.message._headers.find((z)=>/^from$/i.test(z.key));if(v){let z=new Ml("text/plain");v=z._convertAddresses(z._parseAddresses(v.value))}let m=p.data.envelope||p.message.getEnvelope(),f=p.message.messageId(),w=[].concat(m.to||[]);if(w.length>3)w.push("...and "+w.splice(2).length+" more");this.logger.info({tnx:"send",messageId:f},"Sending message %s to <%s>",f,w.join(", "));let l=(z)=>{if(!p.data._dkim)p.data._dkim={};if(p.data._dkim.skipFields&&typeof p.data._dkim.skipFields==="string")p.data._dkim.skipFields+=":date:message-id";else p.data._dkim.skipFields="date:message-id";let j=p.message.createReadStream(),q=j.pipe(new al),$=[],g=0;q.on("readable",()=>{let X;while((X=q.read())!==null)$.push(X),g+=X.length}),j.once("error",(X)=>q.emit("error",X)),q.once("error",(X)=>{z(X)}),q.once("end",()=>z(null,Buffer.concat($,g)))};setImmediate(()=>l((z,j)=>{if(z)return this.logger.error({err:z,tnx:"send",messageId:f},"Failed creating message for %s. %s",f,z.message),x.pending=!1,i(z);let q={Content:{Raw:{Data:j}},FromEmailAddress:v?v:m.from,Destination:{ToAddresses:m.to}};Object.keys(p.data.ses||{}).forEach(($)=>{q[$]=p.data.ses[$]}),this.getRegion(($,g)=>{if($||!g)g="us-east-1";let X=new this.ses.SendEmailCommand(q);this.ses.sesClient.send(X).then((c)=>{if(g==="us-east-1")g="email";x.pending=!0,i(null,{envelope:{from:m.from,to:m.to},messageId:"<"+c.MessageId+(!/@/.test(c.MessageId)?"@"+g+".amazonses.com":"")+">",response:c.MessageId,raw:j})}).catch((c)=>{this.logger.error({err:c,tnx:"send"},"Send error for %s: %s",f,c.message),x.pending=!1,i(c)})})}))}verify(p){let i;if(!p)i=new Promise((m,f)=>{p=Pv.callbackPromise(m,f)});let x=(m)=>{if(m&&!["InvalidParameterValue","MessageRejected"].includes(m.code||m.Code||m.name))return p(m);return p(null,!0)},v={Content:{Raw:{Data:Buffer.from(`From: <invalid@invalid>\r
To: <invalid@invalid>\r
 Subject: Invalid\r
\r
Invalid`)}},FromEmailAddress:"invalid@invalid",Destination:{ToAddresses:["invalid@invalid"]}};return this.getRegion((m,f)=>{if(m||!f)f="us-east-1";let w=new this.ses.SendEmailCommand(v);this.ses.sesClient.send(w).then((z)=>x(null,z)).catch((z)=>x(z))}),i}}Zv.exports=ov});var kv=A((Kl,kp)=>{var Vl=wv(),yv=D(),Ul=Rv(),Al=Fv(),cl=Ov(),Rl=Nv(),bl=Tv(),Sl=hv(),Fl=Dp(),nv=I(),Dl=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),Ll=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),dv=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,Ol=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),Ip=!1;Kl.createTransport=function(p,i){let x,v,m;if(typeof p==="object"&&typeof p.send!=="function"||typeof p==="string"&&/^(smtps?|direct):/i.test(p)){if(x=typeof p==="string"?p:p.url)v=yv.parseConnectionUrl(x);else v=p;if(v.pool)p=new Ul(v);else if(v.sendmail)p=new cl(v);else if(v.streamTransport)p=new Rl(v);else if(v.jsonTransport)p=new bl(v);else if(v.SES){if(v.SES.ses&&v.SES.aws){let f=new Error("Using legacy SES configuration, expecting @aws-sdk/client-sesv2, see https://nodemailer.com/transports/ses/");throw f.code="LegacyConfig",f}p=new Sl(v)}else p=new Al(v)}return m=new Vl(p,v,i),m};Kl.createTestAccount=function(p,i){let x;if(!i&&typeof p==="function")i=p,p=!1;if(!i)x=new Promise((z,j)=>{i=yv.callbackPromise(z,j)});if(Ol&&Ip)return setImmediate(()=>i(null,Ip)),x;p=p||Dl;let v=[],m=0,f={},w={requestor:nv.name,version:nv.version};if(dv)f.Authorization="Bearer "+dv;let l=Fl(p+"/user",{contentType:"application/json",method:"POST",headers:f,body:Buffer.from(JSON.stringify(w))});return l.on("readable",()=>{let z;while((z=l.read())!==null)v.push(z),m+=z.length}),l.once("error",(z)=>i(z)),l.once("end",()=>{let z=Buffer.concat(v,m),j,q;try{j=JSON.parse(z.toString())}catch($){q=$}if(q)return i(q);if(j.status!=="success"||j.error)return i(new Error(j.error||"Request failed"));delete j.status,Ip=j,i(null,Ip)}),x};Kl.getTestMessageUrl=function(p){if(!p||!p.response)return!1;let i=new Map;if(p.response.replace(/\[([^\]]+)\]$/,(x,v)=>{v.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(m,f,w)=>{i.set(f,w)})}),i.has("STATUS")&&i.has("MSGID"))return(Ip.web||Ll)+"/message/"+i.get("MSGID");return!1}});var B={};mm(B,{void:()=>Zm,util:()=>U,unknown:()=>Pm,union:()=>ym,undefined:()=>Em,tuple:()=>tm,transformer:()=>lf,symbol:()=>Nm,string:()=>Di,strictObject:()=>dm,setErrorMap:()=>zm,set:()=>em,record:()=>sm,quotelessJson:()=>wm,promise:()=>wf,preprocess:()=>qf,pipeline:()=>gf,ostring:()=>$f,optional:()=>zf,onumber:()=>_f,oboolean:()=>Gf,objectUtil:()=>sp,object:()=>nm,number:()=>Li,nullable:()=>jf,null:()=>Im,never:()=>om,nativeEnum:()=>ff,nan:()=>Om,map:()=>rm,makeIssue:()=>Up,literal:()=>vf,lazy:()=>xf,late:()=>Dm,isValid:()=>s,isDirty:()=>Pp,isAsync:()=>jp,isAborted:()=>Tp,intersection:()=>um,instanceof:()=>Lm,getParsedType:()=>P,getErrorMap:()=>zp,function:()=>pf,enum:()=>mf,effect:()=>lf,discriminatedUnion:()=>km,defaultErrorMap:()=>y,datetimeRegex:()=>bi,date:()=>Cm,custom:()=>Fi,coerce:()=>Qf,boolean:()=>Oi,bigint:()=>Km,array:()=>hm,any:()=>Tm,addIssueToContext:()=>Q,ZodVoid:()=>cp,ZodUnknown:()=>r,ZodUnion:()=>Qp,ZodUndefined:()=>_p,ZodType:()=>V,ZodTuple:()=>Z,ZodTransformer:()=>E,ZodSymbol:()=>Ap,ZodString:()=>O,ZodSet:()=>wp,ZodSchema:()=>V,ZodRecord:()=>Rp,ZodReadonly:()=>ap,ZodPromise:()=>lp,ZodPipeline:()=>Fp,ZodParsedType:()=>G,ZodOptional:()=>C,ZodObject:()=>R,ZodNumber:()=>e,ZodNullable:()=>u,ZodNull:()=>Gp,ZodNever:()=>o,ZodNativeEnum:()=>Bp,ZodNaN:()=>Sp,ZodMap:()=>bp,ZodLiteral:()=>Yp,ZodLazy:()=>Xp,ZodIssueCode:()=>_,ZodIntersection:()=>Jp,ZodFunction:()=>gp,ZodFirstPartyTypeKind:()=>H,ZodError:()=>L,ZodEnum:()=>ip,ZodEffects:()=>E,ZodDiscriminatedUnion:()=>op,ZodDefault:()=>Wp,ZodDate:()=>mp,ZodCatch:()=>Hp,ZodBranded:()=>Zp,ZodBoolean:()=>$p,ZodBigInt:()=>pp,ZodArray:()=>K,ZodAny:()=>fp,Schema:()=>V,ParseStatus:()=>b,OK:()=>S,NEVER:()=>Jf,INVALID:()=>W,EMPTY_PATH:()=>jm,DIRTY:()=>vp,BRAND:()=>Fm});var U;(function(p){p.assertEqual=(m)=>{};function i(m){}p.assertIs=i;function x(m){throw new Error}p.assertNever=x,p.arrayToEnum=(m)=>{let f={};for(let w of m)f[w]=w;return f},p.getValidEnumValues=(m)=>{let f=p.objectKeys(m).filter((l)=>typeof m[m[l]]!=="number"),w={};for(let l of f)w[l]=m[l];return p.objectValues(w)},p.objectValues=(m)=>{return p.objectKeys(m).map(function(f){return m[f]})},p.objectKeys=typeof Object.keys==="function"?(m)=>Object.keys(m):(m)=>{let f=[];for(let w in m)if(Object.prototype.hasOwnProperty.call(m,w))f.push(w);return f},p.find=(m,f)=>{for(let w of m)if(f(w))return w;return},p.isInteger=typeof Number.isInteger==="function"?(m)=>Number.isInteger(m):(m)=>typeof m==="number"&&Number.isFinite(m)&&Math.floor(m)===m;function v(m,f=" | "){return m.map((w)=>typeof w==="string"?`'${w}'`:w).join(f)}p.joinValues=v,p.jsonStringifyReplacer=(m,f)=>{if(typeof f==="bigint")return f.toString();return f}})(U||(U={}));var sp;(function(p){p.mergeShapes=(i,x)=>{return{...i,...x}}})(sp||(sp={}));var G=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),P=(p)=>{switch(typeof p){case"undefined":return G.undefined;case"string":return G.string;case"number":return Number.isNaN(p)?G.nan:G.number;case"boolean":return G.boolean;case"function":return G.function;case"bigint":return G.bigint;case"symbol":return G.symbol;case"object":if(Array.isArray(p))return G.array;if(p===null)return G.null;if(p.then&&typeof p.then==="function"&&p.catch&&typeof p.catch==="function")return G.promise;if(typeof Map!=="undefined"&&p instanceof Map)return G.map;if(typeof Set!=="undefined"&&p instanceof Set)return G.set;if(typeof Date!=="undefined"&&p instanceof Date)return G.date;return G.object;default:return G.unknown}};var _=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wm=(p)=>{return JSON.stringify(p,null,2).replace(/"([^"]+)":/g,"$1:")};class L extends Error{get errors(){return this.issues}constructor(p){super();this.issues=[],this.addIssue=(x)=>{this.issues=[...this.issues,x]},this.addIssues=(x=[])=>{this.issues=[...this.issues,...x]};let i=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,i);else this.__proto__=i;this.name="ZodError",this.issues=p}format(p){let i=p||function(m){return m.message},x={_errors:[]},v=(m)=>{for(let f of m.issues)if(f.code==="invalid_union")f.unionErrors.map(v);else if(f.code==="invalid_return_type")v(f.returnTypeError);else if(f.code==="invalid_arguments")v(f.argumentsError);else if(f.path.length===0)x._errors.push(i(f));else{let w=x,l=0;while(l<f.path.length){let z=f.path[l];if(l!==f.path.length-1)w[z]=w[z]||{_errors:[]};else w[z]=w[z]||{_errors:[]},w[z]._errors.push(i(f));w=w[z],l++}}};return v(this),x}static assert(p){if(!(p instanceof L))throw new Error(`Not a ZodError: ${p}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(p=(i)=>i.message){let i={},x=[];for(let v of this.issues)if(v.path.length>0)i[v.path[0]]=i[v.path[0]]||[],i[v.path[0]].push(p(v));else x.push(p(v));return{formErrors:x,fieldErrors:i}}get formErrors(){return this.flatten()}}L.create=(p)=>{return new L(p)};var lm=(p,i)=>{let x;switch(p.code){case _.invalid_type:if(p.received===G.undefined)x="Required";else x=`Expected ${p.expected}, received ${p.received}`;break;case _.invalid_literal:x=`Invalid literal value, expected ${JSON.stringify(p.expected,U.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:x=`Unrecognized key(s) in object: ${U.joinValues(p.keys,", ")}`;break;case _.invalid_union:x="Invalid input";break;case _.invalid_union_discriminator:x=`Invalid discriminator value. Expected ${U.joinValues(p.options)}`;break;case _.invalid_enum_value:x=`Invalid enum value. Expected ${U.joinValues(p.options)}, received '${p.received}'`;break;case _.invalid_arguments:x="Invalid function arguments";break;case _.invalid_return_type:x="Invalid function return type";break;case _.invalid_date:x="Invalid date";break;case _.invalid_string:if(typeof p.validation==="object")if("includes"in p.validation){if(x=`Invalid input: must include "${p.validation.includes}"`,typeof p.validation.position==="number")x=`${x} at one or more positions greater than or equal to ${p.validation.position}`}else if("startsWith"in p.validation)x=`Invalid input: must start with "${p.validation.startsWith}"`;else if("endsWith"in p.validation)x=`Invalid input: must end with "${p.validation.endsWith}"`;else U.assertNever(p.validation);else if(p.validation!=="regex")x=`Invalid ${p.validation}`;else x="Invalid";break;case _.too_small:if(p.type==="array")x=`Array must contain ${p.exact?"exactly":p.inclusive?"at least":"more than"} ${p.minimum} element(s)`;else if(p.type==="string")x=`String must contain ${p.exact?"exactly":p.inclusive?"at least":"over"} ${p.minimum} character(s)`;else if(p.type==="number")x=`Number must be ${p.exact?"exactly equal to ":p.inclusive?"greater than or equal to ":"greater than "}${p.minimum}`;else if(p.type==="date")x=`Date must be ${p.exact?"exactly equal to ":p.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(p.minimum))}`;else x="Invalid input";break;case _.too_big:if(p.type==="array")x=`Array must contain ${p.exact?"exactly":p.inclusive?"at most":"less than"} ${p.maximum} element(s)`;else if(p.type==="string")x=`String must contain ${p.exact?"exactly":p.inclusive?"at most":"under"} ${p.maximum} character(s)`;else if(p.type==="number")x=`Number must be ${p.exact?"exactly":p.inclusive?"less than or equal to":"less than"} ${p.maximum}`;else if(p.type==="bigint")x=`BigInt must be ${p.exact?"exactly":p.inclusive?"less than or equal to":"less than"} ${p.maximum}`;else if(p.type==="date")x=`Date must be ${p.exact?"exactly":p.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(p.maximum))}`;else x="Invalid input";break;case _.custom:x="Invalid input";break;case _.invalid_intersection_types:x="Intersection results could not be merged";break;case _.not_multiple_of:x=`Number must be a multiple of ${p.multipleOf}`;break;case _.not_finite:x="Number must be finite";break;default:x=i.defaultError,U.assertNever(p)}return{message:x}},y=lm;var Vi=y;function zm(p){Vi=p}function zp(){return Vi}var Up=(p)=>{let{data:i,path:x,errorMaps:v,issueData:m}=p,f=[...x,...m.path||[]],w={...m,path:f};if(m.message!==void 0)return{...m,path:f,message:m.message};let l="",z=v.filter((j)=>!!j).slice().reverse();for(let j of z)l=j(w,{data:i,defaultError:l}).message;return{...m,path:f,message:l}},jm=[];function Q(p,i){let x=zp(),v=Up({issueData:i,data:p.data,path:p.path,errorMaps:[p.common.contextualErrorMap,p.schemaErrorMap,x,x===y?void 0:y].filter((m)=>!!m)});p.common.issues.push(v)}class b{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(p,i){let x=[];for(let v of i){if(v.status==="aborted")return W;if(v.status==="dirty")p.dirty();x.push(v.value)}return{status:p.value,value:x}}static async mergeObjectAsync(p,i){let x=[];for(let v of i){let m=await v.key,f=await v.value;x.push({key:m,value:f})}return b.mergeObjectSync(p,x)}static mergeObjectSync(p,i){let x={};for(let v of i){let{key:m,value:f}=v;if(m.status==="aborted")return W;if(f.status==="aborted")return W;if(m.status==="dirty")p.dirty();if(f.status==="dirty")p.dirty();if(m.value!=="__proto__"&&(typeof f.value!=="undefined"||v.alwaysSet))x[m.value]=f.value}return{status:p.value,value:x}}}var W=Object.freeze({status:"aborted"}),vp=(p)=>({status:"dirty",value:p}),S=(p)=>({status:"valid",value:p}),Tp=(p)=>p.status==="aborted",Pp=(p)=>p.status==="dirty",s=(p)=>p.status==="valid",jp=(p)=>typeof Promise!=="undefined"&&p instanceof Promise;var J;(function(p){p.errToObj=(i)=>typeof i==="string"?{message:i}:i||{},p.toString=(i)=>typeof i==="string"?i:i?.message})(J||(J={}));class N{constructor(p,i,x,v){this._cachedPath=[],this.parent=p,this.data=i,this._path=x,this._key=v}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var Ui=(p,i)=>{if(s(i))return{success:!0,data:i.value};else{if(!p.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let x=new L(p.common.issues);return this._error=x,this._error}}}};function M(p){if(!p)return{};let{errorMap:i,invalid_type_error:x,required_error:v,description:m}=p;if(i&&(x||v))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(i)return{errorMap:i,description:m};return{errorMap:(w,l)=>{let{message:z}=p;if(w.code==="invalid_enum_value")return{message:z??l.defaultError};if(typeof l.data==="undefined")return{message:z??v??l.defaultError};if(w.code!=="invalid_type")return{message:l.defaultError};return{message:z??x??l.defaultError}},description:m}}class V{get description(){return this._def.description}_getType(p){return P(p.data)}_getOrReturnCtx(p,i){return i||{common:p.parent.common,data:p.data,parsedType:P(p.data),schemaErrorMap:this._def.errorMap,path:p.path,parent:p.parent}}_processInputParams(p){return{status:new b,ctx:{common:p.parent.common,data:p.data,parsedType:P(p.data),schemaErrorMap:this._def.errorMap,path:p.path,parent:p.parent}}}_parseSync(p){let i=this._parse(p);if(jp(i))throw new Error("Synchronous parse encountered promise.");return i}_parseAsync(p){let i=this._parse(p);return Promise.resolve(i)}parse(p,i){let x=this.safeParse(p,i);if(x.success)return x.data;throw x.error}safeParse(p,i){let x={common:{issues:[],async:i?.async??!1,contextualErrorMap:i?.errorMap},path:i?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:p,parsedType:P(p)},v=this._parseSync({data:p,path:x.path,parent:x});return Ui(x,v)}"~validate"(p){let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:p,parsedType:P(p)};if(!this["~standard"].async)try{let x=this._parseSync({data:p,path:[],parent:i});return s(x)?{value:x.value}:{issues:i.common.issues}}catch(x){if(x?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;i.common={issues:[],async:!0}}return this._parseAsync({data:p,path:[],parent:i}).then((x)=>s(x)?{value:x.value}:{issues:i.common.issues})}async parseAsync(p,i){let x=await this.safeParseAsync(p,i);if(x.success)return x.data;throw x.error}async safeParseAsync(p,i){let x={common:{issues:[],contextualErrorMap:i?.errorMap,async:!0},path:i?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:p,parsedType:P(p)},v=this._parse({data:p,path:x.path,parent:x}),m=await(jp(v)?v:Promise.resolve(v));return Ui(x,m)}refine(p,i){let x=(v)=>{if(typeof i==="string"||typeof i==="undefined")return{message:i};else if(typeof i==="function")return i(v);else return i};return this._refinement((v,m)=>{let f=p(v),w=()=>m.addIssue({code:_.custom,...x(v)});if(typeof Promise!=="undefined"&&f instanceof Promise)return f.then((l)=>{if(!l)return w(),!1;else return!0});if(!f)return w(),!1;else return!0})}refinement(p,i){return this._refinement((x,v)=>{if(!p(x))return v.addIssue(typeof i==="function"?i(x,v):i),!1;else return!0})}_refinement(p){return new E({schema:this,typeName:H.ZodEffects,effect:{type:"refinement",refinement:p}})}superRefine(p){return this._refinement(p)}constructor(p){this.spa=this.safeParseAsync,this._def=p,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(i)=>this["~validate"](i)}}optional(){return C.create(this,this._def)}nullable(){return u.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return K.create(this)}promise(){return lp.create(this,this._def)}or(p){return Qp.create([this,p],this._def)}and(p){return Jp.create(this,p,this._def)}transform(p){return new E({...M(this._def),schema:this,typeName:H.ZodEffects,effect:{type:"transform",transform:p}})}default(p){let i=typeof p==="function"?p:()=>p;return new Wp({...M(this._def),innerType:this,defaultValue:i,typeName:H.ZodDefault})}brand(){return new Zp({typeName:H.ZodBranded,type:this,...M(this._def)})}catch(p){let i=typeof p==="function"?p:()=>p;return new Hp({...M(this._def),innerType:this,catchValue:i,typeName:H.ZodCatch})}describe(p){return new this.constructor({...this._def,description:p})}pipe(p){return Fp.create(this,p)}readonly(){return ap.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var qm=/^c[^\s-]{8,}$/i,gm=/^[0-9a-z]+$/,$m=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_m=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Gm=/^[a-z0-9_-]{21}$/i,Qm=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Jm=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Xm=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ym="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",rp,Bm=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wm=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Hm=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,am=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mm=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Vm=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ci="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Um=new RegExp(`^${ci}$`);function Ri(p){let i="[0-5]\\d";if(p.precision)i=`${i}\\.\\d{${p.precision}}`;else if(p.precision==null)i=`${i}(\\.\\d+)?`;let x=p.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${i})${x}`}function Am(p){return new RegExp(`^${Ri(p)}$`)}function bi(p){let i=`${ci}T${Ri(p)}`,x=[];if(x.push(p.local?"Z?":"Z"),p.offset)x.push("([+-]\\d{2}:?\\d{2})");return i=`${i}(${x.join("|")})`,new RegExp(`^${i}$`)}function cm(p,i){if((i==="v4"||!i)&&Bm.test(p))return!0;if((i==="v6"||!i)&&Hm.test(p))return!0;return!1}function Rm(p,i){if(!Qm.test(p))return!1;try{let[x]=p.split("."),v=x.replace(/-/g,"+").replace(/_/g,"/").padEnd(x.length+(4-x.length%4)%4,"="),m=JSON.parse(atob(v));if(typeof m!=="object"||m===null)return!1;if("typ"in m&&m?.typ!=="JWT")return!1;if(!m.alg)return!1;if(i&&m.alg!==i)return!1;return!0}catch{return!1}}function bm(p,i){if((i==="v4"||!i)&&Wm.test(p))return!0;if((i==="v6"||!i)&&am.test(p))return!0;return!1}class O extends V{_parse(p){if(this._def.coerce)p.data=String(p.data);if(this._getType(p)!==G.string){let m=this._getOrReturnCtx(p);return Q(m,{code:_.invalid_type,expected:G.string,received:m.parsedType}),W}let x=new b,v=void 0;for(let m of this._def.checks)if(m.kind==="min"){if(p.data.length<m.value)v=this._getOrReturnCtx(p,v),Q(v,{code:_.too_small,minimum:m.value,type:"string",inclusive:!0,exact:!1,message:m.message}),x.dirty()}else if(m.kind==="max"){if(p.data.length>m.value)v=this._getOrReturnCtx(p,v),Q(v,{code:_.too_big,maximum:m.value,type:"string",inclusive:!0,exact:!1,message:m.message}),x.dirty()}else if(m.kind==="length"){let f=p.data.length>m.value,w=p.data.length<m.value;if(f||w){if(v=this._getOrReturnCtx(p,v),f)Q(v,{code:_.too_big,maximum:m.value,type:"string",inclusive:!0,exact:!0,message:m.message});else if(w)Q(v,{code:_.too_small,minimum:m.value,type:"string",inclusive:!0,exact:!0,message:m.message});x.dirty()}}else if(m.kind==="email"){if(!Xm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"email",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="emoji"){if(!rp)rp=new RegExp(Ym,"u");if(!rp.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"emoji",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="uuid"){if(!_m.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"uuid",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="nanoid"){if(!Gm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"nanoid",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="cuid"){if(!qm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"cuid",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="cuid2"){if(!gm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"cuid2",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="ulid"){if(!$m.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"ulid",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="url")try{new URL(p.data)}catch{v=this._getOrReturnCtx(p,v),Q(v,{validation:"url",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="regex"){if(m.regex.lastIndex=0,!m.regex.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"regex",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="trim")p.data=p.data.trim();else if(m.kind==="includes"){if(!p.data.includes(m.value,m.position))v=this._getOrReturnCtx(p,v),Q(v,{code:_.invalid_string,validation:{includes:m.value,position:m.position},message:m.message}),x.dirty()}else if(m.kind==="toLowerCase")p.data=p.data.toLowerCase();else if(m.kind==="toUpperCase")p.data=p.data.toUpperCase();else if(m.kind==="startsWith"){if(!p.data.startsWith(m.value))v=this._getOrReturnCtx(p,v),Q(v,{code:_.invalid_string,validation:{startsWith:m.value},message:m.message}),x.dirty()}else if(m.kind==="endsWith"){if(!p.data.endsWith(m.value))v=this._getOrReturnCtx(p,v),Q(v,{code:_.invalid_string,validation:{endsWith:m.value},message:m.message}),x.dirty()}else if(m.kind==="datetime"){if(!bi(m).test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{code:_.invalid_string,validation:"datetime",message:m.message}),x.dirty()}else if(m.kind==="date"){if(!Um.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{code:_.invalid_string,validation:"date",message:m.message}),x.dirty()}else if(m.kind==="time"){if(!Am(m).test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{code:_.invalid_string,validation:"time",message:m.message}),x.dirty()}else if(m.kind==="duration"){if(!Jm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"duration",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="ip"){if(!cm(p.data,m.version))v=this._getOrReturnCtx(p,v),Q(v,{validation:"ip",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="jwt"){if(!Rm(p.data,m.alg))v=this._getOrReturnCtx(p,v),Q(v,{validation:"jwt",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="cidr"){if(!bm(p.data,m.version))v=this._getOrReturnCtx(p,v),Q(v,{validation:"cidr",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="base64"){if(!Mm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"base64",code:_.invalid_string,message:m.message}),x.dirty()}else if(m.kind==="base64url"){if(!Vm.test(p.data))v=this._getOrReturnCtx(p,v),Q(v,{validation:"base64url",code:_.invalid_string,message:m.message}),x.dirty()}else U.assertNever(m);return{status:x.value,value:p.data}}_regex(p,i,x){return this.refinement((v)=>p.test(v),{validation:i,code:_.invalid_string,...J.errToObj(x)})}_addCheck(p){return new O({...this._def,checks:[...this._def.checks,p]})}email(p){return this._addCheck({kind:"email",...J.errToObj(p)})}url(p){return this._addCheck({kind:"url",...J.errToObj(p)})}emoji(p){return this._addCheck({kind:"emoji",...J.errToObj(p)})}uuid(p){return this._addCheck({kind:"uuid",...J.errToObj(p)})}nanoid(p){return this._addCheck({kind:"nanoid",...J.errToObj(p)})}cuid(p){return this._addCheck({kind:"cuid",...J.errToObj(p)})}cuid2(p){return this._addCheck({kind:"cuid2",...J.errToObj(p)})}ulid(p){return this._addCheck({kind:"ulid",...J.errToObj(p)})}base64(p){return this._addCheck({kind:"base64",...J.errToObj(p)})}base64url(p){return this._addCheck({kind:"base64url",...J.errToObj(p)})}jwt(p){return this._addCheck({kind:"jwt",...J.errToObj(p)})}ip(p){return this._addCheck({kind:"ip",...J.errToObj(p)})}cidr(p){return this._addCheck({kind:"cidr",...J.errToObj(p)})}datetime(p){if(typeof p==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:p});return this._addCheck({kind:"datetime",precision:typeof p?.precision==="undefined"?null:p?.precision,offset:p?.offset??!1,local:p?.local??!1,...J.errToObj(p?.message)})}date(p){return this._addCheck({kind:"date",message:p})}time(p){if(typeof p==="string")return this._addCheck({kind:"time",precision:null,message:p});return this._addCheck({kind:"time",precision:typeof p?.precision==="undefined"?null:p?.precision,...J.errToObj(p?.message)})}duration(p){return this._addCheck({kind:"duration",...J.errToObj(p)})}regex(p,i){return this._addCheck({kind:"regex",regex:p,...J.errToObj(i)})}includes(p,i){return this._addCheck({kind:"includes",value:p,position:i?.position,...J.errToObj(i?.message)})}startsWith(p,i){return this._addCheck({kind:"startsWith",value:p,...J.errToObj(i)})}endsWith(p,i){return this._addCheck({kind:"endsWith",value:p,...J.errToObj(i)})}min(p,i){return this._addCheck({kind:"min",value:p,...J.errToObj(i)})}max(p,i){return this._addCheck({kind:"max",value:p,...J.errToObj(i)})}length(p,i){return this._addCheck({kind:"length",value:p,...J.errToObj(i)})}nonempty(p){return this.min(1,J.errToObj(p))}trim(){return new O({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new O({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new O({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((p)=>p.kind==="datetime")}get isDate(){return!!this._def.checks.find((p)=>p.kind==="date")}get isTime(){return!!this._def.checks.find((p)=>p.kind==="time")}get isDuration(){return!!this._def.checks.find((p)=>p.kind==="duration")}get isEmail(){return!!this._def.checks.find((p)=>p.kind==="email")}get isURL(){return!!this._def.checks.find((p)=>p.kind==="url")}get isEmoji(){return!!this._def.checks.find((p)=>p.kind==="emoji")}get isUUID(){return!!this._def.checks.find((p)=>p.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((p)=>p.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((p)=>p.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((p)=>p.kind==="cuid2")}get isULID(){return!!this._def.checks.find((p)=>p.kind==="ulid")}get isIP(){return!!this._def.checks.find((p)=>p.kind==="ip")}get isCIDR(){return!!this._def.checks.find((p)=>p.kind==="cidr")}get isBase64(){return!!this._def.checks.find((p)=>p.kind==="base64")}get isBase64url(){return!!this._def.checks.find((p)=>p.kind==="base64url")}get minLength(){let p=null;for(let i of this._def.checks)if(i.kind==="min"){if(p===null||i.value>p)p=i.value}return p}get maxLength(){let p=null;for(let i of this._def.checks)if(i.kind==="max"){if(p===null||i.value<p)p=i.value}return p}}O.create=(p)=>{return new O({checks:[],typeName:H.ZodString,coerce:p?.coerce??!1,...M(p)})};function Sm(p,i){let x=(p.toString().split(".")[1]||"").length,v=(i.toString().split(".")[1]||"").length,m=x>v?x:v,f=Number.parseInt(p.toFixed(m).replace(".","")),w=Number.parseInt(i.toFixed(m).replace(".",""));return f%w/10**m}class e extends V{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(p){if(this._def.coerce)p.data=Number(p.data);if(this._getType(p)!==G.number){let m=this._getOrReturnCtx(p);return Q(m,{code:_.invalid_type,expected:G.number,received:m.parsedType}),W}let x=void 0,v=new b;for(let m of this._def.checks)if(m.kind==="int"){if(!U.isInteger(p.data))x=this._getOrReturnCtx(p,x),Q(x,{code:_.invalid_type,expected:"integer",received:"float",message:m.message}),v.dirty()}else if(m.kind==="min"){if(m.inclusive?p.data<m.value:p.data<=m.value)x=this._getOrReturnCtx(p,x),Q(x,{code:_.too_small,minimum:m.value,type:"number",inclusive:m.inclusive,exact:!1,message:m.message}),v.dirty()}else if(m.kind==="max"){if(m.inclusive?p.data>m.value:p.data>=m.value)x=this._getOrReturnCtx(p,x),Q(x,{code:_.too_big,maximum:m.value,type:"number",inclusive:m.inclusive,exact:!1,message:m.message}),v.dirty()}else if(m.kind==="multipleOf"){if(Sm(p.data,m.value)!==0)x=this._getOrReturnCtx(p,x),Q(x,{code:_.not_multiple_of,multipleOf:m.value,message:m.message}),v.dirty()}else if(m.kind==="finite"){if(!Number.isFinite(p.data))x=this._getOrReturnCtx(p,x),Q(x,{code:_.not_finite,message:m.message}),v.dirty()}else U.assertNever(m);return{status:v.value,value:p.data}}gte(p,i){return this.setLimit("min",p,!0,J.toString(i))}gt(p,i){return this.setLimit("min",p,!1,J.toString(i))}lte(p,i){return this.setLimit("max",p,!0,J.toString(i))}lt(p,i){return this.setLimit("max",p,!1,J.toString(i))}setLimit(p,i,x,v){return new e({...this._def,checks:[...this._def.checks,{kind:p,value:i,inclusive:x,message:J.toString(v)}]})}_addCheck(p){return new e({...this._def,checks:[...this._def.checks,p]})}int(p){return this._addCheck({kind:"int",message:J.toString(p)})}positive(p){return this._addCheck({kind:"min",value:0,inclusive:!1,message:J.toString(p)})}negative(p){return this._addCheck({kind:"max",value:0,inclusive:!1,message:J.toString(p)})}nonpositive(p){return this._addCheck({kind:"max",value:0,inclusive:!0,message:J.toString(p)})}nonnegative(p){return this._addCheck({kind:"min",value:0,inclusive:!0,message:J.toString(p)})}multipleOf(p,i){return this._addCheck({kind:"multipleOf",value:p,message:J.toString(i)})}finite(p){return this._addCheck({kind:"finite",message:J.toString(p)})}safe(p){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:J.toString(p)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:J.toString(p)})}get minValue(){let p=null;for(let i of this._def.checks)if(i.kind==="min"){if(p===null||i.value>p)p=i.value}return p}get maxValue(){let p=null;for(let i of this._def.checks)if(i.kind==="max"){if(p===null||i.value<p)p=i.value}return p}get isInt(){return!!this._def.checks.find((p)=>p.kind==="int"||p.kind==="multipleOf"&&U.isInteger(p.value))}get isFinite(){let p=null,i=null;for(let x of this._def.checks)if(x.kind==="finite"||x.kind==="int"||x.kind==="multipleOf")return!0;else if(x.kind==="min"){if(i===null||x.value>i)i=x.value}else if(x.kind==="max"){if(p===null||x.value<p)p=x.value}return Number.isFinite(i)&&Number.isFinite(p)}}e.create=(p)=>{return new e({checks:[],typeName:H.ZodNumber,coerce:p?.coerce||!1,...M(p)})};class pp extends V{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(p){if(this._def.coerce)try{p.data=BigInt(p.data)}catch{return this._getInvalidInput(p)}if(this._getType(p)!==G.bigint)return this._getInvalidInput(p);let x=void 0,v=new b;for(let m of this._def.checks)if(m.kind==="min"){if(m.inclusive?p.data<m.value:p.data<=m.value)x=this._getOrReturnCtx(p,x),Q(x,{code:_.too_small,type:"bigint",minimum:m.value,inclusive:m.inclusive,message:m.message}),v.dirty()}else if(m.kind==="max"){if(m.inclusive?p.data>m.value:p.data>=m.value)x=this._getOrReturnCtx(p,x),Q(x,{code:_.too_big,type:"bigint",maximum:m.value,inclusive:m.inclusive,message:m.message}),v.dirty()}else if(m.kind==="multipleOf"){if(p.data%m.value!==BigInt(0))x=this._getOrReturnCtx(p,x),Q(x,{code:_.not_multiple_of,multipleOf:m.value,message:m.message}),v.dirty()}else U.assertNever(m);return{status:v.value,value:p.data}}_getInvalidInput(p){let i=this._getOrReturnCtx(p);return Q(i,{code:_.invalid_type,expected:G.bigint,received:i.parsedType}),W}gte(p,i){return this.setLimit("min",p,!0,J.toString(i))}gt(p,i){return this.setLimit("min",p,!1,J.toString(i))}lte(p,i){return this.setLimit("max",p,!0,J.toString(i))}lt(p,i){return this.setLimit("max",p,!1,J.toString(i))}setLimit(p,i,x,v){return new pp({...this._def,checks:[...this._def.checks,{kind:p,value:i,inclusive:x,message:J.toString(v)}]})}_addCheck(p){return new pp({...this._def,checks:[...this._def.checks,p]})}positive(p){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:J.toString(p)})}negative(p){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:J.toString(p)})}nonpositive(p){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:J.toString(p)})}nonnegative(p){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:J.toString(p)})}multipleOf(p,i){return this._addCheck({kind:"multipleOf",value:p,message:J.toString(i)})}get minValue(){let p=null;for(let i of this._def.checks)if(i.kind==="min"){if(p===null||i.value>p)p=i.value}return p}get maxValue(){let p=null;for(let i of this._def.checks)if(i.kind==="max"){if(p===null||i.value<p)p=i.value}return p}}pp.create=(p)=>{return new pp({checks:[],typeName:H.ZodBigInt,coerce:p?.coerce??!1,...M(p)})};class $p extends V{_parse(p){if(this._def.coerce)p.data=Boolean(p.data);if(this._getType(p)!==G.boolean){let x=this._getOrReturnCtx(p);return Q(x,{code:_.invalid_type,expected:G.boolean,received:x.parsedType}),W}return S(p.data)}}$p.create=(p)=>{return new $p({typeName:H.ZodBoolean,coerce:p?.coerce||!1,...M(p)})};class mp extends V{_parse(p){if(this._def.coerce)p.data=new Date(p.data);if(this._getType(p)!==G.date){let m=this._getOrReturnCtx(p);return Q(m,{code:_.invalid_type,expected:G.date,received:m.parsedType}),W}if(Number.isNaN(p.data.getTime())){let m=this._getOrReturnCtx(p);return Q(m,{code:_.invalid_date}),W}let x=new b,v=void 0;for(let m of this._def.checks)if(m.kind==="min"){if(p.data.getTime()<m.value)v=this._getOrReturnCtx(p,v),Q(v,{code:_.too_small,message:m.message,inclusive:!0,exact:!1,minimum:m.value,type:"date"}),x.dirty()}else if(m.kind==="max"){if(p.data.getTime()>m.value)v=this._getOrReturnCtx(p,v),Q(v,{code:_.too_big,message:m.message,inclusive:!0,exact:!1,maximum:m.value,type:"date"}),x.dirty()}else U.assertNever(m);return{status:x.value,value:new Date(p.data.getTime())}}_addCheck(p){return new mp({...this._def,checks:[...this._def.checks,p]})}min(p,i){return this._addCheck({kind:"min",value:p.getTime(),message:J.toString(i)})}max(p,i){return this._addCheck({kind:"max",value:p.getTime(),message:J.toString(i)})}get minDate(){let p=null;for(let i of this._def.checks)if(i.kind==="min"){if(p===null||i.value>p)p=i.value}return p!=null?new Date(p):null}get maxDate(){let p=null;for(let i of this._def.checks)if(i.kind==="max"){if(p===null||i.value<p)p=i.value}return p!=null?new Date(p):null}}mp.create=(p)=>{return new mp({checks:[],coerce:p?.coerce||!1,typeName:H.ZodDate,...M(p)})};class Ap extends V{_parse(p){if(this._getType(p)!==G.symbol){let x=this._getOrReturnCtx(p);return Q(x,{code:_.invalid_type,expected:G.symbol,received:x.parsedType}),W}return S(p.data)}}Ap.create=(p)=>{return new Ap({typeName:H.ZodSymbol,...M(p)})};class _p extends V{_parse(p){if(this._getType(p)!==G.undefined){let x=this._getOrReturnCtx(p);return Q(x,{code:_.invalid_type,expected:G.undefined,received:x.parsedType}),W}return S(p.data)}}_p.create=(p)=>{return new _p({typeName:H.ZodUndefined,...M(p)})};class Gp extends V{_parse(p){if(this._getType(p)!==G.null){let x=this._getOrReturnCtx(p);return Q(x,{code:_.invalid_type,expected:G.null,received:x.parsedType}),W}return S(p.data)}}Gp.create=(p)=>{return new Gp({typeName:H.ZodNull,...M(p)})};class fp extends V{constructor(){super(...arguments);this._any=!0}_parse(p){return S(p.data)}}fp.create=(p)=>{return new fp({typeName:H.ZodAny,...M(p)})};class r extends V{constructor(){super(...arguments);this._unknown=!0}_parse(p){return S(p.data)}}r.create=(p)=>{return new r({typeName:H.ZodUnknown,...M(p)})};class o extends V{_parse(p){let i=this._getOrReturnCtx(p);return Q(i,{code:_.invalid_type,expected:G.never,received:i.parsedType}),W}}o.create=(p)=>{return new o({typeName:H.ZodNever,...M(p)})};class cp extends V{_parse(p){if(this._getType(p)!==G.undefined){let x=this._getOrReturnCtx(p);return Q(x,{code:_.invalid_type,expected:G.void,received:x.parsedType}),W}return S(p.data)}}cp.create=(p)=>{return new cp({typeName:H.ZodVoid,...M(p)})};class K extends V{_parse(p){let{ctx:i,status:x}=this._processInputParams(p),v=this._def;if(i.parsedType!==G.array)return Q(i,{code:_.invalid_type,expected:G.array,received:i.parsedType}),W;if(v.exactLength!==null){let f=i.data.length>v.exactLength.value,w=i.data.length<v.exactLength.value;if(f||w)Q(i,{code:f?_.too_big:_.too_small,minimum:w?v.exactLength.value:void 0,maximum:f?v.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:v.exactLength.message}),x.dirty()}if(v.minLength!==null){if(i.data.length<v.minLength.value)Q(i,{code:_.too_small,minimum:v.minLength.value,type:"array",inclusive:!0,exact:!1,message:v.minLength.message}),x.dirty()}if(v.maxLength!==null){if(i.data.length>v.maxLength.value)Q(i,{code:_.too_big,maximum:v.maxLength.value,type:"array",inclusive:!0,exact:!1,message:v.maxLength.message}),x.dirty()}if(i.common.async)return Promise.all([...i.data].map((f,w)=>{return v.type._parseAsync(new N(i,f,i.path,w))})).then((f)=>{return b.mergeArray(x,f)});let m=[...i.data].map((f,w)=>{return v.type._parseSync(new N(i,f,i.path,w))});return b.mergeArray(x,m)}get element(){return this._def.type}min(p,i){return new K({...this._def,minLength:{value:p,message:J.toString(i)}})}max(p,i){return new K({...this._def,maxLength:{value:p,message:J.toString(i)}})}length(p,i){return new K({...this._def,exactLength:{value:p,message:J.toString(i)}})}nonempty(p){return this.min(1,p)}}K.create=(p,i)=>{return new K({type:p,minLength:null,maxLength:null,exactLength:null,typeName:H.ZodArray,...M(i)})};function qp(p){if(p instanceof R){let i={};for(let x in p.shape){let v=p.shape[x];i[x]=C.create(qp(v))}return new R({...p._def,shape:()=>i})}else if(p instanceof K)return new K({...p._def,type:qp(p.element)});else if(p instanceof C)return C.create(qp(p.unwrap()));else if(p instanceof u)return u.create(qp(p.unwrap()));else if(p instanceof Z)return Z.create(p.items.map((i)=>qp(i)));else return p}class R extends V{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let p=this._def.shape(),i=U.objectKeys(p);return this._cached={shape:p,keys:i},this._cached}_parse(p){if(this._getType(p)!==G.object){let z=this._getOrReturnCtx(p);return Q(z,{code:_.invalid_type,expected:G.object,received:z.parsedType}),W}let{status:x,ctx:v}=this._processInputParams(p),{shape:m,keys:f}=this._getCached(),w=[];if(!(this._def.catchall instanceof o&&this._def.unknownKeys==="strip")){for(let z in v.data)if(!f.includes(z))w.push(z)}let l=[];for(let z of f){let j=m[z],q=v.data[z];l.push({key:{status:"valid",value:z},value:j._parse(new N(v,q,v.path,z)),alwaysSet:z in v.data})}if(this._def.catchall instanceof o){let z=this._def.unknownKeys;if(z==="passthrough")for(let j of w)l.push({key:{status:"valid",value:j},value:{status:"valid",value:v.data[j]}});else if(z==="strict"){if(w.length>0)Q(v,{code:_.unrecognized_keys,keys:w}),x.dirty()}else if(z==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let z=this._def.catchall;for(let j of w){let q=v.data[j];l.push({key:{status:"valid",value:j},value:z._parse(new N(v,q,v.path,j)),alwaysSet:j in v.data})}}if(v.common.async)return Promise.resolve().then(async()=>{let z=[];for(let j of l){let q=await j.key,$=await j.value;z.push({key:q,value:$,alwaysSet:j.alwaysSet})}return z}).then((z)=>{return b.mergeObjectSync(x,z)});else return b.mergeObjectSync(x,l)}get shape(){return this._def.shape()}strict(p){return J.errToObj,new R({...this._def,unknownKeys:"strict",...p!==void 0?{errorMap:(i,x)=>{let v=this._def.errorMap?.(i,x).message??x.defaultError;if(i.code==="unrecognized_keys")return{message:J.errToObj(p).message??v};return{message:v}}}:{}})}strip(){return new R({...this._def,unknownKeys:"strip"})}passthrough(){return new R({...this._def,unknownKeys:"passthrough"})}extend(p){return new R({...this._def,shape:()=>({...this._def.shape(),...p})})}merge(p){return new R({unknownKeys:p._def.unknownKeys,catchall:p._def.catchall,shape:()=>({...this._def.shape(),...p._def.shape()}),typeName:H.ZodObject})}setKey(p,i){return this.augment({[p]:i})}catchall(p){return new R({...this._def,catchall:p})}pick(p){let i={};for(let x of U.objectKeys(p))if(p[x]&&this.shape[x])i[x]=this.shape[x];return new R({...this._def,shape:()=>i})}omit(p){let i={};for(let x of U.objectKeys(this.shape))if(!p[x])i[x]=this.shape[x];return new R({...this._def,shape:()=>i})}deepPartial(){return qp(this)}partial(p){let i={};for(let x of U.objectKeys(this.shape)){let v=this.shape[x];if(p&&!p[x])i[x]=v;else i[x]=v.optional()}return new R({...this._def,shape:()=>i})}required(p){let i={};for(let x of U.objectKeys(this.shape))if(p&&!p[x])i[x]=this.shape[x];else{let m=this.shape[x];while(m instanceof C)m=m._def.innerType;i[x]=m}return new R({...this._def,shape:()=>i})}keyof(){return Si(U.objectKeys(this.shape))}}R.create=(p,i)=>{return new R({shape:()=>p,unknownKeys:"strip",catchall:o.create(),typeName:H.ZodObject,...M(i)})};R.strictCreate=(p,i)=>{return new R({shape:()=>p,unknownKeys:"strict",catchall:o.create(),typeName:H.ZodObject,...M(i)})};R.lazycreate=(p,i)=>{return new R({shape:p,unknownKeys:"strip",catchall:o.create(),typeName:H.ZodObject,...M(i)})};class Qp extends V{_parse(p){let{ctx:i}=this._processInputParams(p),x=this._def.options;function v(m){for(let w of m)if(w.result.status==="valid")return w.result;for(let w of m)if(w.result.status==="dirty")return i.common.issues.push(...w.ctx.common.issues),w.result;let f=m.map((w)=>new L(w.ctx.common.issues));return Q(i,{code:_.invalid_union,unionErrors:f}),W}if(i.common.async)return Promise.all(x.map(async(m)=>{let f={...i,common:{...i.common,issues:[]},parent:null};return{result:await m._parseAsync({data:i.data,path:i.path,parent:f}),ctx:f}})).then(v);else{let m=void 0,f=[];for(let l of x){let z={...i,common:{...i.common,issues:[]},parent:null},j=l._parseSync({data:i.data,path:i.path,parent:z});if(j.status==="valid")return j;else if(j.status==="dirty"&&!m)m={result:j,ctx:z};if(z.common.issues.length)f.push(z.common.issues)}if(m)return i.common.issues.push(...m.ctx.common.issues),m.result;let w=f.map((l)=>new L(l));return Q(i,{code:_.invalid_union,unionErrors:w}),W}}get options(){return this._def.options}}Qp.create=(p,i)=>{return new Qp({options:p,typeName:H.ZodUnion,...M(i)})};var k=(p)=>{if(p instanceof Xp)return k(p.schema);else if(p instanceof E)return k(p.innerType());else if(p instanceof Yp)return[p.value];else if(p instanceof ip)return p.options;else if(p instanceof Bp)return U.objectValues(p.enum);else if(p instanceof Wp)return k(p._def.innerType);else if(p instanceof _p)return[void 0];else if(p instanceof Gp)return[null];else if(p instanceof C)return[void 0,...k(p.unwrap())];else if(p instanceof u)return[null,...k(p.unwrap())];else if(p instanceof Zp)return k(p.unwrap());else if(p instanceof ap)return k(p.unwrap());else if(p instanceof Hp)return k(p._def.innerType);else return[]};class op extends V{_parse(p){let{ctx:i}=this._processInputParams(p);if(i.parsedType!==G.object)return Q(i,{code:_.invalid_type,expected:G.object,received:i.parsedType}),W;let x=this.discriminator,v=i.data[x],m=this.optionsMap.get(v);if(!m)return Q(i,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[x]}),W;if(i.common.async)return m._parseAsync({data:i.data,path:i.path,parent:i});else return m._parseSync({data:i.data,path:i.path,parent:i})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(p,i,x){let v=new Map;for(let m of i){let f=k(m.shape[p]);if(!f.length)throw new Error(`A discriminator value for key \`${p}\` could not be extracted from all schema options`);for(let w of f){if(v.has(w))throw new Error(`Discriminator property ${String(p)} has duplicate value ${String(w)}`);v.set(w,m)}}return new op({typeName:H.ZodDiscriminatedUnion,discriminator:p,options:i,optionsMap:v,...M(x)})}}function ep(p,i){let x=P(p),v=P(i);if(p===i)return{valid:!0,data:p};else if(x===G.object&&v===G.object){let m=U.objectKeys(i),f=U.objectKeys(p).filter((l)=>m.indexOf(l)!==-1),w={...p,...i};for(let l of f){let z=ep(p[l],i[l]);if(!z.valid)return{valid:!1};w[l]=z.data}return{valid:!0,data:w}}else if(x===G.array&&v===G.array){if(p.length!==i.length)return{valid:!1};let m=[];for(let f=0;f<p.length;f++){let w=p[f],l=i[f],z=ep(w,l);if(!z.valid)return{valid:!1};m.push(z.data)}return{valid:!0,data:m}}else if(x===G.date&&v===G.date&&+p===+i)return{valid:!0,data:p};else return{valid:!1}}class Jp extends V{_parse(p){let{status:i,ctx:x}=this._processInputParams(p),v=(m,f)=>{if(Tp(m)||Tp(f))return W;let w=ep(m.value,f.value);if(!w.valid)return Q(x,{code:_.invalid_intersection_types}),W;if(Pp(m)||Pp(f))i.dirty();return{status:i.value,value:w.data}};if(x.common.async)return Promise.all([this._def.left._parseAsync({data:x.data,path:x.path,parent:x}),this._def.right._parseAsync({data:x.data,path:x.path,parent:x})]).then(([m,f])=>v(m,f));else return v(this._def.left._parseSync({data:x.data,path:x.path,parent:x}),this._def.right._parseSync({data:x.data,path:x.path,parent:x}))}}Jp.create=(p,i,x)=>{return new Jp({left:p,right:i,typeName:H.ZodIntersection,...M(x)})};class Z extends V{_parse(p){let{status:i,ctx:x}=this._processInputParams(p);if(x.parsedType!==G.array)return Q(x,{code:_.invalid_type,expected:G.array,received:x.parsedType}),W;if(x.data.length<this._def.items.length)return Q(x,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),W;if(!this._def.rest&&x.data.length>this._def.items.length)Q(x,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.dirty();let m=[...x.data].map((f,w)=>{let l=this._def.items[w]||this._def.rest;if(!l)return null;return l._parse(new N(x,f,x.path,w))}).filter((f)=>!!f);if(x.common.async)return Promise.all(m).then((f)=>{return b.mergeArray(i,f)});else return b.mergeArray(i,m)}get items(){return this._def.items}rest(p){return new Z({...this._def,rest:p})}}Z.create=(p,i)=>{if(!Array.isArray(p))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Z({items:p,typeName:H.ZodTuple,rest:null,...M(i)})};class Rp extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(p){let{status:i,ctx:x}=this._processInputParams(p);if(x.parsedType!==G.object)return Q(x,{code:_.invalid_type,expected:G.object,received:x.parsedType}),W;let v=[],m=this._def.keyType,f=this._def.valueType;for(let w in x.data)v.push({key:m._parse(new N(x,w,x.path,w)),value:f._parse(new N(x,x.data[w],x.path,w)),alwaysSet:w in x.data});if(x.common.async)return b.mergeObjectAsync(i,v);else return b.mergeObjectSync(i,v)}get element(){return this._def.valueType}static create(p,i,x){if(i instanceof V)return new Rp({keyType:p,valueType:i,typeName:H.ZodRecord,...M(x)});return new Rp({keyType:O.create(),valueType:p,typeName:H.ZodRecord,...M(i)})}}class bp extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(p){let{status:i,ctx:x}=this._processInputParams(p);if(x.parsedType!==G.map)return Q(x,{code:_.invalid_type,expected:G.map,received:x.parsedType}),W;let v=this._def.keyType,m=this._def.valueType,f=[...x.data.entries()].map(([w,l],z)=>{return{key:v._parse(new N(x,w,x.path,[z,"key"])),value:m._parse(new N(x,l,x.path,[z,"value"]))}});if(x.common.async){let w=new Map;return Promise.resolve().then(async()=>{for(let l of f){let z=await l.key,j=await l.value;if(z.status==="aborted"||j.status==="aborted")return W;if(z.status==="dirty"||j.status==="dirty")i.dirty();w.set(z.value,j.value)}return{status:i.value,value:w}})}else{let w=new Map;for(let l of f){let{key:z,value:j}=l;if(z.status==="aborted"||j.status==="aborted")return W;if(z.status==="dirty"||j.status==="dirty")i.dirty();w.set(z.value,j.value)}return{status:i.value,value:w}}}}bp.create=(p,i,x)=>{return new bp({valueType:i,keyType:p,typeName:H.ZodMap,...M(x)})};class wp extends V{_parse(p){let{status:i,ctx:x}=this._processInputParams(p);if(x.parsedType!==G.set)return Q(x,{code:_.invalid_type,expected:G.set,received:x.parsedType}),W;let v=this._def;if(v.minSize!==null){if(x.data.size<v.minSize.value)Q(x,{code:_.too_small,minimum:v.minSize.value,type:"set",inclusive:!0,exact:!1,message:v.minSize.message}),i.dirty()}if(v.maxSize!==null){if(x.data.size>v.maxSize.value)Q(x,{code:_.too_big,maximum:v.maxSize.value,type:"set",inclusive:!0,exact:!1,message:v.maxSize.message}),i.dirty()}let m=this._def.valueType;function f(l){let z=new Set;for(let j of l){if(j.status==="aborted")return W;if(j.status==="dirty")i.dirty();z.add(j.value)}return{status:i.value,value:z}}let w=[...x.data.values()].map((l,z)=>m._parse(new N(x,l,x.path,z)));if(x.common.async)return Promise.all(w).then((l)=>f(l));else return f(w)}min(p,i){return new wp({...this._def,minSize:{value:p,message:J.toString(i)}})}max(p,i){return new wp({...this._def,maxSize:{value:p,message:J.toString(i)}})}size(p,i){return this.min(p,i).max(p,i)}nonempty(p){return this.min(1,p)}}wp.create=(p,i)=>{return new wp({valueType:p,minSize:null,maxSize:null,typeName:H.ZodSet,...M(i)})};class gp extends V{constructor(){super(...arguments);this.validate=this.implement}_parse(p){let{ctx:i}=this._processInputParams(p);if(i.parsedType!==G.function)return Q(i,{code:_.invalid_type,expected:G.function,received:i.parsedType}),W;function x(w,l){return Up({data:w,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,zp(),y].filter((z)=>!!z),issueData:{code:_.invalid_arguments,argumentsError:l}})}function v(w,l){return Up({data:w,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,zp(),y].filter((z)=>!!z),issueData:{code:_.invalid_return_type,returnTypeError:l}})}let m={errorMap:i.common.contextualErrorMap},f=i.data;if(this._def.returns instanceof lp){let w=this;return S(async function(...l){let z=new L([]),j=await w._def.args.parseAsync(l,m).catch((g)=>{throw z.addIssue(x(l,g)),z}),q=await Reflect.apply(f,this,j);return await w._def.returns._def.type.parseAsync(q,m).catch((g)=>{throw z.addIssue(v(q,g)),z})})}else{let w=this;return S(function(...l){let z=w._def.args.safeParse(l,m);if(!z.success)throw new L([x(l,z.error)]);let j=Reflect.apply(f,this,z.data),q=w._def.returns.safeParse(j,m);if(!q.success)throw new L([v(j,q.error)]);return q.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...p){return new gp({...this._def,args:Z.create(p).rest(r.create())})}returns(p){return new gp({...this._def,returns:p})}implement(p){return this.parse(p)}strictImplement(p){return this.parse(p)}static create(p,i,x){return new gp({args:p?p:Z.create([]).rest(r.create()),returns:i||r.create(),typeName:H.ZodFunction,...M(x)})}}class Xp extends V{get schema(){return this._def.getter()}_parse(p){let{ctx:i}=this._processInputParams(p);return this._def.getter()._parse({data:i.data,path:i.path,parent:i})}}Xp.create=(p,i)=>{return new Xp({getter:p,typeName:H.ZodLazy,...M(i)})};class Yp extends V{_parse(p){if(p.data!==this._def.value){let i=this._getOrReturnCtx(p);return Q(i,{received:i.data,code:_.invalid_literal,expected:this._def.value}),W}return{status:"valid",value:p.data}}get value(){return this._def.value}}Yp.create=(p,i)=>{return new Yp({value:p,typeName:H.ZodLiteral,...M(i)})};function Si(p,i){return new ip({values:p,typeName:H.ZodEnum,...M(i)})}class ip extends V{_parse(p){if(typeof p.data!=="string"){let i=this._getOrReturnCtx(p),x=this._def.values;return Q(i,{expected:U.joinValues(x),received:i.parsedType,code:_.invalid_type}),W}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(p.data)){let i=this._getOrReturnCtx(p),x=this._def.values;return Q(i,{received:i.data,code:_.invalid_enum_value,options:x}),W}return S(p.data)}get options(){return this._def.values}get enum(){let p={};for(let i of this._def.values)p[i]=i;return p}get Values(){let p={};for(let i of this._def.values)p[i]=i;return p}get Enum(){let p={};for(let i of this._def.values)p[i]=i;return p}extract(p,i=this._def){return ip.create(p,{...this._def,...i})}exclude(p,i=this._def){return ip.create(this.options.filter((x)=>!p.includes(x)),{...this._def,...i})}}ip.create=Si;class Bp extends V{_parse(p){let i=U.getValidEnumValues(this._def.values),x=this._getOrReturnCtx(p);if(x.parsedType!==G.string&&x.parsedType!==G.number){let v=U.objectValues(i);return Q(x,{expected:U.joinValues(v),received:x.parsedType,code:_.invalid_type}),W}if(!this._cache)this._cache=new Set(U.getValidEnumValues(this._def.values));if(!this._cache.has(p.data)){let v=U.objectValues(i);return Q(x,{received:x.data,code:_.invalid_enum_value,options:v}),W}return S(p.data)}get enum(){return this._def.values}}Bp.create=(p,i)=>{return new Bp({values:p,typeName:H.ZodNativeEnum,...M(i)})};class lp extends V{unwrap(){return this._def.type}_parse(p){let{ctx:i}=this._processInputParams(p);if(i.parsedType!==G.promise&&i.common.async===!1)return Q(i,{code:_.invalid_type,expected:G.promise,received:i.parsedType}),W;let x=i.parsedType===G.promise?i.data:Promise.resolve(i.data);return S(x.then((v)=>{return this._def.type.parseAsync(v,{path:i.path,errorMap:i.common.contextualErrorMap})}))}}lp.create=(p,i)=>{return new lp({type:p,typeName:H.ZodPromise,...M(i)})};class E extends V{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===H.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(p){let{status:i,ctx:x}=this._processInputParams(p),v=this._def.effect||null,m={addIssue:(f)=>{if(Q(x,f),f.fatal)i.abort();else i.dirty()},get path(){return x.path}};if(m.addIssue=m.addIssue.bind(m),v.type==="preprocess"){let f=v.transform(x.data,m);if(x.common.async)return Promise.resolve(f).then(async(w)=>{if(i.value==="aborted")return W;let l=await this._def.schema._parseAsync({data:w,path:x.path,parent:x});if(l.status==="aborted")return W;if(l.status==="dirty")return vp(l.value);if(i.value==="dirty")return vp(l.value);return l});else{if(i.value==="aborted")return W;let w=this._def.schema._parseSync({data:f,path:x.path,parent:x});if(w.status==="aborted")return W;if(w.status==="dirty")return vp(w.value);if(i.value==="dirty")return vp(w.value);return w}}if(v.type==="refinement"){let f=(w)=>{let l=v.refinement(w,m);if(x.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return w};if(x.common.async===!1){let w=this._def.schema._parseSync({data:x.data,path:x.path,parent:x});if(w.status==="aborted")return W;if(w.status==="dirty")i.dirty();return f(w.value),{status:i.value,value:w.value}}else return this._def.schema._parseAsync({data:x.data,path:x.path,parent:x}).then((w)=>{if(w.status==="aborted")return W;if(w.status==="dirty")i.dirty();return f(w.value).then(()=>{return{status:i.value,value:w.value}})})}if(v.type==="transform")if(x.common.async===!1){let f=this._def.schema._parseSync({data:x.data,path:x.path,parent:x});if(!s(f))return W;let w=v.transform(f.value,m);if(w instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:w}}else return this._def.schema._parseAsync({data:x.data,path:x.path,parent:x}).then((f)=>{if(!s(f))return W;return Promise.resolve(v.transform(f.value,m)).then((w)=>({status:i.value,value:w}))});U.assertNever(v)}}E.create=(p,i,x)=>{return new E({schema:p,typeName:H.ZodEffects,effect:i,...M(x)})};E.createWithPreprocess=(p,i,x)=>{return new E({schema:i,effect:{type:"preprocess",transform:p},typeName:H.ZodEffects,...M(x)})};class C extends V{_parse(p){if(this._getType(p)===G.undefined)return S(void 0);return this._def.innerType._parse(p)}unwrap(){return this._def.innerType}}C.create=(p,i)=>{return new C({innerType:p,typeName:H.ZodOptional,...M(i)})};class u extends V{_parse(p){if(this._getType(p)===G.null)return S(null);return this._def.innerType._parse(p)}unwrap(){return this._def.innerType}}u.create=(p,i)=>{return new u({innerType:p,typeName:H.ZodNullable,...M(i)})};class Wp extends V{_parse(p){let{ctx:i}=this._processInputParams(p),x=i.data;if(i.parsedType===G.undefined)x=this._def.defaultValue();return this._def.innerType._parse({data:x,path:i.path,parent:i})}removeDefault(){return this._def.innerType}}Wp.create=(p,i)=>{return new Wp({innerType:p,typeName:H.ZodDefault,defaultValue:typeof i.default==="function"?i.default:()=>i.default,...M(i)})};class Hp extends V{_parse(p){let{ctx:i}=this._processInputParams(p),x={...i,common:{...i.common,issues:[]}},v=this._def.innerType._parse({data:x.data,path:x.path,parent:{...x}});if(jp(v))return v.then((m)=>{return{status:"valid",value:m.status==="valid"?m.value:this._def.catchValue({get error(){return new L(x.common.issues)},input:x.data})}});else return{status:"valid",value:v.status==="valid"?v.value:this._def.catchValue({get error(){return new L(x.common.issues)},input:x.data})}}removeCatch(){return this._def.innerType}}Hp.create=(p,i)=>{return new Hp({innerType:p,typeName:H.ZodCatch,catchValue:typeof i.catch==="function"?i.catch:()=>i.catch,...M(i)})};class Sp extends V{_parse(p){if(this._getType(p)!==G.nan){let x=this._getOrReturnCtx(p);return Q(x,{code:_.invalid_type,expected:G.nan,received:x.parsedType}),W}return{status:"valid",value:p.data}}}Sp.create=(p)=>{return new Sp({typeName:H.ZodNaN,...M(p)})};var Fm=Symbol("zod_brand");class Zp extends V{_parse(p){let{ctx:i}=this._processInputParams(p),x=i.data;return this._def.type._parse({data:x,path:i.path,parent:i})}unwrap(){return this._def.type}}class Fp extends V{_parse(p){let{status:i,ctx:x}=this._processInputParams(p);if(x.common.async)return(async()=>{let m=await this._def.in._parseAsync({data:x.data,path:x.path,parent:x});if(m.status==="aborted")return W;if(m.status==="dirty")return i.dirty(),vp(m.value);else return this._def.out._parseAsync({data:m.value,path:x.path,parent:x})})();else{let v=this._def.in._parseSync({data:x.data,path:x.path,parent:x});if(v.status==="aborted")return W;if(v.status==="dirty")return i.dirty(),{status:"dirty",value:v.value};else return this._def.out._parseSync({data:v.value,path:x.path,parent:x})}}static create(p,i){return new Fp({in:p,out:i,typeName:H.ZodPipeline})}}class ap extends V{_parse(p){let i=this._def.innerType._parse(p),x=(v)=>{if(s(v))v.value=Object.freeze(v.value);return v};return jp(i)?i.then((v)=>x(v)):x(i)}unwrap(){return this._def.innerType}}ap.create=(p,i)=>{return new ap({innerType:p,typeName:H.ZodReadonly,...M(i)})};function Ai(p,i){let x=typeof p==="function"?p(i):typeof p==="string"?{message:p}:p;return typeof x==="string"?{message:x}:x}function Fi(p,i={},x){if(p)return fp.create().superRefine((v,m)=>{let f=p(v);if(f instanceof Promise)return f.then((w)=>{if(!w){let l=Ai(i,v),z=l.fatal??x??!0;m.addIssue({code:"custom",...l,fatal:z})}});if(!f){let w=Ai(i,v),l=w.fatal??x??!0;m.addIssue({code:"custom",...w,fatal:l})}return});return fp.create()}var Dm={object:R.lazycreate},H;(function(p){p.ZodString="ZodString",p.ZodNumber="ZodNumber",p.ZodNaN="ZodNaN",p.ZodBigInt="ZodBigInt",p.ZodBoolean="ZodBoolean",p.ZodDate="ZodDate",p.ZodSymbol="ZodSymbol",p.ZodUndefined="ZodUndefined",p.ZodNull="ZodNull",p.ZodAny="ZodAny",p.ZodUnknown="ZodUnknown",p.ZodNever="ZodNever",p.ZodVoid="ZodVoid",p.ZodArray="ZodArray",p.ZodObject="ZodObject",p.ZodUnion="ZodUnion",p.ZodDiscriminatedUnion="ZodDiscriminatedUnion",p.ZodIntersection="ZodIntersection",p.ZodTuple="ZodTuple",p.ZodRecord="ZodRecord",p.ZodMap="ZodMap",p.ZodSet="ZodSet",p.ZodFunction="ZodFunction",p.ZodLazy="ZodLazy",p.ZodLiteral="ZodLiteral",p.ZodEnum="ZodEnum",p.ZodEffects="ZodEffects",p.ZodNativeEnum="ZodNativeEnum",p.ZodOptional="ZodOptional",p.ZodNullable="ZodNullable",p.ZodDefault="ZodDefault",p.ZodCatch="ZodCatch",p.ZodPromise="ZodPromise",p.ZodBranded="ZodBranded",p.ZodPipeline="ZodPipeline",p.ZodReadonly="ZodReadonly"})(H||(H={}));var Lm=(p,i={message:`Input not instance of ${p.name}`})=>Fi((x)=>x instanceof p,i),Di=O.create,Li=e.create,Om=Sp.create,Km=pp.create,Oi=$p.create,Cm=mp.create,Nm=Ap.create,Em=_p.create,Im=Gp.create,Tm=fp.create,Pm=r.create,om=o.create,Zm=cp.create,hm=K.create,nm=R.create,dm=R.strictCreate,ym=Qp.create,km=op.create,um=Jp.create,tm=Z.create,sm=Rp.create,rm=bp.create,em=wp.create,pf=gp.create,xf=Xp.create,vf=Yp.create,mf=ip.create,ff=Bp.create,wf=lp.create,lf=E.create,zf=C.create,jf=u.create,qf=E.createWithPreprocess,gf=Fp.create,$f=()=>Di().optional(),_f=()=>Li().optional(),Gf=()=>Oi().optional(),Qf={string:(p)=>O.create({...p,coerce:!0}),number:(p)=>e.create({...p,coerce:!0}),boolean:(p)=>$p.create({...p,coerce:!0}),bigint:(p)=>pp.create({...p,coerce:!0}),date:(p)=>mp.create({...p,coerce:!0})};var Jf=W;var Xf=B.function().args(B.any()).returns(B.promise(B.object({error:B.any().optional(),output:B.any()}))),Ki=B.object({en:B.string().optional(),"zh-CN":B.string(),"zh-Hant":B.string().optional()}),Yf=B.object({version:B.string().optional()});function Ci(p){return Yf.merge(p)}var Bf=B.enum(["tools","search","multimodal","communication","other"]),Wf=B.object({version:B.string(),description:B.string().optional()}),pi=B.object({toolId:B.string(),name:Ki,description:Ki,type:Bf,icon:B.string(),author:B.string().optional(),docURL:B.string().optional(),versionList:B.array(Wf).min(1),parentId:B.string().optional(),isToolSet:B.boolean().optional(),cb:Xf}),Hf=pi.merge(B.object({children:B.array(pi)})),Bz=pi.omit({cb:!0,isToolSet:!0,toolId:!0}).merge(B.object({toolId:B.string().optional(),inputs:B.unknown(),outputs:B.unknown()})),Wz=Hf.omit({cb:!0,isToolSet:!0,toolId:!0}).merge(B.object({toolId:B.string().optional()}));function Ni(p){return{isToolSet:!1,...p}}var Ei=Ni({toolId:"community-smtpEmail",versionList:[{version:"1.0.0",description:"初始版本"}],type:"communication",name:{"zh-CN":"Email 邮件发送",en:"SMTP Email"},description:{"zh-CN":"通过SMTP协议发送电子邮件(nodemailer)",en:"Send email by SMTP protocol (nodemailer)"},icon:"plugins/email",inputs:[{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"smtpHost",label:"smtpHost",description:"",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0,customInputConfig:{selectValueTypeList:["string"]}},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"smtpPort",label:"smtpPort",description:"SMTP端口",defaultValue:"465",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0},{renderTypeList:["select","reference"],selectedTypeIndex:0,valueType:"string",key:"SSL",label:"SSL",description:"SSL",defaultValue:"true",list:[{label:"true",value:"true"},{label:"false",value:"false"}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"smtpUser",label:"smtpUser",description:"SMTP用户名, 邮箱账号",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"smtpPass",label:"smtpPass",description:"邮箱密码或授权码",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"fromName",label:"fromName",description:"显示的发件人名称",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"to",label:"to",description:"请输入收件人邮箱，多个邮箱用逗号分隔",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0,toolDescription:"请输入收件人邮箱，多个邮箱用逗号分隔"},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"subject",label:"subject",description:"请输入邮件主题",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0,toolDescription:"请输入邮件主题"},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"content",label:"content",description:"请输入邮件内容，支持HTML格式",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!0,toolDescription:"请输入邮件内容，支持HTML格式"},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"cc",label:"cc",description:"请输入抄送邮箱，多个邮箱用逗号分隔",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!1,toolDescription:"请输入抄送邮箱，多个邮箱用逗号分隔"},{renderTypeList:["input","reference"],selectedTypeIndex:0,valueType:"string",key:"bcc",label:"bcc",description:"请输入密送邮箱，多个邮箱用逗号分隔",defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!1,toolDescription:"请输入密送邮箱，多个邮箱用逗号分隔"},{renderTypeList:["JSONEditor","reference"],selectedTypeIndex:0,valueType:"string",key:"attachments",label:"attachments",description:`必须是json数组格式
[{"filename":"附件名","path":"附件url"}]`,defaultValue:"",list:[{label:"",value:""}],maxFiles:5,canSelectFile:!0,canSelectImg:!0,required:!1,customInputConfig:{selectValueTypeList:["arrayObject"]},toolDescription:`必须是json数组格式
[{"filename":"附件名","path":"附件url"}]`,maxLength:0}],outputs:[{id:"result",type:"static",valueType:"string",key:"result",label:"发送结果",description:"发送结果"}]});var Ii=(p)=>{return p=p.replace(/(?<=https?:\/\/)[^\s]+/g,"xxx"),p=p.replace(/ns-[\w-]+/g,"xxx"),p};var Ti=(p,i="")=>{let x=typeof p==="string"?p:p?.response?.data?.message||p?.response?.message||p?.message||p?.response?.data?.msg||p?.response?.msg||p?.msg||i;return Ii(x)};var uv=vm(kv(),1),tv=Ci(B.object({smtpHost:B.string(),smtpPort:B.string(),SSL:B.boolean(),smtpUser:B.string(),smtpPass:B.string(),fromName:B.string().optional(),to:B.string(),subject:B.string(),content:B.string(),cc:B.string().optional(),bcc:B.string().optional(),attachments:B.string().optional()})),G2=B.object({success:B.boolean(),messageId:B.string().optional(),error:B.string().optional()}),Il=(p)=>{return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p)},Mi=(p)=>{return p.split(",").every((i)=>Il(i.trim()))},Tl=async({smtpHost:p,smtpPort:i,SSL:x,smtpUser:v,smtpPass:m,fromName:f,to:w,subject:l,content:z,cc:j,bcc:q,attachments:$})=>{try{if(!p||!i||!v||!m)throw new Error("Incomplete SMTP configuration");if(!w||!l||!z)throw new Error("Recipient, subject, and content are required");if(!Mi(w))throw new Error("Invalid recipient email format");if(j&&!Mi(j))throw new Error("Invalid CC email format");if(q&&!Mi(q))throw new Error("Invalid BCC email format");let g=uv.default.createTransport({host:p,port:Number(i),secure:x===!0,auth:{user:v,pass:m}}),X=[];try{X=JSON.parse($||"[]")}catch(c){throw new Error("Attachment format parsing error, please check attachment configuration")}return{success:!0,messageId:(await g.sendMail({from:`"${f||"FastGPT"}" <${v}>`,to:w.split(",").map((c)=>c.trim()).join(","),cc:j?.split(",").map((c)=>c.trim()).join(","),bcc:q?.split(",").map((c)=>c.trim()).join(","),subject:l,html:z,attachments:X||[]})).messageId}}catch(g){return{success:!1,error:Ti(g)}}};async function sv(p){return Tl(p)}var __dirname="/Volumes/Code/fastgpt-tools/utils",rv=({toolCb:p,InputType:i,config:x})=>{let v=async(f)=>{try{return{output:await p(i.parse(f))}}catch(w){return{error:w}}};return x.toolId=x.toolId??__dirname.split("/").pop()?.split(".").shift(),{...x,toolId:x.toolId,cb:v}};var W2=rv({toolCb:sv,InputType:tv,config:Ei});export{W2 as default};
