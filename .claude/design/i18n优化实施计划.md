# FastGPT i18n å®¢æˆ·ç«¯åŒ–ä¼˜åŒ–å®æ–½è®¡åˆ’

## é¡¹ç›®èƒŒæ™¯

å½“å‰ FastGPT æ‰€æœ‰é¡µé¢éƒ½ä½¿ç”¨ `getServerSideProps` + `serviceSideProps` æ¥åŠ è½½å›½é™…åŒ–ç¿»è¯‘ï¼Œå¯¼è‡´æ¯æ¬¡è·¯ç”±åˆ‡æ¢éƒ½éœ€è¦æœåŠ¡ç«¯å¤„ç†ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚ç”±äºå¤§éƒ¨åˆ†é¡µé¢ä¸éœ€è¦ SEOï¼Œå¯ä»¥å°† i18n è¿ç§»åˆ°å®¢æˆ·ç«¯ï¼Œæ¶ˆé™¤æœåŠ¡ç«¯é˜»å¡ã€‚

**é¢„æœŸæ”¹å–„**: è·¯ç”±åˆ‡æ¢æ—¶é—´å‡å°‘ 40-50% (ä» 1560ms é™è‡³ 900ms å·¦å³)

---

## ç›®æ ‡

1. âœ… ç§»é™¤å¤§éƒ¨åˆ†é¡µé¢çš„ `getServerSideProps`ï¼Œæ”¹ä¸ºçº¯å®¢æˆ·ç«¯æ¸²æŸ“
2. âœ… å®ç°å®¢æˆ·ç«¯ i18n æŒ‰éœ€åŠ è½½å’Œé¢„åŠ è½½ç­–ç•¥
3. âœ… ä¿ç•™éœ€è¦ SEO çš„é¡µé¢çš„æœåŠ¡ç«¯æ¸²æŸ“
4. âœ… ç¡®ä¿ç¿»è¯‘åŠŸèƒ½å®Œæ•´æ€§ï¼Œæ— é—ªçƒå’ŒåŠ è½½å¤±è´¥

---

## æŠ€æœ¯æ–¹æ¡ˆ

### æ¶æ„å¯¹æ¯”

```
æ—§æ¶æ„ (æœåŠ¡ç«¯ i18n):
ç”¨æˆ·ç‚¹å‡»è·¯ç”±
â†’ æœåŠ¡ç«¯ getServerSideProps
â†’ åŠ è½½ i18n æ–‡ä»¶ (é˜»å¡)
â†’ æœåŠ¡ç«¯æ¸²æŸ“ HTML
â†’ è¿”å›å®¢æˆ·ç«¯æ°´åˆ
= 780ms+

æ–°æ¶æ„ (å®¢æˆ·ç«¯ i18n):
ç”¨æˆ·ç‚¹å‡»è·¯ç”±
â†’ ç«‹å³æ˜¾ç¤ºé¡µé¢éª¨æ¶
â†’ å¹¶è¡ŒåŠ è½½: bundle + i18n + æ•°æ®
â†’ React æ¸²æŸ“å®Œæˆ
= 400-500ms
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **i18next**: æ ¸å¿ƒ i18n åº“
- **react-i18next**: React é›†æˆ
- **i18next-http-backend**: HTTP åç«¯åŠ è½½ç¿»è¯‘æ–‡ä»¶
- **i18next-browser-languagedetector**: æµè§ˆå™¨è¯­è¨€æ£€æµ‹

---

## å®æ–½æ­¥éª¤

### Phase 1: åŸºç¡€è®¾æ–½æ­å»º (ç¬¬ 1 å‘¨)

#### 1.1 å®‰è£…ä¾èµ–

```bash
cd projects/app
pnpm add i18next-browser-languagedetector i18next-http-backend
```

#### 1.2 åˆ›å»ºå®¢æˆ·ç«¯ i18n é…ç½®

**æ–‡ä»¶**: `projects/app/src/web/i18n/client.ts`

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';
import Backend from 'i18next-http-backend';

i18n
  .use(Backend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    // é»˜è®¤è¯­è¨€
    fallbackLng: 'zh',
    lng: 'zh',

    // é¢„åŠ è½½æ ¸å¿ƒå‘½åç©ºé—´
    ns: ['common'],
    defaultNS: 'common',

    // åç«¯åŠ è½½é…ç½®
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
      // è¯·æ±‚è¶…æ—¶
      requestOptions: {
        cache: 'no-cache',
      },
    },

    // è¯­è¨€æ£€æµ‹é…ç½®
    detection: {
      order: ['cookie', 'localStorage', 'navigator'],
      caches: ['cookie', 'localStorage'],
      cookieName: 'NEXT_LOCALE',
      lookupCookie: 'NEXT_LOCALE',
      lookupLocalStorage: 'NEXT_LOCALE',
    },

    // React é…ç½®
    react: {
      useSuspense: true,
    },

    // å¼€å‘é…ç½®
    debug: process.env.NODE_ENV === 'development',

    // æ€§èƒ½é…ç½®
    load: 'currentOnly', // åªåŠ è½½å½“å‰è¯­è¨€
    preload: ['zh'], // é¢„åŠ è½½ä¸­æ–‡

    interpolation: {
      escapeValue: false,
    },
  });

export default i18n;
```

**ä¼°è®¡æ—¶é—´**: 2 å°æ—¶

#### 1.3 åˆ›å»ºé¡µé¢å‘½åç©ºé—´æ˜ å°„

**æ–‡ä»¶**: `projects/app/src/web/i18n/namespaceMap.ts`

```typescript
/**
 * é¡µé¢è·¯å¾„åˆ° i18n å‘½åç©ºé—´çš„æ˜ å°„
 * ç”¨äºè‡ªåŠ¨åŠ è½½é¡µé¢æ‰€éœ€çš„ç¿»è¯‘æ–‡ä»¶
 */
export const pageNamespaces: Record<string, string[]> = {
  // åº”ç”¨ç›¸å…³
  '/app/detail': ['app', 'chat', 'workflow', 'publish', 'file'],
  '/dashboard/agent': ['app'],

  // æ•°æ®é›†ç›¸å…³
  '/dataset/list': ['dataset'],
  '/dataset/detail': ['dataset'],

  // è´¦æˆ·ç›¸å…³
  '/account/setting': ['user'],
  '/account/apikey': ['user'],
  '/account/bill': ['user'],
  '/account/usage': ['user'],
  '/account/promotion': ['user'],
  '/account/inform': ['user'],
  '/account/team': ['user'],
  '/account/model': ['user'],
  '/account/info': ['user'],
  '/account/thirdParty': ['user'],

  // ä»ªè¡¨æ¿ç›¸å…³
  '/dashboard/evaluation': ['app'],
  '/dashboard/templateMarket': ['app'],
  '/dashboard/mcpServer': ['app'],

  // å…¶ä»–é¡µé¢
  '/more': ['common'],
  '/price': ['common'],

  // éœ€è¦ SEO çš„é¡µé¢ä¿æŒæœåŠ¡ç«¯æ¸²æŸ“
  // '/chat/share': ä½¿ç”¨ getServerSideProps
  // '/login': ä½¿ç”¨ getServerSideProps
};

/**
 * åˆ¤æ–­é¡µé¢æ˜¯å¦éœ€è¦æœåŠ¡ç«¯æ¸²æŸ“
 */
export const needsSSR = (pathname: string): boolean => {
  const ssrPages = [
    '/chat/share',    // åˆ†äº«é¡µé¢éœ€è¦ SEO
    '/price',         // å®šä»·é¡µé¢éœ€è¦ SEO (å¯é€‰)
    '/login',         // ç™»å½•é¡µé¦–å±ä½“éªŒ
    '/login/provider',
    '/login/fastlogin',
  ];

  return ssrPages.some(page => pathname.startsWith(page));
};

/**
 * è·å–é¡µé¢éœ€è¦çš„å‘½åç©ºé—´
 */
export const getPageNamespaces = (pathname: string): string[] => {
  // ç²¾ç¡®åŒ¹é…
  if (pageNamespaces[pathname]) {
    return pageNamespaces[pathname];
  }

  // æ¨¡ç³ŠåŒ¹é… (ä¾‹å¦‚ /dashboard/[pluginGroupId] åŒ¹é… /dashboard/*)
  for (const [path, namespaces] of Object.entries(pageNamespaces)) {
    if (pathname.startsWith(path)) {
      return namespaces;
    }
  }

  // é»˜è®¤åªåŠ è½½ common
  return [];
};
```

**ä¼°è®¡æ—¶é—´**: 1 å°æ—¶

#### 1.4 åˆ›å»ºé¡µé¢çº§ i18n Hook

**æ–‡ä»¶**: `projects/app/src/web/i18n/usePageI18n.ts`

```typescript
import { useEffect, useState } from 'react';
import { useTranslation } from 'react-i18next';
import { useRouter } from 'next/router';
import i18n from './client';
import { getPageNamespaces } from './namespaceMap';

/**
 * é¡µé¢çº§ i18n Hook
 * è‡ªåŠ¨åŠ è½½å½“å‰é¡µé¢éœ€è¦çš„å‘½åç©ºé—´
 */
export function usePageI18n(pathname?: string) {
  const router = useRouter();
  const { i18n: i18nInstance } = useTranslation();
  const [isLoading, setIsLoading] = useState(false);
  const [isReady, setIsReady] = useState(false);

  useEffect(() => {
    const currentPath = pathname || router.pathname;
    const namespaces = getPageNamespaces(currentPath);

    if (namespaces.length === 0) {
      setIsReady(true);
      return;
    }

    setIsLoading(true);

    // åŠ è½½æ‰€æœ‰éœ€è¦çš„å‘½åç©ºé—´
    Promise.all(
      namespaces.map(ns => {
        // æ£€æŸ¥æ˜¯å¦å·²åŠ è½½
        if (i18nInstance.hasResourceBundle(i18nInstance.language, ns)) {
          return Promise.resolve();
        }
        return i18nInstance.loadNamespaces(ns);
      })
    )
      .then(() => {
        setIsReady(true);
      })
      .catch(error => {
        console.error('Failed to load i18n namespaces:', error);
        setIsReady(true); // å³ä½¿å¤±è´¥ä¹Ÿç»§ç»­æ¸²æŸ“
      })
      .finally(() => {
        setIsLoading(false);
      });
  }, [pathname, router.pathname, i18nInstance]);

  return { isLoading, isReady };
}
```

**ä¼°è®¡æ—¶é—´**: 1 å°æ—¶

#### 1.5 åˆ›å»ºé¢„åŠ è½½ Hook

**æ–‡ä»¶**: `projects/app/src/web/i18n/useI18nPreload.ts`

```typescript
import { useEffect } from 'react';
import { useRouter } from 'next/router';
import i18n from './client';
import { getPageNamespaces } from './namespaceMap';

/**
 * i18n é¢„åŠ è½½ Hook
 * åœ¨é“¾æ¥æ‚¬åœæ—¶é¢„åŠ è½½ç›®æ ‡é¡µé¢çš„ç¿»è¯‘
 */
export function useI18nPreload() {
  const router = useRouter();

  useEffect(() => {
    // é¢„åŠ è½½å½“å‰è·¯ç”±çš„å‘½åç©ºé—´
    const currentNamespaces = getPageNamespaces(router.pathname);
    currentNamespaces.forEach(ns => {
      if (!i18n.hasResourceBundle(i18n.language, ns)) {
        i18n.loadNamespaces(ns);
      }
    });

    // ç›‘å¬é“¾æ¥æ‚¬åœäº‹ä»¶
    const handleMouseEnter = (e: MouseEvent) => {
      const target = e.target as HTMLElement;
      const link = target.closest('a[href^="/"]');

      if (link) {
        const href = link.getAttribute('href');
        if (href) {
          const namespaces = getPageNamespaces(href);
          namespaces.forEach(ns => {
            if (!i18n.hasResourceBundle(i18n.language, ns)) {
              // é¢„åŠ è½½ä½†ä¸é˜»å¡
              i18n.loadNamespaces(ns).catch(() => {
                // é™é»˜å¤±è´¥
              });
            }
          });
        }
      }
    };

    // ä½¿ç”¨æ•è·é˜¶æ®µç›‘å¬æ‰€æœ‰é“¾æ¥
    document.addEventListener('mouseenter', handleMouseEnter, true);

    return () => {
      document.removeEventListener('mouseenter', handleMouseEnter, true);
    };
  }, [router.pathname]);
}
```

**ä¼°è®¡æ—¶é—´**: 1 å°æ—¶

#### 1.6 åˆ›å»º Loading ç»„ä»¶

**æ–‡ä»¶**: `projects/app/src/components/i18n/I18nLoading.tsx`

```typescript
import React from 'react';
import { Box, Spinner, Center } from '@chakra-ui/react';

/**
 * i18n åŠ è½½çŠ¶æ€ç»„ä»¶
 * åœ¨ç¿»è¯‘æ–‡ä»¶åŠ è½½æ—¶æ˜¾ç¤º
 */
export const I18nLoading: React.FC<{ message?: string }> = ({
  message = 'åŠ è½½ä¸­...'
}) => {
  return (
    <Center h="100vh" w="100%">
      <Box textAlign="center">
        <Spinner size="lg" color="primary.500" mb={4} />
        <Box color="myGray.600" fontSize="sm">
          {message}
        </Box>
      </Box>
    </Center>
  );
};

/**
 * è½»é‡çº§ Loading (ç”¨äºé¡µé¢å†…éƒ¨)
 */
export const I18nInlineLoading: React.FC = () => {
  return (
    <Box display="inline-flex" alignItems="center" ml={2}>
      <Spinner size="sm" color="primary.500" />
    </Box>
  );
};
```

**ä¼°è®¡æ—¶é—´**: 0.5 å°æ—¶

#### 1.7 ç¡®ä¿ç¿»è¯‘æ–‡ä»¶å¯è®¿é—®

æ£€æŸ¥ç¿»è¯‘æ–‡ä»¶ä½ç½®ï¼Œç¡®ä¿å®¢æˆ·ç«¯å¯ä»¥è®¿é—®ï¼š

```bash
# æ£€æŸ¥ç°æœ‰ç¿»è¯‘æ–‡ä»¶ä½ç½®
ls -la projects/app/public/locales/
# æˆ–
ls -la packages/web/i18n/
```

å¦‚æœç¿»è¯‘æ–‡ä»¶ä¸åœ¨ `public/locales/`ï¼Œéœ€è¦ï¼š

**é€‰é¡¹ A**: å¤åˆ¶åˆ° public ç›®å½•

```bash
# åˆ›å»ºç›®å½•
mkdir -p projects/app/public/locales

# å¤åˆ¶ç¿»è¯‘æ–‡ä»¶
cp -r packages/web/i18n/* projects/app/public/locales/
```

**é€‰é¡¹ B**: é…ç½® next.config.js é‡å†™

```javascript
// projects/app/next.config.js
const nextConfig = {
  // ... ç°æœ‰é…ç½®

  async rewrites() {
    return [
      {
        source: '/locales/:lng/:ns.json',
        destination: '/api/locales/:lng/:ns',
      },
    ];
  },
};
```

ç„¶ååˆ›å»º API è·¯ç”±ï¼š

**æ–‡ä»¶**: `projects/app/src/pages/api/locales/[lng]/[ns].ts`

```typescript
import type { NextApiRequest, NextApiResponse } from 'next';
import path from 'path';
import fs from 'fs';

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  const { lng, ns } = req.query;

  if (typeof lng !== 'string' || typeof ns !== 'string') {
    return res.status(400).json({ error: 'Invalid parameters' });
  }

  // ç¿»è¯‘æ–‡ä»¶è·¯å¾„
  const filePath = path.join(
    process.cwd(),
    '../../packages/web/i18n',
    lng,
    `${ns}.json`
  );

  if (!fs.existsSync(filePath)) {
    return res.status(404).json({ error: 'Translation file not found' });
  }

  const content = fs.readFileSync(filePath, 'utf-8');

  // è®¾ç½®ç¼“å­˜å¤´
  res.setHeader('Cache-Control', 'public, max-age=3600, s-maxage=3600');
  res.setHeader('Content-Type', 'application/json');

  return res.status(200).send(content);
}
```

**ä¼°è®¡æ—¶é—´**: 1 å°æ—¶

**Phase 1 æ€»è®¡**: 7.5 å°æ—¶ (çº¦ 1 ä¸ªå·¥ä½œæ—¥)

---

### Phase 2: ä¿®æ”¹ _app.tsx (ç¬¬ 2 å‘¨ - Day 1)

#### 2.1 ä¿®æ”¹ _app.tsx

**æ–‡ä»¶**: `projects/app/src/pages/_app.tsx`

```typescript
import '@scalar/api-reference-react/style.css';

import type { AppProps } from 'next/app';
import Script from 'next/script';
import Layout from '@/components/Layout';
import { I18nextProvider } from 'react-i18next';
import i18n from '@/web/i18n/client';
import { useI18nPreload } from '@/web/i18n/useI18nPreload';

import QueryClientContext from '@/web/context/QueryClient';
import ChakraUIContext from '@/web/context/ChakraUI';
import { useInitApp } from '@/web/context/useInitApp';
import '@/web/styles/reset.scss';
import NextHead from '@/components/common/NextHead';
import { type ReactElement, useEffect, Suspense } from 'react';
import { type NextPage } from 'next';
import { getWebReqUrl } from '@fastgpt/web/common/system/utils';
import SystemStoreContextProvider from '@fastgpt/web/context/useSystem';
import { useRouter } from 'next/router';
import { I18nLoading } from '@/components/i18n/I18nLoading';

type NextPageWithLayout = NextPage & {
  setLayout?: (page: ReactElement) => JSX.Element;
};
type AppPropsWithLayout = AppProps & {
  Component: NextPageWithLayout;
};

const routesWithCustomHead = ['/chat', '/chat/share', '/app/detail/', '/dataset/detail'];
const routesWithoutLayout = ['/openapi'];

function AppContent({ Component, pageProps }: AppPropsWithLayout) {
  const { feConfigs, scripts, title } = useInitApp();

  // å¯ç”¨é¢„åŠ è½½
  useI18nPreload();

  useEffect(() => {
    document.addEventListener(
      'wheel',
      function (e) {
        if (e.ctrlKey && Math.abs(e.deltaY) !== 0) {
          e.preventDefault();
        }
      },
      { passive: false }
    );
  }, []);

  const setLayout = Component.setLayout || ((page) => <>{page}</>);
  const router = useRouter();
  const showHead = !router?.pathname || !routesWithCustomHead.includes(router.pathname);
  const shouldUseLayout = !router?.pathname || !routesWithoutLayout.includes(router.pathname);

  if (router.pathname === '/openapi') {
    return (
      <>
        {showHead && (
          <NextHead
            title={title}
            desc={process.env.SYSTEM_DESCRIPTION}
            icon={getWebReqUrl(feConfigs?.favicon || process.env.SYSTEM_FAVICON)}
          />
        )}
        {setLayout(<Component {...pageProps} />)}
      </>
    );
  }

  return (
    <>
      {showHead && (
        <NextHead
          title={title}
          desc={process.env.SYSTEM_DESCRIPTION}
          icon={getWebReqUrl(feConfigs?.favicon || process.env.SYSTEM_FAVICON)}
        />
      )}

      {scripts?.map((item, i) => <Script key={i} strategy="lazyOnload" {...item}></Script>)}

      <QueryClientContext>
        <SystemStoreContextProvider device={pageProps.deviceSize}>
          <ChakraUIContext>
            {shouldUseLayout ? (
              <Layout>{setLayout(<Component {...pageProps} />)}</Layout>
            ) : (
              setLayout(<Component {...pageProps} />)
            )}
          </ChakraUIContext>
        </SystemStoreContextProvider>
      </QueryClientContext>
    </>
  );
}

function App(props: AppPropsWithLayout) {
  return (
    <I18nextProvider i18n={i18n}>
      <Suspense fallback={<I18nLoading message="æ­£åœ¨åŠ è½½ç¿»è¯‘..." />}>
        <AppContent {...props} />
      </Suspense>
    </I18nextProvider>
  );
}

// âŒ ç§»é™¤ appWithTranslation
// export default appWithTranslation(App);

// âœ… ç›´æ¥å¯¼å‡º
export default App;
```

**ä¼°è®¡æ—¶é—´**: 1 å°æ—¶

**Phase 2 æ€»è®¡**: 1 å°æ—¶

---

### Phase 3: é€é¡µè¿ç§» (ç¬¬ 2-3 å‘¨)

#### 3.1 ä¼˜å…ˆçº§é¡µé¢åˆ—è¡¨

```yaml
P0 - é«˜é¢‘è®¿é—®é¡µé¢ (ä¼˜å…ˆè¿ç§»):
  - /app/detail (åº”ç”¨ç¼–è¾‘é¡µ)
  - /dataset/list (æ•°æ®é›†åˆ—è¡¨)
  - /dataset/detail (æ•°æ®é›†è¯¦æƒ…)
  - /dashboard/agent (åº”ç”¨åˆ—è¡¨)

P1 - ä¸­é¢‘è®¿é—®é¡µé¢:
  - /account/setting (è´¦æˆ·è®¾ç½®)
  - /account/team (å›¢é˜Ÿç®¡ç†)
  - /account/apikey (API å¯†é’¥)
  - /account/usage (ç”¨é‡ç»Ÿè®¡)
  - /dashboard/evaluation (è¯„æµ‹)
  - /dashboard/templateMarket (æ¨¡æ¿å¸‚åœº)

P2 - ä½é¢‘è®¿é—®é¡µé¢:
  - /account/bill (è´¦å•)
  - /account/promotion (æ¨å¹¿)
  - /account/inform (é€šçŸ¥)
  - /account/model (æ¨¡å‹)
  - /account/info (ä¸ªäººä¿¡æ¯)
  - /account/thirdParty (ç¬¬ä¸‰æ–¹ç™»å½•)
  - /dashboard/mcpServer (MCP æœåŠ¡å™¨)
  - /more (æ›´å¤š)

ä¿æŒ SSR (éœ€è¦ SEO):
  - /chat/share (åˆ†äº«é¡µé¢)
  - /login (ç™»å½•é¡µ)
  - /login/provider (ç¬¬ä¸‰æ–¹ç™»å½•)
  - /login/fastlogin (å¿«é€Ÿç™»å½•)
  - /price (å®šä»·é¡µ - å¯é€‰)
```

#### 3.2 é¡µé¢è¿ç§»æ¨¡æ¿

å¯¹äºæ¯ä¸ªé¡µé¢ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

**æ­¥éª¤ 1**: åˆ é™¤ `getServerSideProps`

```typescript
// âŒ åˆ é™¤è¿™æ®µä»£ç 
export async function getServerSideProps(context: any) {
  return {
    props: {
      ...(await serviceSideProps(context, ['app', 'chat', 'user']))
    }
  };
}
```

**æ­¥éª¤ 2**: æ·»åŠ  `usePageI18n` hook

```typescript
import { usePageI18n } from '@/web/i18n/usePageI18n';

function PageComponent() {
  // æ·»åŠ è¿™è¡Œ
  const { isReady } = usePageI18n();

  // å¯é€‰ï¼šæ˜¾ç¤ºåŠ è½½çŠ¶æ€
  // if (!isReady) {
  //   return <Loading />;
  // }

  // åŸæœ‰ä»£ç ...
}
```

**æ­¥éª¤ 3**: æµ‹è¯•ç¿»è¯‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# è®¿é—®é¡µé¢ï¼Œæ£€æŸ¥ï¼š
# 1. ç¿»è¯‘æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
# 2. æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
# 3. åˆ‡æ¢è¯­è¨€æ˜¯å¦ç”Ÿæ•ˆ
```

#### 3.3 è¿ç§»ç¤ºä¾‹ï¼š/app/detail

**æ–‡ä»¶**: `projects/app/src/pages/app/detail/index.tsx`

**ä¿®æ”¹å‰**:
```typescript
export async function getServerSideProps(context: any) {
  return {
    props: {
      ...(await serviceSideProps(context, ['app', 'chat', 'user', 'file', 'publish', 'workflow']))
    }
  };
}
```

**ä¿®æ”¹å**:
```typescript
import { usePageI18n } from '@/web/i18n/usePageI18n';

const AppDetail = () => {
  const { setAppId, setSource } = useChatStore();
  const appDetail = useContextSelector(AppContext, (e) => e.appDetail);
  const route2Tab = useContextSelector(AppContext, (e) => e.route2Tab);

  // âœ… æ·»åŠ  i18n åŠ è½½
  usePageI18n('/app/detail');

  useEffect(() => {
    setSource('test');
    if (appDetail._id) {
      setAppId(appDetail._id);
      if (!appDetail.permission.hasWritePer) {
        route2Tab(TabEnum.logs);
      }
    }
  }, [appDetail._id]);

  // å…¶ä½™ä»£ç ä¸å˜...
};

// âŒ åˆ é™¤ getServerSideProps
```

**ä¼°è®¡æ—¶é—´**: æ¯ä¸ªé¡µé¢ 15-30 åˆ†é’Ÿ

**Phase 3 æ€»è®¡**:
- P0 é¡µé¢ (4 ä¸ª): 2 å°æ—¶
- P1 é¡µé¢ (6 ä¸ª): 3 å°æ—¶
- P2 é¡µé¢ (7 ä¸ª): 3.5 å°æ—¶
- **æ€»è®¡**: 8.5 å°æ—¶ (çº¦ 1-1.5 ä¸ªå·¥ä½œæ—¥)

---

### Phase 4: ä¿ç•™ SSR é¡µé¢å¤„ç† (ç¬¬ 3 å‘¨ - Day 1)

å¯¹äºéœ€è¦ SEO çš„é¡µé¢ï¼Œä¿æŒä½¿ç”¨ `getServerSideProps`ï¼Œä½†éœ€è¦ç¡®ä¿å®ƒä»¬ä»ç„¶ä½¿ç”¨ `appWithTranslation`ï¼š

#### 4.1 åˆ›å»ºæ··åˆæ¨¡å¼æ”¯æŒ

**æ–‡ä»¶**: `projects/app/src/web/i18n/withSSRI18n.tsx`

```typescript
import { appWithTranslation } from 'next-i18next';
import type { AppProps } from 'next/app';

/**
 * ä¸ºéœ€è¦ SSR çš„é¡µé¢æä¾› i18n æ”¯æŒ
 * è¿™äº›é¡µé¢éœ€è¦ä¿ç•™ getServerSideProps
 */
export const withSSRI18n = (App: any) => {
  return appWithTranslation(App);
};
```

#### 4.2 æ£€æŸ¥ SSR é¡µé¢

ç¡®ä¿ä»¥ä¸‹é¡µé¢ä¿ç•™ `getServerSideProps`ï¼š

**æ–‡ä»¶**: `projects/app/src/pages/chat/share.tsx`
```typescript
// âœ… ä¿ç•™ getServerSideProps
export async function getServerSideProps(context: any) {
  return {
    props: {
      ...(await serviceSideProps(context, ['chat', 'common']))
    }
  };
}
```

**æ–‡ä»¶**: `projects/app/src/pages/login/index.tsx`
```typescript
// âœ… ä¿ç•™ getServerSideProps
export async function getServerSideProps(context: any) {
  return {
    props: {
      ...(await serviceSideProps(context, ['common']))
    }
  };
}
```

**ä¼°è®¡æ—¶é—´**: 1 å°æ—¶

**Phase 4 æ€»è®¡**: 1 å°æ—¶

---

### Phase 5: æµ‹è¯•ä¸ä¼˜åŒ– (ç¬¬ 3 å‘¨ - Day 2-3)

#### 5.1 åŠŸèƒ½æµ‹è¯•æ¸…å•

```yaml
åŸºç¡€åŠŸèƒ½:
  - [ ] é¦–æ¬¡è®¿é—®é¡µé¢ï¼Œç¿»è¯‘æ­£å¸¸åŠ è½½
  - [ ] è·¯ç”±åˆ‡æ¢ï¼Œç¿»è¯‘ä¸ä¸¢å¤±
  - [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸ (ä¸­æ–‡/è‹±æ–‡/æ—¥æ–‡)
  - [ ] åˆ·æ–°é¡µé¢ï¼Œè¯­è¨€è®¾ç½®ä¿æŒ

æ€§èƒ½æµ‹è¯•:
  - [ ] è·¯ç”±åˆ‡æ¢æ—¶é—´æµ‹é‡ (ç›®æ ‡ < 500ms)
  - [ ] i18n æ–‡ä»¶åŠ è½½æ—¶é—´ (ç›®æ ‡ < 100ms)
  - [ ] é¦–å±åŠ è½½æ—¶é—´ (ç›®æ ‡ < 2s)

è¾¹ç¼˜æƒ…å†µ:
  - [ ] ç½‘ç»œæ–­å¼€æ—¶çš„é™çº§å¤„ç†
  - [ ] ç¿»è¯‘æ–‡ä»¶åŠ è½½å¤±è´¥çš„æç¤º
  - [ ] ä¸å­˜åœ¨çš„å‘½åç©ºé—´å¤„ç†
  - [ ] å¹¶å‘è·¯ç”±åˆ‡æ¢

æµè§ˆå™¨å…¼å®¹æ€§:
  - [ ] Chrome æœ€æ–°ç‰ˆ
  - [ ] Firefox æœ€æ–°ç‰ˆ
  - [ ] Safari æœ€æ–°ç‰ˆ
  - [ ] Edge æœ€æ–°ç‰ˆ
  - [ ] ç§»åŠ¨ç«¯æµè§ˆå™¨

SSR é¡µé¢:
  - [ ] /chat/share æ­£å¸¸æ¸²æŸ“å’Œ SEO
  - [ ] /login é¦–å±ä½“éªŒ
  - [ ] çˆ¬è™«å¯ç´¢å¼•å†…å®¹
```

#### 5.2 æ€§èƒ½æµ‹è¯•è„šæœ¬

**æ–‡ä»¶**: `projects/app/test/i18n-performance.test.ts`

```typescript
import { test, expect } from '@playwright/test';

test.describe('i18n Performance', () => {
  test('should load translations within 200ms', async ({ page }) => {
    await page.goto('http://localhost:3000/dashboard/agent');

    const startTime = Date.now();

    // ç­‰å¾…ç¿»è¯‘åŠ è½½å®Œæˆ
    await page.waitForFunction(() => {
      return window.i18next && window.i18next.isInitialized;
    });

    const loadTime = Date.now() - startTime;
    console.log(`i18n loaded in ${loadTime}ms`);

    expect(loadTime).toBeLessThan(200);
  });

  test('should switch routes without translation flash', async ({ page }) => {
    await page.goto('http://localhost:3000/dashboard/agent');
    await page.waitForLoadState('networkidle');

    // ç‚¹å‡»é“¾æ¥åˆ‡æ¢è·¯ç”±
    const startTime = Date.now();
    await page.click('a[href="/app/detail?appId=test"]');

    // ç­‰å¾…æ–°é¡µé¢åŠ è½½
    await page.waitForSelector('[data-testid="app-detail"]');

    const switchTime = Date.now() - startTime;
    console.log(`Route switched in ${switchTime}ms`);

    expect(switchTime).toBeLessThan(500);

    // æ£€æŸ¥ç¿»è¯‘æ˜¯å¦æ­£å¸¸
    const hasTranslation = await page.evaluate(() => {
      return document.body.textContent?.includes('åº”ç”¨') ||
             document.body.textContent?.includes('App');
    });

    expect(hasTranslation).toBe(true);
  });
});
```

#### 5.3 æ€§èƒ½ä¼˜åŒ–

**ä¼˜åŒ– 1**: æ·»åŠ ç¿»è¯‘æ–‡ä»¶ç¼“å­˜

```typescript
// projects/app/src/web/i18n/client.ts
i18n
  .use(Backend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    // ... å…¶ä»–é…ç½®

    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
      // âœ… æ·»åŠ ç¼“å­˜é…ç½®
      requestOptions: {
        cache: 'default', // ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜
      },
    },
  });
```

**ä¼˜åŒ– 2**: Service Worker ç¼“å­˜ç¿»è¯‘æ–‡ä»¶

**æ–‡ä»¶**: `projects/app/public/sw.js`

```javascript
const CACHE_NAME = 'i18n-cache-v1';
const I18N_URLS = [
  '/locales/zh/common.json',
  '/locales/en/common.json',
  '/locales/ja/common.json',
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME).then((cache) => {
      return cache.addAll(I18N_URLS);
    })
  );
});

self.addEventListener('fetch', (event) => {
  if (event.request.url.includes('/locales/')) {
    event.respondWith(
      caches.match(event.request).then((response) => {
        return response || fetch(event.request);
      })
    );
  }
});
```

**ä¼˜åŒ– 3**: é¢„åŠ è½½å…³é”®ç¿»è¯‘

```typescript
// projects/app/src/web/i18n/client.ts
i18n.init({
  // ... å…¶ä»–é…ç½®

  // âœ… é¢„åŠ è½½å…³é”®å‘½åç©ºé—´
  preload: ['zh', 'en'], // é¢„åŠ è½½ä¸­è‹±æ–‡
  ns: ['common'], // é¢„åŠ è½½ common å‘½åç©ºé—´
});
```

**ä¼°è®¡æ—¶é—´**:
- åŠŸèƒ½æµ‹è¯•: 4 å°æ—¶
- æ€§èƒ½æµ‹è¯•: 2 å°æ—¶
- ä¼˜åŒ–å®æ–½: 2 å°æ—¶
- **æ€»è®¡**: 8 å°æ—¶ (1 ä¸ªå·¥ä½œæ—¥)

**Phase 5 æ€»è®¡**: 8 å°æ—¶

---

### Phase 6: ç›‘æ§ä¸æ–‡æ¡£ (ç¬¬ 3 å‘¨ - Day 4)

#### 6.1 æ·»åŠ æ€§èƒ½ç›‘æ§

**æ–‡ä»¶**: `projects/app/src/web/i18n/monitoring.ts`

```typescript
import i18n from './client';

/**
 * i18n æ€§èƒ½ç›‘æ§
 */
export const setupI18nMonitoring = () => {
  // ç›‘å¬è¯­è¨€åˆ‡æ¢
  i18n.on('languageChanged', (lng) => {
    console.log(`[i18n] Language changed to: ${lng}`);

    // å‘é€åˆ°åˆ†ææœåŠ¡
    if (typeof window !== 'undefined' && window.umami) {
      window.umami.track('i18n-language-change', { language: lng });
    }
  });

  // ç›‘å¬å‘½åç©ºé—´åŠ è½½
  i18n.on('loaded', (loaded) => {
    const namespaces = Object.keys(loaded);
    console.log(`[i18n] Loaded namespaces:`, namespaces);
  });

  // ç›‘å¬åŠ è½½å¤±è´¥
  i18n.on('failedLoading', (lng, ns, msg) => {
    console.error(`[i18n] Failed to load ${lng}/${ns}:`, msg);

    // å‘é€é”™è¯¯åˆ°ç›‘æ§æœåŠ¡
    if (typeof window !== 'undefined' && window.umami) {
      window.umami.track('i18n-load-error', {
        language: lng,
        namespace: ns,
        error: msg,
      });
    }
  });
};

// åœ¨ _app.tsx ä¸­è°ƒç”¨
// setupI18nMonitoring();
```

#### 6.2 æ›´æ–°æ–‡æ¡£

**æ–‡ä»¶**: `projects/app/docs/i18n-migration.md`

```markdown
# i18n å®¢æˆ·ç«¯åŒ–è¿ç§»æŒ‡å—

## æ¶æ„å˜æ›´

ä»æœåŠ¡ç«¯ i18n (`next-i18next` + `getServerSideProps`) è¿ç§»åˆ°å®¢æˆ·ç«¯ i18n (`i18next` + HTTP backend)ã€‚

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/web/i18n/namespaceMap.ts` ä¸­æ·»åŠ é¡µé¢æ˜ å°„ï¼š
\`\`\`typescript
export const pageNamespaces: Record<string, string[]> = {
  '/your/new/page': ['common', 'your-namespace'],
};
\`\`\`

2. åœ¨é¡µé¢ç»„ä»¶ä¸­ä½¿ç”¨ `usePageI18n`:
\`\`\`typescript
import { usePageI18n } from '@/web/i18n/usePageI18n';

function YourPage() {
  usePageI18n('/your/new/page');

  // å…¶ä½™ä»£ç ...
}
\`\`\`

3. ä¸éœ€è¦ `getServerSideProps`

### æ·»åŠ æ–°ç¿»è¯‘

ç¿»è¯‘æ–‡ä»¶ä½ç½®: `projects/app/public/locales/[lang]/[namespace].json`

### åˆ‡æ¢è¯­è¨€

\`\`\`typescript
import { useTranslation } from 'react-i18next';

function LanguageSwitcher() {
  const { i18n } = useTranslation();

  return (
    <button onClick={() => i18n.changeLanguage('en')}>
      Switch to English
    </button>
  );
}
\`\`\`

## æ€§èƒ½ç‰¹æ€§

- âœ… è·¯ç”±åˆ‡æ¢æ—¶é—´å‡å°‘ 40-50%
- âœ… æŒ‰éœ€åŠ è½½ç¿»è¯‘æ–‡ä»¶
- âœ… è‡ªåŠ¨é¢„åŠ è½½é“¾æ¥ç›®æ ‡çš„ç¿»è¯‘
- âœ… æµè§ˆå™¨ç¼“å­˜æ”¯æŒ

## æ³¨æ„äº‹é¡¹

- éœ€è¦ SEO çš„é¡µé¢ä»ä½¿ç”¨ `getServerSideProps`
- é¦–æ¬¡è®¿é—®ç•¥æ…¢ (å¤š 100-200ms)
- é…åˆ Service Worker å¯ç¦»çº¿ä½¿ç”¨
\`\`\`

#### 6.3 å›¢é˜ŸåŸ¹è®­æ–‡æ¡£

**æ–‡ä»¶**: `projects/app/docs/i18n-team-guide.md`

```markdown
# i18n å®¢æˆ·ç«¯åŒ– - å›¢é˜ŸæŒ‡å—

## èƒŒæ™¯

æˆ‘ä»¬å°† i18n ä»æœåŠ¡ç«¯æ¸²æŸ“è¿ç§»åˆ°å®¢æˆ·ç«¯ï¼Œä»¥æå‡è·¯ç”±åˆ‡æ¢æ€§èƒ½ã€‚

## ä¸»è¦å˜åŒ–

### ä¹‹å‰
\`\`\`typescript
// æ¯ä¸ªé¡µé¢éƒ½éœ€è¦
export async function getServerSideProps(context: any) {
  return {
    props: {
      ...(await serviceSideProps(context, ['app', 'chat']))
    }
  };
}
\`\`\`

### ä¹‹å
\`\`\`typescript
// å¤§éƒ¨åˆ†é¡µé¢ä¸éœ€è¦ getServerSideProps
import { usePageI18n } from '@/web/i18n/usePageI18n';

function MyPage() {
  usePageI18n(); // è‡ªåŠ¨åŠ è½½æ‰€éœ€ç¿»è¯‘
  // ...
}
\`\`\`

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆç¿»è¯‘æ˜¾ç¤ºä¸º key?
A: ç¿»è¯‘æ–‡ä»¶æ­£åœ¨åŠ è½½ä¸­ï¼Œç¨ç­‰ç‰‡åˆ»æˆ–æ£€æŸ¥ç½‘ç»œè¯·æ±‚ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ç¿»è¯‘å‘½åç©ºé—´?
A: åœ¨ `namespaceMap.ts` ä¸­æ·»åŠ é¡µé¢æ˜ å°„ã€‚

### Q: æ€§èƒ½æå‡äº†å¤šå°‘?
A: è·¯ç”±åˆ‡æ¢å¿«äº†çº¦ 40-50%ï¼Œä» 1.5s é™è‡³ 0.9sã€‚

### Q: å“ªäº›é¡µé¢ä¿ç•™äº† SSR?
A: `/chat/share`, `/login` ç­‰éœ€è¦ SEO çš„é¡µé¢ã€‚

## æ”¯æŒ

é‡åˆ°é—®é¢˜è¯·è”ç³»å‰ç«¯å›¢é˜Ÿæˆ–æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ã€‚
\`\`\`

**ä¼°è®¡æ—¶é—´**: 4 å°æ—¶

**Phase 6 æ€»è®¡**: 4 å°æ—¶

---

## æ€»ä½“æ—¶é—´ä¼°ç®—

| é˜¶æ®µ | ä»»åŠ¡ | ä¼°è®¡æ—¶é—´ |
|------|------|---------|
| Phase 1 | åŸºç¡€è®¾æ–½æ­å»º | 7.5 å°æ—¶ |
| Phase 2 | ä¿®æ”¹ _app.tsx | 1 å°æ—¶ |
| Phase 3 | é€é¡µè¿ç§» | 8.5 å°æ—¶ |
| Phase 4 | SSR é¡µé¢å¤„ç† | 1 å°æ—¶ |
| Phase 5 | æµ‹è¯•ä¸ä¼˜åŒ– | 8 å°æ—¶ |
| Phase 6 | ç›‘æ§ä¸æ–‡æ¡£ | 4 å°æ—¶ |
| **æ€»è®¡** | | **30 å°æ—¶** |

**å®æ–½å‘¨æœŸ**: 3 å‘¨ (æŒ‰æ¯å‘¨ 10 å°æ—¶è®¡ç®—)

---

## é£é™©ä¸ç¼“è§£

### é£é™© 1: ç¿»è¯‘é—ªçƒ (ç”¨æˆ·çœ‹åˆ° key)

**é£é™©ç­‰çº§**: ğŸŸ¡ ä¸­

**ç¼“è§£æªæ–½**:
- ä½¿ç”¨ `Suspense` æ˜¾ç¤º loading çŠ¶æ€
- é¢„åŠ è½½ `common` å‘½åç©ºé—´
- å®æ–½é¢„åŠ è½½ç­–ç•¥

### é£é™© 2: ç¿»è¯‘åŠ è½½å¤±è´¥

**é£é™©ç­‰çº§**: ğŸŸ¡ ä¸­

**ç¼“è§£æªæ–½**:
- æ·»åŠ é”™è¯¯è¾¹ç•Œå¤„ç†
- æä¾›é™çº§æ˜¾ç¤º (æ˜¾ç¤º key)
- ç›‘æ§åŠ è½½å¤±è´¥ç‡
- å®æ–½é‡è¯•æœºåˆ¶

### é£é™© 3: SEO å½±å“

**é£é™©ç­‰çº§**: ğŸŸ¢ ä½

**ç¼“è§£æªæ–½**:
- ä¿ç•™éœ€è¦ SEO çš„é¡µé¢çš„ SSR
- æµ‹è¯•çˆ¬è™«å¯è®¿é—®æ€§
- ç›‘æ§æœç´¢å¼•æ“æ”¶å½•

### é£é™© 4: é¦–å±å˜æ…¢

**é£é™©ç­‰çº§**: ğŸŸ¡ ä¸­

**ç¼“è§£æªæ–½**:
- é¢„åŠ è½½å…³é”®å‘½åç©ºé—´
- ä½¿ç”¨ Service Worker ç¼“å­˜
- æ˜¾ç¤ºå‹å¥½çš„ loading çŠ¶æ€

---

## æˆåŠŸæ ‡å‡†

### æ€§èƒ½æŒ‡æ ‡

```yaml
è·¯ç”±åˆ‡æ¢æ—¶é—´:
  å½“å‰: 1560ms (å¼€å‘ç¯å¢ƒ)
  ç›®æ ‡: < 900ms (å¼€å‘ç¯å¢ƒ)
  æ”¹å–„: 40-50%

i18n åŠ è½½æ—¶é—´:
  å½“å‰: 150-300ms (æœåŠ¡ç«¯é˜»å¡)
  ç›®æ ‡: < 100ms (å®¢æˆ·ç«¯å¼‚æ­¥)
  æ”¹å–„: 50-70%

é¦–å±æ—¶é—´:
  å½“å‰: æ— å˜åŒ–
  ç›®æ ‡: æ— é€€åŒ– (å¯æ¥å— +100ms)
```

### åŠŸèƒ½æŒ‡æ ‡

```yaml
ç¿»è¯‘å®Œæ•´æ€§: 100% (æ‰€æœ‰ç¿»è¯‘æ­£å¸¸æ˜¾ç¤º)
è¯­è¨€åˆ‡æ¢: æ­£å¸¸ (ä¸­/è‹±/æ—¥ä¸‰è¯­)
æµè§ˆå™¨å…¼å®¹: ä¸»æµæµè§ˆå™¨å…¨æ”¯æŒ
SEO é¡µé¢: æ— å½±å“
```

### è´¨é‡æŒ‡æ ‡

```yaml
ç¿»è¯‘é—ªçƒç‡: < 1%
åŠ è½½å¤±è´¥ç‡: < 0.1%
ç”¨æˆ·æŠ•è¯‰: 0
å¼€å‘æ•ˆç‡: æå‡ (æ— éœ€ getServerSideProps)
```

---

## éªŒæ”¶æ ‡å‡†

### æœ€ç»ˆéªŒæ”¶æ¸…å•

- [ ] æ‰€æœ‰ P0/P1/P2 é¡µé¢å®Œæˆè¿ç§»
- [ ] SSR é¡µé¢åŠŸèƒ½æ­£å¸¸
- [ ] è·¯ç”±åˆ‡æ¢æ—¶é—´è¾¾æ ‡ (< 900ms)
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ‰€æœ‰æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å®Œæ•´å¹¶åŒæ­¥åˆ°å›¢é˜Ÿ
- [ ] å›¢é˜ŸåŸ¹è®­å®Œæˆ
- [ ] ç›‘æ§ç³»ç»Ÿè¿è¡Œæ­£å¸¸
- [ ] ç”Ÿäº§ç¯å¢ƒç°åº¦å‘å¸ƒæˆåŠŸ
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†å’Œå¤„ç†

---

## å›æ»šè®¡åˆ’

å¦‚æœé‡åˆ°ä¸¥é‡é—®é¢˜éœ€è¦å›æ»šï¼š

### å¿«é€Ÿå›æ»šæ­¥éª¤

1. **æ¢å¤ _app.tsx**
```bash
git checkout origin/main -- projects/app/src/pages/_app.tsx
```

2. **æ¢å¤é¡µé¢çš„ getServerSideProps**
```bash
# æ‰¹é‡æ¢å¤
git checkout origin/main -- projects/app/src/pages/**/*.tsx
```

3. **åˆ é™¤å®¢æˆ·ç«¯ i18n ä»£ç **
```bash
rm -rf projects/app/src/web/i18n/
```

4. **é‡å¯å¼€å‘æœåŠ¡å™¨**
```bash
pnpm dev
```

### å›æ»šå†³ç­–æ ‡å‡†

è§¦å‘å›æ»šçš„æ¡ä»¶ï¼š
- ç¿»è¯‘æ˜¾ç¤ºå¼‚å¸¸ > 10%
- åŠ è½½å¤±è´¥ç‡ > 5%
- ç”¨æˆ·æŠ•è¯‰ > 5 ä¸ª/å¤©
- æ€§èƒ½é€€åŒ– > 20%
- å…³é”®åŠŸèƒ½ä¸å¯ç”¨

---

## åç»­ä¼˜åŒ–

å®ŒæˆåŸºç¡€è¿ç§»åçš„æ”¹è¿›æ–¹å‘ï¼š

### çŸ­æœŸä¼˜åŒ– (1 ä¸ªæœˆå†…)

- å®æ–½ Service Worker ç¼“å­˜
- ä¼˜åŒ–é¢„åŠ è½½ç­–ç•¥
- æ·»åŠ æ›´è¯¦ç»†çš„ç›‘æ§
- æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶æ”¹è¿›

### ä¸­æœŸä¼˜åŒ– (3 ä¸ªæœˆå†…)

- ç¿»è¯‘æ–‡ä»¶ CDN åŠ é€Ÿ
- æ™ºèƒ½é¢„åŠ è½½ (åŸºäºç”¨æˆ·è¡Œä¸º)
- ç¿»è¯‘æ–‡ä»¶åˆ†åŒ…ä¼˜åŒ–
- ç¦»çº¿ç¿»è¯‘æ”¯æŒ

### é•¿æœŸä¼˜åŒ– (6 ä¸ªæœˆå†…)

- è‡ªåŠ¨ç¿»è¯‘æ›´æ–°ç³»ç»Ÿ
- A/B æµ‹è¯•ä¸åŒåŠ è½½ç­–ç•¥
- å¤šåœ°åŸŸç¿»è¯‘ä¼˜åŒ–
- ç¿»è¯‘è´¨é‡ç›‘æ§ç³»ç»Ÿ

---

## é™„å½•

### A. ç›¸å…³èµ„æº

- [i18next å®˜æ–¹æ–‡æ¡£](https://www.i18next.com/)
- [react-i18next æ–‡æ¡£](https://react.i18next.com/)
- [Next.js i18n æœ€ä½³å®è·µ](https://nextjs.org/docs/advanced-features/i18n-routing)

### B. å›¢é˜Ÿè”ç³»æ–¹å¼

- **è´Ÿè´£äºº**: [å¡«å†™]
- **å‰ç«¯å›¢é˜Ÿ**: [å¡«å†™]
- **æµ‹è¯•å›¢é˜Ÿ**: [å¡«å†™]
- **ç´§æ€¥è”ç³»**: [å¡«å†™]

### C. å˜æ›´è®°å½•

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| 2025-10-18 | 1.0 | åˆå§‹ç‰ˆæœ¬ | Claude |

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-10-18
**é¢„è®¡å¼€å§‹æ—¥æœŸ**: [å¡«å†™]
**é¢„è®¡å®Œæˆæ—¥æœŸ**: [å¡«å†™]
**å®é™…å®Œæˆæ—¥æœŸ**: [å¡«å†™]
