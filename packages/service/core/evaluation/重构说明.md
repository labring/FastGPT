请重构FastGPT评估模块 中的评估任务和指标，目标是：

1.metric只维护评估算法的静态配置，将模型属性变更为可选项，由调用方传入模型配置方可运行

```typescript
const EvalMetricSchema = new Schema({
  teamId: {
    type: Schema.Types.ObjectId,
    ref: TeamCollectionName,
    required: true,
    index: true
  },
  tmbId: {
    type: Schema.Types.ObjectId,
    ref: TeamMemberCollectionName,
    required: true
  },
  name: { type: String, required: true },
  description: String,
  type: { type: String, enum: ['ai_model'], required: true },
  config: {
    type: Schema.Types.Mixed,
    required: true,
  },
  dependencies: {
    type: [String], // 定义为字符串数组
    enum: ['llm', 'embedding'], // 限制元素只能是这两个值
    default: [], // 默认值为空数组
    required: false // 是否必填，根据需求设置
  },
  createTime: { type: Date, default: () => new Date() },
  updateTime: { type: Date, default: () => new Date() }
});

export interface AiModelConfig {
  llm?: string; //作为可选项
  prompt?: string;
}

type MetricDependency = 'llm' | 'embedding';
export interface EvalMetricSchemaType {
  _id: string;
  teamId: string;
  tmbId: string;
  name: string;
  description?: string;
  type: 'ai_model';
  dependencies: Dependency[];
  config: AiModelConfig;
  createTime: Date;
  updateTime: Date;
}
```

2.基于metric额外提供一个评估器（evalutor）的定义，用于维护算法的运行时，嵌入到评估任务的schema中，并提供对应的实例化方法（原来的CreatemetricInstance逻辑以及对应的抽象接口从metric替换为evalutor）

+ 将 @packages/service/core/evaluation/metric/index.ts 中的EvaluationMetric和AiModelMetric相关定义迁移到 @packages/service/core/evaluation/evalutor/index.ts 中的Evaluator和AiModelEvaluator

3.评估任务（evaluation和evaluation item）不再引用metric，而是添加评估器的配置信息，在评估任务执行时（ @packages/service/core/evaluation/processor/index.ts），会基于配置创建评估器实例并调用

```typescript
// Evaluation Schema
const EvaluationSchema = new Schema({
  teamId: {
    type: Schema.Types.ObjectId,
    ref: TeamCollectionName,
    required: true
  },
  tmbId: {
    type: Schema.Types.ObjectId,
    ref: TeamMemberCollectionName,
    required: true
  },
  name: {
    type: String,
    required: true
  },
  description: String,
  datasetId: {
    type: Schema.Types.ObjectId,
    ref: EvalDatasetCollectionName,
    required: true
  },
  target: TargetSchema,
  Evaluators: [EvaluatorSchema],
  usageId: {
    type: Schema.Types.ObjectId,
    ref: UsageCollectionName,
    required: true
  },
  status: {
    type: Number,
    enum: EvaluationStatusValues,
    default: EvaluationStatusEnum.queuing
  },
  createTime: {
    type: Date,
    required: true,
    default: () => new Date()
  },
  finishTime: Date,
  avgScore: Number,
  errorMessage: String
});
```

4.evaluation item应该进一步拆解为一个dataItem、一个target和**一个evaluator**，保证其原子性，此外，评估任务队列的job数据定义只保留基本的数据id，因为evaluation和evaluation item均携带了执行评估链路需要的所有配置数据

```typescript
// 队列作业数据类型
export interface EvaluationTaskJobData {
  evalId: string;
}

export interface EvaluationItemJobData {
  evalId: string;
  evalItemId: string;
}
```



步骤：

1.请先分析现有代码，然后提供重构计划，然后修改代码。

2.track评估任务的整个流程，对存在关联的代码进行相应的改动

3.针对修改后的代码进行代码审查，重点检查：

+ 代码规范
+ 最佳实践
+ 潜在 bug





