---
title: Feishu Bot Integration Tutorial
description: FastGPT Feishu Bot Integration Tutorial
---

Starting from version 4.8.10, FastGPT commercial version supports direct Feishu bot integration without additional APIs.

## 1. Apply for Feishu Application

Creating a free test enterprise makes debugging easier.

1. Apply for a custom enterprise app in the [Feishu Open Platform](https://open.feishu.cn/app) developer console.

![Image](/imgs/feishu-bot-1.png)

Add a **Bot** application.

## 2. Create a Publishing Channel in FastGPT

In FastGPT, select the application you want to integrate. On the Publishing Channels page, create a new Feishu bot publishing channel and fill in the basic information.
   
![Image](/imgs/feishu-bot-2.png)

## 3. Get App ID and App Secret Credentials

In the Feishu Open Platform developer console, find the App ID and App Secret for the custom enterprise app you just created, and enter them in the FastGPT publishing channel dialog.
   
![Image](/imgs/feishu-bot-3.png)

Enter both parameters in the FastGPT configuration dialog.

![Image](/imgs/feishu-bot-4.png)

(Optional) In the Feishu Open Platform developer console, click Events & Callbacks -> Encryption Strategy to get the Encrypt Key, and enter it in the Feishu bot integration dialog.

![Image](/imgs/feishu-bot-5.png)

The Encrypt Key encrypts communication between Feishu servers and FastGPT.
If using HTTPS protocol, the Encrypt Key is not needed. If using HTTP protocol, the Encrypt Key is recommended.
The Verification Token is generated by default to verify the source. However, we use Feishu's officially recommended, more secure verification method, so this configuration can be ignored.

## 4. Configure Callback URL

After creating the publishing channel, click **Request URL** and copy the corresponding request URL.

In the Feishu console, click `Events & Callbacks` on the left, click the edit icon next to `Configure Subscription Method`, and paste the copied request URL into the input box.
   
| | | |
| --- | --- | --- |
| ![Image](/imgs/feishu-bot-10.jpg) | ![Image](/imgs/feishu-bot-11.jpg) | ![Image](/imgs/feishu-bot-6.png) |

## 5. Configure Bot Callback Events and Permissions

* Add `Receive Message` event
   
On the `Events & Callbacks` page, click `Add Event`.

Search for `Receive Message`, or directly search for `im.message.receive_v1`, find the `Receive Message v2.0` event, check it, and click `Confirm Add`.

After adding the event, add two permissions: click the corresponding permission, and a popup will prompt you to add permissions. Add the two permissions shown above.

| | |
| --- | --- |
| ![Image](/imgs/feishu-bot-7.png) | ![Image](/imgs/feishu-bot-8.png) |

Not recommended to enable the two "legacy versions" shown aboveâ€”use the new version permissions instead.
- If "Read messages users send to the bot in private chats" is enabled, private messages sent to the bot will be forwarded to FastGPT
- If "Receive @bot message events in group chats" is enabled, messages @mentioning the bot in group chats will be forwarded to FastGPT
- If (not recommended) "Get all messages in groups" is enabled, all group chat messages will be forwarded to FastGPT

## 6. Configure Reply Message Permission

In the Feishu console, click `Permission Management` on the left, enter `send message` in the search box, find the `Send messages as the app` permission, and click to enable it.

![](/imgs/feishu-bot-13.jpg)

## 7. Publish the Bot

Click `Version Management & Publishing` on the left side of the Feishu console to publish the bot.

![](/imgs/feishu-bot-12.jpg)

Then you can find your bot in the workspace. Next, add the bot to a group or chat with it privately.

![Image](/imgs/feishu-bot-9.png)

## FAQ

### Sent a message but no response

1. Check if the Feishu bot callback URL, permissions, etc. are correct.
2. Check FastGPT chat logs to see if there's a corresponding question record.
3. If there's a record but Feishu doesn't respond, the bot doesn't have the necessary permissions.
4. If there's no record, the application may have encountered an error. Try the simplest bot first. (Feishu bots cannot input global variables, files, or image content)

### How to start a new chat history

Feishu bot chat history chatId comes from several sources:
1. Private chat window
2. Individual topics in Feishu topic groups
3. In group chats, composed of group id + personal id.

If you want to reset your chat history, send a `Reset` message to the bot (case-sensitive), and the bot will start a new chat history.
