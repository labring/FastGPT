---
title: 接入企微机器人教程
description: FastGPT 接入企微机器人教程
---

从 4.8.10 版本起，FastGPT 商业版支持直接接入企微机器人，无需额外的 API。 

## 1. 创建企微智能机器人

点击企微头像,打开管理企业

![图片](/imgs/wecom-bot-1.png)

在"安全与管理" - "管理工具"页面找到"智能机器人" ( 注意: 只有企业创建者或超级管理员才有权限看到这个入口 )

![图片](/imgs/wecom-bot-2.png)

创建机器人页面,下拉,找到,点击"API模式创建"

![图片](/imgs/wecom-bot-3.png)

接下来需要前往 FastGPT 平台, 配置这三个参数

![图片](/imgs/wecom-bot-4.png)

## 2. 在 FastGPT 新建发布渠道

在 FastGPT 中选择想要接入的应用，在 发布渠道 页面，新建一个接入企微智能机器人的发布渠道，填写好基础信息。

![图片](/imgs/wecom-bot-5.png)

## 3. 填写智能机器人的 Corp ID, Agent ID, Secret, Token, AES Key 五个凭证

现在回到企业微信平台,找到 **Corp ID**, **Agent ID**, **Token**, **AES Key** 信息并填写回 FastGPT 平台

![图片](/imgs/wecom-bot-6.png)

在"我的企业"里找到企业 ID, 填写到 FastGPT 的 **Corp ID** 中

![图片](/imgs/wecom-bot-7.png)

随机生成或者手动输入 **Token** 和 **Encoding-Key**, 分别填写到 FastGPT 的 **Token** 和 **AES Key** 中

![图片](/imgs/wecom-bot-8.png)

然后回到 FastGPT 填写 **Agent ID** 和 **Secret**

其中 **Agent ID** 先随意填写一个值, 后续会根据企业微信提供的数据重新更改

**Secret** 为用户自己决定的密令

填写完成后确认创建

然后点击**请求地址**, 复制页面中的链接

![图片](/imgs/wecom-bot-9.png)

## 4. 配置回调地址

回到智能机器人的配置详情, 将刚才复制的链接填入 URL 框中, 并点击创建

注意: 若复制的链接是以 "http://localhost" 开头, 需要将本地地址改为企业主体域名

因为企微会给填写的 URL 发送验证密文, 若 URL 为本地地址, 则本地接收不到企微的密文

若 URL 不是企业主体域名, 则验证会失败

![图片](/imgs/wecom-bot-10.png)

创建完成后, 找到智能机器人的配置详情

![图片](/imgs/wecom-bot-11.png)

复制 **Bot ID**, 填写到 FastGPT 的 **Agent ID** 中

![图片](/imgs/wecom-bot-12.png)

## 5. 使用机器人

在企业微信平台的"通讯录",即可找到创建的机器人,就可以发送消息了

![图片](/imgs/wecom-bot-13.png)

## FAQ

### 发送了消息，没响应

1. 检查企微机器人回调地址、权限等是否正确。
2. 查看 FastGPT 对话日志，是否有对应的提问记录
3. 如果没记录，则可能是应用运行报错了，可以先试试最简单的机器人。（飞书机器人无法输入全局变量、文件、图片内容）
