---
title: 'V4.14.4'
description: 'FastGPT V4.14.4 更新说明'
---

## 更新指南

### 1. 更新镜像：

- 更新 FastGPT 镜像tag: v4.14.4
- 更新 FastGPT 商业版镜像tag: v4.14.4
- 更新 fastgpt-plugin 镜像 tag: v0.3.4
- mcp_server 无需更新
- Sandbox 无需更新
- AIProxy 无需更新

### 2. 执行升级脚本

从任意终端，发起 1 个 HTTP 请求。其中 `{{rootkey}}` 替换成环境变量里的 `rootkey`；`{{host}}` 替换成**FastGPT 域名**。

```bash
curl --location --request POST 'https://{{host}}/api/admin/initv4144' \
--header 'rootkey: {{rootkey}}' \
--header 'Content-Type: application/json'
```

1. 将 4.14.3 中，遗留的 Dataset/local 接口上传的文件，也迁移到 S3 中。
2. 全量计算旧的 chat 中的反馈，增加 flags 值便于筛选。该函数执行较慢，所以放到异步执行，接口不会返回结果，请关注日志中是否打印：Migration feedback completed!

## 🚀 新增内容

1. 工具调用支持配置流输出
2. AI 积分告警通知。
3. 对话日志支持展示 IP 地址归属地。
4. 对话日志支持展示应用版本名（如果对话中途修改成最新版本，则会被修改成最新版本）
5. 对话日志支持按点赞点踩过滤，并在对话详情里可以快速定位到赞/踩的记录。
6. 通过 API 上传本地文件至知识库，保存至 S3。同时将旧版 Gridfs 代码全部移除。
7. 新版订阅套餐逻辑。
8. 支持配置对话文件白名单。
9. S3 支持 pathStyle 和 region 配置。
10. 支持通过 Sealos 来进行多租户自定义域名配置。
11. 工作流中引用工具时，文件输入支持手动填写（原本只支持变量引用）。
12. 支持网络代理(HTTP_PROXY,HTTPS_PROXY)
    
## ⚙️ 优化

1. 增加 S3 上传文件超时时长为 5 分钟。
2. 问题优化采用 JinaAI 的边际收益公式，获取最大边际收益的检索词。
3. 用户通知，支持中英文，以及优化模板。
4. 删除知识库采用队列异步删除模式。
5. LLM 请求时，图片无效报错提示。
6. completions 接口，非 stream 模式， detail=false 时，增加返回 reason_content。
7. 增加对于无效的 S3 key 检测。
8. 删除应用和知识库时，强制要求输入名称校验。
9. Mongo 慢操作日志，可以准确打印集合名和操作内容。
10. 分享链接，自定义鉴权返回的 uid，强制要求长度小于 200（太长会影响文件上传）。

## 🐛 修复

1. 循环节点数组，取消过滤空内容。
2. 工作流工具，未传递自定义 DataId，导致测试运行时，查看知识库提示无权限。
3. 对话 Agent 工具配置中，非必填的布尔和数字类型无法直接确认。
4. 工作台卡片在名字过长时错位。
5. 分享链接中url query 中携带全局变量时，前端 UI 不会加载该值。
6. window 下判断 CSV 文件异常。
7. 模型测试时，如果模型未启动，会导致无法被测试。
8. MCP header 中带特殊内容时，会抛错。
9. 工作流引用其他 Agent 时，切换版本号后未及时更新 UI。
10. http 节点使用值为空字符串的全局变量时，值会被替换为 null。
11. 判断器节点折叠时，连线断开。
12. 节点调试时，单选和多选类型的变量无法展示选项。
13. 发布渠道文档链接定位错误。
14. Checkbox 在禁用状态时，hover 样式错误。
15. 模型头像缺失情况下，默认 huggingface.svg 图标显示错误。
16. 日志导出时，结束时间会多出一天。
17. 表单输入，前端默认值未传递到实体值。
18. 工具调用时，未传递 max_tokens 参数。
19. 工作流判断器 value 值，未结合 condition 来综合获取数据类型。
20. 非直接分块模式的知识库数据，引用阅读器导航顺序异常。引用阅读器只会加载同一页。

## 插件

1. 新增 - GLM4.6 与 DS3.2 系列模型预设。
2. 修复 - MinerU SaaS 插件模型版本不能选择 vlm 的问题
3. 修复 - 微信公众号插件批量上传 markdown 参数传递问题
4. 新增 - 获取微信公众号草稿箱列表工具
5. 优化 - markdown 转文件支持自定义文件名
6. 修复 - import cache 导致的插件无法被更新的问题
