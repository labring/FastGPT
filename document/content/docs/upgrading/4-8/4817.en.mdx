---
title: V4.8.17 (Includes Migration Script)
description: FastGPT V4.8.17 Release Notes
---

## Upgrade Guide

### 1. Update images:

- Update the fastgpt image tag to v4.8.17-fix-title
- Update the fastgpt-pro commercial edition image tag to v4.8.17
- Sandbox image update is not required


### 2. Run migration script

From any terminal, send an HTTP request. Replace `{{rootkey}}` with the `rootkey` from your environment variables, and `{{host}}` with your **FastGPT domain**.

```bash
curl --location --request POST 'https://{{host}}/api/admin/initv4817' \
--header 'rootkey: {{rootkey}}' \
--header 'Content-Type: application/json'
```

This migrates user-bound OpenAI accounts to the team level.


## Completions API response changes

The `/api/v1/chat/completions` endpoint response has been updated. Nodes that use models (chat nodes, tool nodes, etc.) will no longer return a `tokens` field. Instead, they return `inputTokens` and `outputTokens` fields representing the input and output token counts respectively.

## Full Release Notes

1. New - Simple Mode tool calls support array-type plugins.
2. New - Workflow adds auto-save on abnormal exit to prevent workflow loss.
3. New - LLM model parameters support disabling `max_tokens` and `temperature`.
4. New - Commercial edition supports configuring the template marketplace in the admin panel.
5. New - Commercial edition supports configuring custom workflow variables in the admin panel for business system authentication integration.
6. New - Search test API supports query optimization.
7. New - Input tokens and output tokens are now tracked and displayed separately in workflows. Also fixed billing not recording output tokens for some requests.
8. Improved - Markdown size check: content exceeding 200K characters no longer uses the Markdown component to prevent crashes.
9. Improved - Knowledge Base search parameters: sliders now support input mode for more precise control.
10. Improved - Available models display UI.
11. Improved - MongoDB queries with added virtual fields.
12. Fixed - File response API missing `Content-Length` header, causing Alibaba vision models to fail image recognition when uploading files from different origins.
13. Fixed - Removed hidden line breaks from both ends of condition node strings to prevent condition evaluation failures.
14. Fixed - Variable update node: non-string data types could not be auto-converted when manually entering update content.
15. Fixed - Doubao models unable to make tool calls.
