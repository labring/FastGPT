---
title: Docker Compose å¿«é€Ÿéƒ¨ç½²
description: ä½¿ç”¨ Docker Compose å¿«é€Ÿéƒ¨ç½² FastGPT
---

import { Alert } from '@/components/docs/Alert';

## å‰ç½®çŸ¥è¯†

1. åŸºç¡€çš„ç½‘ç»œçŸ¥è¯†ï¼šç«¯å£ï¼Œé˜²ç«å¢™â€¦â€¦
2. Docker å’Œ Docker Compose åŸºç¡€çŸ¥è¯†
3. å¤§æ¨¡å‹ç›¸å…³æ¥å£å’Œå‚æ•°
4. RAG ç›¸å…³çŸ¥è¯†ï¼šå‘é‡æ¨¡å‹ï¼Œå‘é‡æ•°æ®åº“ï¼Œå‘é‡æ£€ç´¢

## éƒ¨ç½²æ¶æ„å›¾

![](/imgs/sealos-fastgpt.webp)

<Alert icon="ğŸ¤–" context="success">

- MongoDBï¼šç”¨äºå­˜å‚¨é™¤äº†å‘é‡å¤–çš„å„ç±»æ•°æ®
- PostgreSQL/Milvus/Oceanbaseï¼šå­˜å‚¨å‘é‡æ•°æ®
- AIProxy: èšåˆå„ç±» AI APIï¼Œæ”¯æŒå¤šæ¨¡å‹è°ƒç”¨ ï¼ˆä»»ä½•æ¨¡å‹é—®é¢˜ï¼Œå…ˆè‡ªè¡Œé€šè¿‡ OneAPI æµ‹è¯•æ ¡éªŒï¼‰

</Alert>

## æ¨èé…ç½®

### PgVectorç‰ˆæœ¬

éå¸¸è½»é‡ï¼Œé€‚åˆçŸ¥è¯†åº“ç´¢å¼•é‡åœ¨ 5000 ä¸‡ä»¥ä¸‹ã€‚

| ç¯å¢ƒ                             | æœ€ä½é…ç½®ï¼ˆå•èŠ‚ç‚¹ï¼‰ | æ¨èé…ç½®     |
| -------------------------------- | ------------------ | ------------ |
| æµ‹è¯•ï¼ˆå¯ä»¥æŠŠè®¡ç®—è¿›ç¨‹è®¾ç½®å°‘ä¸€äº›ï¼‰ | 2c4g               | 2c8g         |
| 100w ç»„å‘é‡                      | 4c8g 50GB          | 4c16g 50GB   |
| 500w ç»„å‘é‡                      | 8c32g 200GB        | 16c64g 200GB |

### Milvusç‰ˆæœ¬

å¯¹äºäº¿çº§ä»¥ä¸Šå‘é‡æ€§èƒ½æ›´ä¼˜ç§€ã€‚

[ç‚¹å‡»æŸ¥çœ‹ Milvus å®˜æ–¹æ¨èé…ç½®](https://milvus.io/docs/prerequisite-docker.md)

| ç¯å¢ƒ        | æœ€ä½é…ç½®ï¼ˆå•èŠ‚ç‚¹ï¼‰ | æ¨èé…ç½® |
| ----------- | ------------------ | -------- |
| æµ‹è¯•        | 2c8g               | 4c16g    |
| 100w ç»„å‘é‡ | æœªæµ‹è¯•             |          |
| 500w ç»„å‘é‡ |                    |          |

### zilliz cloudç‰ˆæœ¬

Zilliz Cloud ç”± Milvus åŸå‚æ‰“é€ ï¼Œæ˜¯å…¨æ‰˜ç®¡çš„ SaaS å‘é‡æ•°æ®åº“æœåŠ¡ï¼Œæ€§èƒ½ä¼˜äº Milvus å¹¶æä¾› SLAï¼Œç‚¹å‡»ä½¿ç”¨ [Zilliz Cloud](https://zilliz.com.cn/)ã€‚

ç”±äºå‘é‡åº“ä½¿ç”¨äº† Cloudï¼Œæ— éœ€å ç”¨æœ¬åœ°èµ„æºï¼Œæ— éœ€å¤ªå…³æ³¨ã€‚

## å‰ç½®å·¥ä½œ

### 1. ç¡®ä¿ç½‘ç»œç¯å¢ƒ

å¦‚æœä½¿ç”¨`OpenAI`ç­‰å›½å¤–æ¨¡å‹æ¥å£ï¼Œè¯·ç¡®ä¿å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š`Connection error` ç­‰ã€‚ æ–¹æ¡ˆå¯ä»¥å‚è€ƒï¼š[ä»£ç†æ–¹æ¡ˆ](/docs/introduction/development/proxy/nginx)

### 2. å‡†å¤‡ Docker ç¯å¢ƒ

<Tabs items={['Linux','MacOS','Windows']}>
  <Tab value="Linux">
```bash
# å®‰è£… Docker
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
systemctl enable --now docker
# å®‰è£… docker-compose
curl -L https://github.com/docker/compose/releases/download/v2.20.3/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
# éªŒè¯å®‰è£…
docker -v
docker-compose -v
# å¦‚å¤±æ•ˆï¼Œè‡ªè¡Œç™¾åº¦~
```
  </Tab>
  <Tab value="MacOS">
æ¨èç›´æ¥ä½¿ç”¨ [Orbstack](https://orbstack.dev/)ã€‚å¯ç›´æ¥é€šè¿‡ Homebrew æ¥å®‰è£…ï¼š

```bash
brew install orbstack
```

æˆ–è€…ç›´æ¥[ä¸‹è½½å®‰è£…åŒ…](https://orbstack.dev/download)è¿›è¡Œå®‰è£…ã€‚

  </Tab>
  <Tab value="Windows">
æˆ‘ä»¬å»ºè®®å°†æºä»£ç å’Œå…¶ä»–æ•°æ®ç»‘å®šåˆ° Linux å®¹å™¨ä¸­æ—¶ï¼Œå°†å…¶å­˜å‚¨åœ¨ Linux æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œä¸æ˜¯ Windows æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚

å¯ä»¥é€‰æ‹©ç›´æ¥[ä½¿ç”¨ WSL 2 åç«¯åœ¨ Windows ä¸­å®‰è£… Docker Desktop](https://docs.docker.com/desktop/wsl/)ã€‚

ä¹Ÿå¯ä»¥ç›´æ¥[åœ¨ WSL 2 ä¸­å®‰è£…å‘½ä»¤è¡Œç‰ˆæœ¬çš„ Docker](https://nickjanetakis.com/blog/install-docker-in-wsl-2-without-docker-desktop)ã€‚

  </Tab>
</Tabs>

## å¼€å§‹éƒ¨ç½²

### 1. è·å– `docker-compose.yml` å’Œ `config.json` é…ç½®æ–‡ä»¶

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è„šæœ¬éƒ¨ç½²

<Tabs items={['PgVectorç‰ˆæœ¬','Oceanbaseç‰ˆæœ¬','Milvusç‰ˆæœ¬','Zillizç‰ˆæœ¬']}>
  <Tab value="PgVectorç‰ˆæœ¬">
å›½å†…é•œåƒ(é˜¿é‡Œäº‘)

```bash
bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=cn --vector=pg
```

éå›½å†…é•œåƒ(dockhub, ghcr)

```bash
bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=global --vector=pg
```
éœ€è¦åœ¨ Linux/MacOS/Windows WSL ç¯å¢ƒä¸‹æ‰§è¡Œ
    </Tab>

  <Tab value="Oceanbaseç‰ˆæœ¬">
      å›½å†…é•œåƒ(é˜¿é‡Œäº‘)

      ```bash
      bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=cn --vector=oceanbase
      ```

      éå›½å†…é•œåƒ(dockhub, ghcr)

      ```bash
      bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=global --vector=oceanbase
      ```
      éœ€è¦åœ¨ Linux/MacOS/Windows WSL ç¯å¢ƒä¸‹æ‰§è¡Œ
  </Tab>
  <Tab value="Milvusç‰ˆæœ¬">
  å›½å†…é•œåƒ(é˜¿é‡Œäº‘)

  ```bash
  bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=cn --vector=milvus
  ```

  éå›½å†…é•œåƒ(dockhub, ghcr)

  ```bash
  bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=global --vector=milvus
  ```
  éœ€è¦åœ¨ Linux/MacOS/Windows WSL ç¯å¢ƒä¸‹æ‰§è¡Œ
  </Tab>
  <Tab value="Zillizç‰ˆæœ¬">
  å›½å†…é•œåƒ(é˜¿é‡Œäº‘)

  ```bash
  bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=cn --vector=zilliz
  ```

  éå›½å†…é•œåƒ(dockhub, ghcr)

  ```bash
  bash <(curl -fsSL https://doc.fastgpt.cn/deploy/install.sh) --region=global --vector=zilliz
  ```
  éœ€è¦åœ¨ Linux/MacOS/Windows WSL ç¯å¢ƒä¸‹æ‰§è¡Œ

  zilliz è¿˜éœ€è¦è·å–å¯†é’¥ï¼Œå‚è€ƒ [éƒ¨ç½² Zilliz ç‰ˆæœ¬è·å–è´¦å·å’Œå¯†é’¥](#éƒ¨ç½²-zilliz-ç‰ˆæœ¬è·å–è´¦å·å’Œå¯†é’¥)
  </Tab>
</Tabs>

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ä¸‹è½½éƒ¨ç½²
å¦‚æœéƒ¨ç½²ç¯å¢ƒä¸ºé *nix ç¯å¢ƒæˆ–æ— æ³•è®¿é—®å¤–ç½‘ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½ `docker-compose.yml` è¿›è¡Œéƒ¨ç½²

é€‰æ‹©å¹¶ä¸‹è½½æ‚¨çš„ `docker-compose.yml` æ–‡ä»¶
- Pgvector
  - ä¸­å›½å¤§é™†åœ°åŒºé•œåƒæº(é˜¿é‡Œäº‘)ï¼š[docker-compose.pg.yml](https://doc.fastgpt.cn/deploy/docker/cn/docker-compose.pg.yml)
  - å…¨çƒé•œåƒæº(dockerhub, ghcr)ï¼š[docker-compose.pg.yml](https://doc.fastgpt.cn/deploy/docker/global/docker-compose.pg.yml)
- Oceanbase
  - ä¸­å›½å¤§é™†åœ°åŒºé•œåƒæº(é˜¿é‡Œäº‘)ï¼š[docker-compose.ob.yml](https://doc.fastgpt.cn/deploy/docker/cn/docker-compose.ob.yml)
  - å…¨çƒé•œåƒæº(dockerhub, ghcr)ï¼š[docker-compose.ob.yml](https://doc.fastgpt.cn/deploy/docker/global/docker-compose.ob.yml)
- Milvus
  - ä¸­å›½å¤§é™†åœ°åŒºé•œåƒæº(é˜¿é‡Œäº‘)ï¼š[docker-compose.milvus.yml](https://doc.fastgpt.cn/deploy/docker/cn/docker-compose.milvus.yml)
  - å…¨çƒé•œåƒæº(dockerhub, ghcr)ï¼š[docker-compose.milvus.yml](https://doc.fastgpt.cn/deploy/docker/global/docker-compose.milvus.yml)
- Zilliz
  - ä¸­å›½å¤§é™†åœ°åŒºé•œåƒæº(é˜¿é‡Œäº‘)ï¼š[docker-compose.zilliz.yml](https://doc.fastgpt.cn/deploy/docker/cn/docker-compose.zilliz.yml)
  - å…¨çƒé•œåƒæº(dockerhub, ghcr)ï¼š[docker-compose.zilliz.yml](https://doc.fastgpt.cn/deploy/docker/global/docker-compose.zilliz.yml)

ä¸‹è½½ config.json æ–‡ä»¶
- [config.json](https://doc.fastgpt.cn/deploy/config/config.json)

<Alert icon="ğŸ¤–" context="success">

æ‰€æœ‰ `docker-compose.yml` é…ç½®æ–‡ä»¶ä¸­ `MongoDB` ä¸º 5.xï¼Œéœ€è¦ç”¨åˆ°AVXæŒ‡ä»¤é›†ï¼Œéƒ¨åˆ† CPU ä¸æ”¯æŒï¼Œéœ€æ‰‹åŠ¨æ›´æ”¹å…¶é•œåƒç‰ˆæœ¬ä¸º 4.4.24\*\*ï¼ˆéœ€è¦è‡ªå·±åœ¨docker hubä¸‹è½½ï¼Œé˜¿é‡Œäº‘é•œåƒæ²¡åšå¤‡ä»½ï¼‰

</Alert>

### 2. å¼€æ”¾å¤–ç½‘ç«¯å£/é…ç½®åŸŸå

ä»¥ä¸‹ä¸¤ä¸ªç«¯å£å¿…é¡»è¢«è®¿é—®åˆ°ï¼š

1. æŒ‡å‘ 3000 ç«¯å£ï¼ˆFastGPT ä¸»æœåŠ¡ï¼‰
2. æŒ‡å‘ 9000 ç«¯å£ï¼ˆS3 æœåŠ¡ï¼‰

### 3. ä¿®æ”¹ç¯å¢ƒå˜é‡

1. ä¿®æ”¹ yml æ–‡ä»¶é¡¶éƒ¨çš„`S3_EXTERNAL_BASE_URL`å˜é‡ï¼Œæ”¹æˆ S3 çš„å¯è®¿é—®åœ°å€ï¼ˆè¦æ±‚ä½¿ç”¨è€…å¯ä»¥è®¿é—®ï¼‰
2. æŒ‰ç…§æ‚¨çš„éœ€æ±‚è‡ªè¡Œä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¿®æ”¹è´¦å·å¯†ç ç­‰ã€‚
3. å¯¹äº Zilliz ç‰ˆæœ¬ è¿˜éœ€è¦è·å–å¯†é’¥ï¼Œå‚è€ƒ [éƒ¨ç½² Zilliz ç‰ˆæœ¬è·å–è´¦å·å’Œå¯†é’¥](#éƒ¨ç½²-zilliz-ç‰ˆæœ¬è·å–è´¦å·å’Œå¯†é’¥)

### 4. ä¿®æ”¹ config.json é…ç½®æ–‡ä»¶

ä¿®æ”¹`config.json`æ–‡ä»¶ä¸­çš„`mcpServerProxyEndpoint`å€¼ï¼Œè®¾ç½®æˆ`mcp server`çš„å…¬ç½‘å¯è®¿é—®åœ°å€ï¼Œyml æ–‡ä»¶ä¸­é»˜è®¤ç»™å‡ºäº†æ˜ å°„åˆ° 3005 ç«¯å£ï¼Œå¦‚é€šè¿‡ IP è®¿é—®ï¼Œåˆ™å¯èƒ½æ˜¯ï¼š`120.172.2.10:3005`ã€‚

### 5. å¯åŠ¨å®¹å™¨

åœ¨ docker-compose.yml åŒçº§ç›®å½•ä¸‹æ‰§è¡Œã€‚è¯·ç¡®ä¿`docker-compose`ç‰ˆæœ¬æœ€å¥½åœ¨2.17ä»¥ä¸Šï¼Œå¦åˆ™å¯èƒ½æ— æ³•æ‰§è¡Œè‡ªåŠ¨åŒ–å‘½ä»¤ã€‚

```bash
# å¯åŠ¨å®¹å™¨
docker-compose up -d
```

### 6. è®¿é—® FastGPT

å¯é€šè¿‡ç¬¬äºŒæ­¥å¼€æ”¾çš„ç«¯å£/åŸŸåè®¿é—® FastGPTã€‚  
ç™»å½•ç”¨æˆ·åä¸º `root`ï¼Œå¯†ç ä¸º`docker-compose.yml`ç¯å¢ƒå˜é‡é‡Œè®¾ç½®çš„ `DEFAULT_ROOT_PSW`ã€‚  
æ¯æ¬¡é‡å¯å®¹å™¨ï¼Œéƒ½ä¼šè‡ªåŠ¨åˆå§‹åŒ– root ç”¨æˆ·ï¼Œå¯†ç ä¸º `1234`ï¼ˆä¸ç¯å¢ƒå˜é‡ä¸­çš„`DEFAULT_ROOT_PSW`ä¸€è‡´ï¼‰ã€‚  

### 7. é…ç½®æ¨¡å‹

- é¦–æ¬¡ç™»å½•FastGPTåï¼Œç³»ç»Ÿä¼šæç¤ºæœªé…ç½®`è¯­è¨€æ¨¡å‹`å’Œ`ç´¢å¼•æ¨¡å‹`ï¼Œå¹¶è‡ªåŠ¨è·³è½¬æ¨¡å‹é…ç½®é¡µé¢ã€‚ç³»ç»Ÿå¿…é¡»è‡³å°‘æœ‰è¿™ä¸¤ç±»æ¨¡å‹æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚
- å¦‚æœç³»ç»Ÿæœªæ­£å¸¸è·³è½¬ï¼Œå¯ä»¥åœ¨`è´¦å·-æ¨¡å‹æä¾›å•†`é¡µé¢ï¼Œè¿›è¡Œæ¨¡å‹é…ç½®ã€‚[ç‚¹å‡»æŸ¥çœ‹ç›¸å…³æ•™ç¨‹](/docs/introduction/development/modelConfig/ai-proxy)
- ç›®å‰å·²çŸ¥å¯èƒ½é—®é¢˜ï¼šé¦–æ¬¡è¿›å…¥ç³»ç»Ÿåï¼Œæ•´ä¸ªæµè§ˆå™¨ tab æ— æ³•å“åº”ã€‚æ­¤æ—¶éœ€è¦åˆ é™¤è¯¥tabï¼Œé‡æ–°æ‰“å¼€ä¸€æ¬¡å³å¯ã€‚

### 8. å®‰è£…ç³»ç»Ÿæ’ä»¶

ä» V4.14.0 ç‰ˆæœ¬å¼€å§‹ï¼Œfastgpt-plugin é•œåƒä»…æä¾›è¿è¡Œç¯å¢ƒï¼Œä¸å†é¢„è£…ç³»ç»Ÿæ’ä»¶ï¼Œæ‰€æœ‰ FastGPT ç³»ç»Ÿéœ€æ‰‹åŠ¨å®‰è£…ç³»ç»Ÿæ’ä»¶ã€‚

* é€šè¿‡æ’ä»¶å¸‚åœºå®‰è£…ï¼Œé»˜è®¤ä¼šå‘å…¬å¼€çš„ FastGPT Marketplace è·å–æ•°æ®è¿›è¡Œå®‰è£…ã€‚
* å¦‚æœä½ çš„ FastGPT æ— æ³•è®¿é—®æ’ä»¶å¸‚åœºï¼Œåˆ™å¯ä»¥æ‰‹åŠ¨è®¿é—®[FastGPT æ’ä»¶å¸‚åœº](https://marketplace.fastgpt.cn/)ï¼Œå…ˆä¸‹è½½ .pkg æ–‡ä»¶ï¼Œå†é€šè¿‡æ–‡ä»¶å¯¼å…¥çš„æ–¹å¼å®‰è£…åˆ°ç³»ç»Ÿé‡Œã€‚
* é™¤äº†å®‰è£…å¤–ï¼Œè¿˜å¯å¯¹å·¥å…·è¿›è¡Œæ’åºã€é»˜è®¤å®‰è£…ã€æ ‡ç­¾ç®¡ç†ç­‰ã€‚

![alt text](/imgs/image-121.png)

## FAQ

### ç™»å½•ç³»ç»Ÿåï¼Œæµè§ˆå™¨æ— æ³•å“åº”

æ— æ³•ç‚¹å‡»ä»»ä½•å†…å®¹ï¼Œåˆ·æ–°ä¹Ÿæ— æ•ˆã€‚æ­¤æ—¶éœ€è¦åˆ é™¤è¯¥tabï¼Œé‡æ–°æ‰“å¼€ä¸€æ¬¡å³å¯ã€‚

### Mongo å‰¯æœ¬é›†è‡ªåŠ¨åˆå§‹åŒ–å¤±è´¥

æœ€æ–°çš„ docker-compose ç¤ºä¾‹ä¼˜åŒ– Mongo å‰¯æœ¬é›†åˆå§‹åŒ–ï¼Œå®ç°äº†å…¨è‡ªåŠ¨ã€‚ç›®å‰åœ¨ unbuntu20,22 centos7, wsl2, mac, window å‡é€šè¿‡æµ‹è¯•ã€‚ä»æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œå¤§éƒ¨åˆ†æ˜¯å› ä¸º cpu ä¸æ”¯æŒ AVX æŒ‡ä»¤é›†ï¼Œå¯ä»¥åˆ‡æ¢ Mongo4.x ç‰ˆæœ¬ã€‚

å¦‚æœæ˜¯ç”±äºï¼Œæ— æ³•è‡ªåŠ¨åˆå§‹åŒ–å‰¯æœ¬é›†åˆï¼Œå¯ä»¥æ‰‹åŠ¨åˆå§‹åŒ–å‰¯æœ¬é›†ï¼š

1. ç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œåˆ›å»ºmongoå¯†é’¥ï¼š

```bash
openssl rand -base64 756 > ./mongodb.key
chmod 600 ./mongodb.key
# ä¿®æ”¹å¯†é’¥æƒé™ï¼Œéƒ¨åˆ†ç³»ç»Ÿæ˜¯adminï¼Œéƒ¨åˆ†æ˜¯root
chown 999:root ./mongodb.key
```

2. ä¿®æ”¹ docker-compose.ymlï¼ŒæŒ‚è½½å¯†é’¥

```yml
mongo:
  #  image: mongo:5.0.18
  # image: registry.cn-hangzhou.aliyuncs.com/fastgpt/mongo:5.0.18 # é˜¿é‡Œäº‘
  container_name: mongo
  ports:
    - 27017:27017
  networks:
    - fastgpt
  command: mongod --keyFile /data/mongodb.key --replSet rs0
  environment:
    # é»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œåªæœ‰é¦–æ¬¡å…è®¸æœ‰æ•ˆ
    - MONGO_INITDB_ROOT_USERNAME=myusername
    - MONGO_INITDB_ROOT_PASSWORD=mypassword
  volumes:
    - ./mongo/data:/data/db
    - ./mongodb.key:/data/mongodb.key
```

3. é‡å¯æœåŠ¡

```bash
docker-compose down
docker-compose up -d
```

4. è¿›å…¥å®¹å™¨æ‰§è¡Œå‰¯æœ¬é›†åˆåˆå§‹åŒ–

```bash
# æŸ¥çœ‹ mongo å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
docker ps
# è¿›å…¥å®¹å™¨
docker exec -it mongo bash

# è¿æ¥æ•°æ®åº“ï¼ˆè¿™é‡Œè¦å¡«Mongoçš„ç”¨æˆ·åå’Œå¯†ç ï¼‰
mongo -u myusername -p mypassword --authenticationDatabase admin

# åˆå§‹åŒ–å‰¯æœ¬é›†ã€‚å¦‚æœéœ€è¦å¤–ç½‘è®¿é—®ï¼Œmongo:27017 ã€‚å¦‚æœéœ€è¦å¤–ç½‘è®¿é—®ï¼Œéœ€è¦å¢åŠ Mongoè¿æ¥å‚æ•°ï¼šdirectConnection=true
rs.initiate({
  _id: "rs0",
  members: [
    { _id: 0, host: "mongo:27017" }
  ]
})
# æ£€æŸ¥çŠ¶æ€ã€‚å¦‚æœæç¤º rs0 çŠ¶æ€ï¼Œåˆ™ä»£è¡¨è¿è¡ŒæˆåŠŸ
rs.status()
```

### å¦‚ä½•ä¿®æ”¹APIåœ°å€å’Œå¯†é’¥

é»˜è®¤æ˜¯å†™äº†OneAPiçš„è¿æ¥åœ°å€å’Œå¯†é’¥ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹`docker-compose.yml`ä¸­ï¼Œfastgptå®¹å™¨çš„ç¯å¢ƒå˜é‡å®ç°ã€‚

`OPENAI_BASE_URL`ï¼ˆAPI æ¥å£çš„åœ°å€ï¼Œéœ€è¦åŠ /v1ï¼‰
`CHAT_API_KEY`ï¼ˆAPI æ¥å£çš„å‡­è¯ï¼‰ã€‚

ä¿®æ”¹å®Œåé‡å¯ï¼š

```bash
docker-compose down
docker-compose up -d
```

### å¦‚ä½•æ›´æ–°ç‰ˆæœ¬ï¼Ÿ

1. æŸ¥çœ‹[æ›´æ–°æ–‡æ¡£](/docs/upgrading)ï¼Œç¡®è®¤è¦å‡çº§çš„ç‰ˆæœ¬ï¼Œé¿å…è·¨ç‰ˆæœ¬å‡çº§ã€‚
2. ä¿®æ”¹é•œåƒ tag åˆ°æŒ‡å®šç‰ˆæœ¬
3. æ‰§è¡Œä¸‹é¢å‘½ä»¤ä¼šè‡ªåŠ¨æ‹‰å–é•œåƒï¼š

   ```bash
   docker-compose pull
   docker-compose up -d
   ```

4. æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬ï¼ˆå¦‚æœæœ‰ï¼‰

### å¦‚ä½•è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Ÿ

ä¿®æ”¹`config.json`æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œ`docker-compose down`å†æ‰§è¡Œ`docker-compose up -d`é‡èµ·å®¹å™¨ã€‚å…·ä½“é…ç½®ï¼Œå‚è€ƒ[é…ç½®è¯¦è§£](/docs/introduction/development/configuration)ã€‚

### å¦‚ä½•æ£€æŸ¥è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ˜¯å¦æŒ‚è½½

1. `docker logs fastgpt` å¯ä»¥æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨å¯åŠ¨å®¹å™¨åï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚ç½‘é¡µï¼Œä¼šè¿›è¡Œé…ç½®æ–‡ä»¶è¯»å–ï¼Œå¯ä»¥çœ‹çœ‹æœ‰æ²¡æœ‰è¯»å–æˆåŠŸä»¥åŠæœ‰æ— é”™è¯¯æ—¥å¿—ã€‚
2. `docker exec -it fastgpt sh` è¿›å…¥ FastGPT å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡`ls data`æŸ¥çœ‹ç›®å½•ä¸‹æ˜¯å¦æˆåŠŸæŒ‚è½½`config.json`æ–‡ä»¶ã€‚å¯é€šè¿‡`cat data/config.json`æŸ¥çœ‹é…ç½®æ–‡ä»¶ã€‚

**å¯èƒ½ä¸ç”Ÿæ•ˆçš„åŸå› **

1. æŒ‚è½½ç›®å½•ä¸æ­£ç¡®
2. é…ç½®æ–‡ä»¶ä¸æ­£ç¡®ï¼Œæ—¥å¿—ä¸­ä¼šæç¤º`invalid json`ï¼Œé…ç½®æ–‡ä»¶éœ€è¦æ˜¯æ ‡å‡†çš„ JSON æ–‡ä»¶ã€‚
3. ä¿®æ”¹åï¼Œæ²¡æœ‰`docker-compose down`å†`docker-compose up -d`ï¼Œrestartæ˜¯ä¸ä¼šé‡æ–°æŒ‚è½½æ–‡ä»¶çš„ã€‚

### å¦‚ä½•æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£å¸¸åŠ è½½

1. `docker exec -it fastgpt sh` è¿›å…¥ FastGPT å®¹å™¨ã€‚
2. ç›´æ¥è¾“å…¥`env`å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚

### ä¸ºä»€ä¹ˆæ— æ³•è¿æ¥`æœ¬åœ°æ¨¡å‹`é•œåƒ

`docker-compose.yml`ä¸­ä½¿ç”¨äº†æ¡¥æ¥çš„æ¨¡å¼å»ºç«‹äº†`fastgpt`ç½‘ç»œï¼Œå¦‚æƒ³é€šè¿‡0.0.0.0æˆ–é•œåƒåè®¿é—®å…¶å®ƒé•œåƒï¼Œéœ€å°†å…¶å®ƒé•œåƒä¹ŸåŠ å…¥åˆ°ç½‘ç»œä¸­ã€‚

### ç«¯å£å†²çªæ€ä¹ˆè§£å†³ï¼Ÿ

docker-compose ç«¯å£å®šä¹‰ä¸ºï¼š`æ˜ å°„ç«¯å£:è¿è¡Œç«¯å£`ã€‚

æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œå®¹å™¨è¿è¡Œç«¯å£ä¸ä¼šæœ‰å†²çªï¼Œä½†æ˜¯ä¼šæœ‰æ˜ å°„ç«¯å£å†²çªï¼Œåªéœ€å°†æ˜ å°„ç«¯å£ä¿®æ”¹æˆä¸åŒç«¯å£å³å¯ã€‚

å¦‚æœ`å®¹å™¨1`éœ€è¦è¿æ¥`å®¹å™¨2`ï¼Œä½¿ç”¨`å®¹å™¨2:è¿è¡Œç«¯å£`æ¥è¿›è¡Œè¿æ¥å³å¯ã€‚

ï¼ˆè‡ªè¡Œè¡¥ä¹  docker åŸºæœ¬çŸ¥è¯†ï¼‰

### relation "modeldata" does not exist

PG æ•°æ®åº“æ²¡æœ‰è¿æ¥ä¸Š/åˆå§‹åŒ–å¤±è´¥ï¼Œå¯ä»¥æŸ¥çœ‹æ—¥å¿—ã€‚FastGPT ä¼šåœ¨æ¯æ¬¡è¿æ¥ä¸Š PG æ—¶è¿›è¡Œè¡¨åˆå§‹åŒ–ï¼Œå¦‚æœæŠ¥é”™ä¼šæœ‰å¯¹åº”æ—¥å¿—ã€‚

1. æ£€æŸ¥æ•°æ®åº“å®¹å™¨æ˜¯å¦æ­£å¸¸å¯åŠ¨
2. é docker éƒ¨ç½²çš„ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£… pg vector æ’ä»¶
3. æŸ¥çœ‹ fastgpt æ—¥å¿—ï¼Œæœ‰æ²¡æœ‰ç›¸å…³æŠ¥é”™

### Illegal instruction

å¯èƒ½åŸå› ï¼š

1. armæ¶æ„ã€‚éœ€è¦ä½¿ç”¨ Mongo å®˜æ–¹é•œåƒï¼š mongo:5.0.18
2. cpu ä¸æ”¯æŒ AVXï¼Œæ— æ³•ç”¨ mongo5ï¼Œéœ€è¦æ¢æˆ mongo4.xã€‚æŠŠ mongo çš„ image æ¢æˆ: mongo:4.4.29

### Operation `auth_codes.findOne()` buffering timed out after 10000ms

mongoè¿æ¥å¤±è´¥ï¼ŒæŸ¥çœ‹mongoçš„è¿è¡ŒçŠ¶æ€**å¯¹åº”æ—¥å¿—**ã€‚

å¯èƒ½åŸå› ï¼š

1. mongo æœåŠ¡æœ‰æ²¡æœ‰èµ·æ¥ï¼ˆæœ‰äº› cpu ä¸æ”¯æŒ AVXï¼Œæ— æ³•ç”¨ mongo5ï¼Œéœ€è¦æ¢æˆ mongo4.xï¼Œå¯ä»¥docker hubæ‰¾ä¸ªæœ€æ–°çš„4.xï¼Œä¿®æ”¹é•œåƒç‰ˆæœ¬ï¼Œé‡æ–°è¿è¡Œï¼‰
2. è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒå˜é‡å¡«å†™é”™è¯¯ï¼ˆè´¦å·å¯†ç ï¼Œæ³¨æ„hostå’Œportï¼Œéå®¹å™¨ç½‘ç»œè¿æ¥ï¼Œéœ€è¦ç”¨å…¬ç½‘ipå¹¶åŠ ä¸Š directConnection=trueï¼‰
3. å‰¯æœ¬é›†å¯åŠ¨å¤±è´¥ã€‚å¯¼è‡´å®¹å™¨ä¸€ç›´é‡å¯ã€‚
4. `Illegal instruction.... Waiting for MongoDB to start`: cpu ä¸æ”¯æŒ AVXï¼Œæ— æ³•ç”¨ mongo5ï¼Œéœ€è¦æ¢æˆ mongo4.x

### é¦–æ¬¡éƒ¨ç½²ï¼Œrootç”¨æˆ·æç¤ºæœªæ³¨å†Œ

æ—¥å¿—ä¼šæœ‰é”™è¯¯æç¤ºã€‚å¤§æ¦‚ç‡æ˜¯æ²¡æœ‰å¯åŠ¨ Mongo å‰¯æœ¬é›†æ¨¡å¼ã€‚

### æ— æ³•å¯¼å‡ºçŸ¥è¯†åº“ã€æ— æ³•ä½¿ç”¨è¯­éŸ³è¾“å…¥/æ’­æŠ¥

æ²¡é…ç½® SSL è¯ä¹¦ï¼Œæ— æƒä½¿ç”¨éƒ¨åˆ†åŠŸèƒ½ã€‚

### ç™»å½•æç¤º Network Error

ç”±äºæœåŠ¡åˆå§‹åŒ–é”™è¯¯ï¼Œç³»ç»Ÿé‡å¯å¯¼è‡´ã€‚

- 90%æ˜¯ç”±äºé…ç½®æ–‡ä»¶å†™ä¸å¯¹ï¼Œå¯¼è‡´ JSON è§£ææŠ¥é”™
- å‰©ä¸‹çš„åŸºæœ¬æ˜¯å› ä¸ºå‘é‡æ•°æ®åº“è¿ä¸ä¸Š

### å¦‚ä½•ä¿®æ”¹å¯†ç 

ä¿®æ”¹`docker-compose.yml`æ–‡ä»¶ä¸­`DEFAULT_ROOT_PSW`å¹¶é‡å¯å³å¯ï¼Œå¯†ç ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

### éƒ¨ç½² Zilliz ç‰ˆæœ¬ï¼Œè·å–è´¦å·å’Œå¯†é’¥
æ‰“å¼€ [Zilliz Cloud](https://zilliz.com.cn/), åˆ›å»ºå®ä¾‹å¹¶è·å–ç›¸å…³ç§˜é’¥ã€‚

![zilliz_key](/imgs/zilliz_key.png)

<Alert icon="ğŸ¤–" context="success">

1. ä¿®æ”¹`MILVUS_ADDRESS`å’Œ`MILVUS_TOKEN`é“¾æ¥å‚æ•°ï¼Œåˆ†åˆ«å¯¹åº” `zilliz` çš„ `Public Endpoint` å’Œ `Api key`ï¼Œè®°å¾—æŠŠè‡ªå·±ipåŠ å…¥ç™½åå•ã€‚

</Alert>
