---
title: HTTP Request
description: FastGPT HTTP module guide
---

import { Alert } from '@/components/docs/Alert';

## Features

- Can be added multiple times
- Manual configuration
- Trigger-based execution
- Core of core modules

![](/imgs/http1.jpg)

## Overview

The HTTP module sends an `HTTP` request to a specified address. It works similarly to tools like Postman and ApiFox.

- Params are path query parameters, commonly used in GET requests.
- Body is the request body, commonly used in POST/PUT requests.
- Headers are request headers for passing special information.  
- Custom variables can receive outputs from previous nodes as variables
- All 3 data types support `{{}}` for variable references.
- URLs can also use `{{}}` for variable references.
- Variables come from `global variables`, `system variables`, and `previous node outputs`

## Parameter Structure

### System Variables

Hover over the question mark next to `Request Parameters` to see available variables.

- appId: Application ID
- chatId: Current conversation ID (doesn't exist in test mode)
- responseChatItemId: Response message ID in current conversation (doesn't exist in test mode)
- variables: Global variables for current conversation
- cTime: Current time
- histories: Chat history (defaults to max 10 entries, length cannot be modified)

### Params, Headers

Similar to Postman and ApiFox usage.

Use `{{key}}` to reference variables. For example:

| key | value |
| --- | --- |
| appId | `{{appId}}` |
| Authorization | Bearer `{{token}}` |

### Body

Only takes effect for specific request types.

Write a `custom JSON` and use `{{key}}` to reference variables. For example:

<Tabs items={['Assume these variables','Body declaration in HTTP module','Final parsed result']}> <Tab value="Assume these variables" >

```json
{
  "string": "字符串",
  "number": 123,
  "boolean": true,
  "array": [1, 2, 3],
  "obj": {
    "name": "FastGPT",
    "url": "https://fastgpt.io"
  }
}
```

  </Tab>
  <Tab value="Body declaration in HTTP module" >

Note: In Body, if you reference a `string`, you need to add `""`, for example: `"{{string}}"`.

```json
{
  "string": "{{string}}",
  "token": "Bearer {{string}}",
  "number": {{number}},
  "boolean": {{boolean}},
  "array": [{{number}}, "{{string}}"],
  "array2": {{array}},
  "object": {{obj}}
}
```

  </Tab>
  <Tab value="Final parsed result" >

```json
{
  "string": "字符串",
  "token": "Bearer 字符串",
  "number": 123,
  "boolean": true,
  "array": [123, "字符串"],
  "array2": [1, 2, 3],
  "object": {
    "name": "FastGPT",
    "url": "https://fastgpt.io"
  }
}
```

  </Tab>
</Tabs>

### How to Get Return Values

As shown in the image, FastGPT allows adding multiple return values. These don't represent the API response itself, but rather `how to parse the API response`. You can use `JSON path` syntax to `extract` values from the API response.

Syntax reference: https://github.com/JSONPath-Plus/JSONPath?tab=readme-ov-file

<Tabs items={['API response example','Extraction example']}> <Tab value="API response example" >

```json
{
  "message": "测试",
  "data":{
      "user": {
        "name": "xxx",
        "age": 12
      },
      "list": [
        {
          "name": "xxx",
          "age": 50
        },
        [{ "test": 22 }]
      ],
      "psw": "xxx"
  }
}
```

  </Tab>
  <Tab value="Extraction example" >

```json
{
  "$.message": "测试",
  "$.data.user": { "name": "xxx", "age": 12 },
  "$.data.user.name": "xxx",
  "$.data.user.age": 12,
  "$.data.list": [ { "name": "xxx", "age": 50 }, [{ "test": 22 }] ],
  "$.data.list[0]": { "name": "xxx", "age": 50 },
  "$.data.list[0].name": "xxx",
  "$.data.list[0].age": 50,
  "$.data.list[1]": [ { "test": 22 } ],
  "$.data.list[1][0]": { "test": 22 },
  "$.data.list[1][0].test": 22,
  "$.data.psw": "xxx"
}
```

  </Tab>
</Tabs>

You can configure the corresponding `key` to get values from `FastGPT's transformed format`. This follows JavaScript object access rules. For example:

1. To get `message` content, configure the `key` as `message`.
2. To get `user's name`, the `key` can be: `data.user.name`.
3. To get the second element in list, the `key` can be: `data.list[1]`, then select string as output type to automatically get the `json` string of `[ { "test": 22 } ]`.

### Auto-format Output

Starting from FastGPT v4.6.8, output formatting was added, mainly converting `json` to `string`. If you select `string` as the output type, the value of the corresponding `HTTP` `key` will be converted to a `json` string for output. This means you can now directly output content from `HTTP` to `Text Processing`, append appropriate prompts, and finally input to `AI Chat`.

<Alert context="warning">
The HTTP module is very powerful. You can integrate public APIs to enhance workflow functionality.

If you don't want to deploy additional services, use [Laf](https://laf.dev/) to quickly develop and deploy APIs — write and publish instantly, no deployment needed.
</Alert>

## Laf HTTP Integration Example

Here's a POST request example written in Laf:

```ts
import cloud from '@lafjs/cloud'
const db = cloud.database()

type RequestType = {
  appId: string;
  appointment: string;
  action: 'post' | 'delete' | 'put' | 'get'
}

export default async function (ctx: FunctionContext) {
  try {
    // Get parameters from body
    const { appId, appointment, action } = ctx.body as RequestType

    const parseBody = JSON.parse(appointment)
    if (action === 'get') {
      return await getRecord(parseBody)
    }
    if (action === 'post') {
      return await createRecord(parseBody)
    }
    if (action === 'put') {
      return await putRecord(parseBody)
    }
    if (action === 'delete') {
      return await removeRecord(parseBody)
    }

    return {
      response: "异常"
    }
  } catch (err) {
    return {
      response: "异常"
    }
  }
}
```

## Use Cases

The HTTP module enables unlimited extensions, such as:
- Database operations
- External data source calls
- Web searches
- Email sending
- ....

## Related Examples

- [Google Search](/docs/use-cases/app-cases/google_search/)
- [Send Feishu Webhook](/docs/use-cases/app-cases/feishu_webhook/)
- [Lab Appointment (Database Operations)](/docs/use-cases/app-cases/lab_appointment/)
