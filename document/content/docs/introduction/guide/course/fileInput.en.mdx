---
title: File Input Feature
description: FastGPT file input feature guide
---

Starting from version 4.8.9, FastGPT supports file and image uploads in both `Simple Mode` and `Workflow`. This guide covers how to use the file input feature and explains how file parsing works.

## Using File Input in Simple Mode

When file upload is enabled in simple mode, it uses tool calling mode — the model decides whether to read the file content.

Find the file upload configuration on the left side and click the `Enable`/`Disable` button to open the configuration dialog.

![Enable file upload](/imgs/fileinpu-1.png)

Once enabled, a file selection icon appears in your debug chat box. Click it to select files to upload.

![Enable file upload](/imgs/fileinpu-2.png)

**Working Mode**

Starting from version 4.8.13, simple mode forces file parsing and places content in the system prompt to ensure the model consistently references files during conversations, avoiding situations where the model doesn't proactively call the file reading tool.

## Using File Input in Workflow

In workflows, find the `File Input` configuration in system settings and click the `Enable`/`Disable` button to open the configuration dialog.

![Enable file upload](/imgs/fileinpu-4.jpg)

There are many ways to use files in workflows. The simplest approach, shown below, is to connect document parsing via tool calling, achieving the same effect as simple mode.

| | |
| --------------------- | --------------------- |
| ![](/imgs/image-5.png) | ![](/imgs/image-6.png) |

You can also extract content, analyze documents, and pass results to HTTP or other modules in workflows, creating file processing SOPs.

![Document parsing](/imgs/image-7.png)

## How Document Parsing Works

Unlike image recognition, LLM models don't currently support direct document parsing. All document "understanding" happens by converting documents to text and appending prompts. Here are some FAQs explaining how document parsing works. Understanding these principles helps you use document parsing more effectively in workflows.

### How are uploaded files stored in the database?

In FastGPT's chat history structure, messages with role=user store values in this format:

```ts
type UserChatItemValueItemType = {
  type: 'text' | 'file'
  text?: {
    content: string;
  };
  file?: {
    type: 'img' | 'doc'
    name?: string;
    url: string;
  };
};
```

Uploaded images and documents are stored as URLs in the database, not as `parsed document content`.

### How are images handled?

The document parsing node doesn't process images. Image URLs are filtered out. For image recognition, use LLM models that support vision.

### How does the document parsing node work?

Document parsing relies on the document parsing node, which receives an `array<string>` input (file URLs) and outputs a `string` (parsed document content).

* The document parsing node only processes `document` type URLs, determined by the file extension extracted from the URL. If you select both documents and images, images are ignored.
* **The document parsing node only parses files from the current workflow run, not from chat history.**
* How multiple documents are concatenated:

Documents are concatenated using this template — filename + file content as a string, with different documents separated by: `\n******\n`

```
File: ${filename}
<Content>
${content}
</Content>
```

### How to use document parsing in AI nodes

AI nodes (AI Chat/Tool Calling) now include a document link input that can directly reference document URLs, enabling document content references.

It accepts an `Array<string>` input. These URLs are parsed and concatenated into prompts placed in role=system messages. The prompt template:

```
Use the content in <FilesContent></FilesContent> as reference for this conversation:
<FilesContent>
{{quote}}
</FilesContent>
```

# File Upload Updates in Version 4.8.13

There are some differences from version 4.8.9. While we've maintained backward compatibility to avoid breaking workflows immediately, please update your workflows to follow the new rules as soon as possible. Compatibility code will be removed in future versions.

1. Simple mode: File parsing is now forced, no longer decided by the model, ensuring documents are always referenced.
2. Document parsing: No longer parses files from chat history.
3. Tool calling: Supports direct document reference selection without mounting the document parsing tool. Automatically parses files from chat history.
4. AI chat: Supports direct document reference selection without the document parsing node. Automatically parses files from chat history.
5. Plugin standalone execution: No longer supports global files; plugin inputs support file type configuration, replacing global file upload.
6. **Workflow calling plugin: No longer automatically passes workflow-uploaded files to plugins. You must manually specify variables for plugin inputs.**
7. **Workflow calling workflow: No longer automatically passes workflow-uploaded files to sub-workflows. You can manually select which file links to pass.**
